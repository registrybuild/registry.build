<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">cpp-httplib</h1><a id="user-content-cpp-httplib" class="anchor" aria-label="Permalink: cpp-httplib" href="#cpp-httplib"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://github.com/yhirose/cpp-httplib/actions"><img src="https://github.com/yhirose/cpp-httplib/workflows/test/badge.svg" alt="" style="max-width: 100%;"></a></p>
<p dir="auto">A C++11 single-file header-only cross platform HTTP/HTTPS library.</p>
<p dir="auto">It's extremely easy to set up. Just include the <strong>httplib.h</strong> file in your code!</p>
<div class="markdown-alert markdown-alert-important" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-report mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</p><p dir="auto">This library uses 'blocking' socket I/O. If you are looking for a library with 'non-blocking' socket I/O, this is not the one that you want.</p>
</div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Simple examples</h2><a id="user-content-simple-examples" class="anchor" aria-label="Permalink: Simple examples" href="#simple-examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Server (Multi-threaded)</h4><a id="user-content-server-multi-threaded" class="anchor" aria-label="Permalink: Server (Multi-threaded)" href="#server-multi-threaded"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#define CPPHTTPLIB_OPENSSL_SUPPORT
#include &quot;path/to/httplib.h&quot;

// HTTP
httplib::Server svr;

// HTTPS
httplib::SSLServer svr;

svr.Get(&quot;/hi&quot;, [](const httplib::Request &amp;, httplib::Response &amp;res) {
  res.set_content(&quot;Hello World!&quot;, &quot;text/plain&quot;);
});

svr.listen(&quot;0.0.0.0&quot;, 8080);"><pre>#<span class="pl-k">define</span> <span class="pl-en">CPPHTTPLIB_OPENSSL_SUPPORT</span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">"</span>path/to/httplib.h<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">//</span> HTTP</span>
httplib::Server svr;

<span class="pl-c"><span class="pl-c">//</span> HTTPS</span>
httplib::SSLServer svr;

svr.Get(<span class="pl-s"><span class="pl-pds">"</span>/hi<span class="pl-pds">"</span></span>, [](<span class="pl-k">const</span> httplib::Request &amp;, httplib::Response &amp;res) {
  res.<span class="pl-c1">set_content</span>(<span class="pl-s"><span class="pl-pds">"</span>Hello World!<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);
});

svr.listen(<span class="pl-s"><span class="pl-pds">"</span>0.0.0.0<span class="pl-pds">"</span></span>, <span class="pl-c1">8080</span>);</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Client</h4><a id="user-content-client" class="anchor" aria-label="Permalink: Client" href="#client"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#define CPPHTTPLIB_OPENSSL_SUPPORT
#include &quot;path/to/httplib.h&quot;

// HTTP
httplib::Client cli(&quot;http://yhirose.github.io&quot;);

// HTTPS
httplib::Client cli(&quot;https://yhirose.github.io&quot;);

auto res = cli.Get(&quot;/hi&quot;);
res-&gt;status;
res-&gt;body;"><pre>#<span class="pl-k">define</span> <span class="pl-en">CPPHTTPLIB_OPENSSL_SUPPORT</span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">"</span>path/to/httplib.h<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">//</span> HTTP</span>
httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>http://yhirose.github.io<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> HTTPS</span>
httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>https://yhirose.github.io<span class="pl-pds">"</span></span>);

<span class="pl-k">auto</span> res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/hi<span class="pl-pds">"</span></span>);
res-&gt;status;
res-&gt;body;</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">SSL Support</h2><a id="user-content-ssl-support" class="anchor" aria-label="Permalink: SSL Support" href="#ssl-support"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">SSL support is available with <code>CPPHTTPLIB_OPENSSL_SUPPORT</code>. <code>libssl</code> and <code>libcrypto</code> should be linked.</p>
<div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">cpp-httplib currently supports only version 3.0 or later. Please see <a href="https://www.openssl.org/policies/releasestrat.html" rel="nofollow">this page</a> to get more information.</p>
</div>
<div class="markdown-alert markdown-alert-tip" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-light-bulb mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</p><p dir="auto">For macOS: cpp-httplib now can use system certs with <code>CPPHTTPLIB_USE_CERTS_FROM_MACOSX_KEYCHAIN</code>. <code>CoreFoundation</code> and <code>Security</code> should be linked with <code>-framework</code>.</p>
</div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#define CPPHTTPLIB_OPENSSL_SUPPORT
#include &quot;path/to/httplib.h&quot;

// Server
httplib::SSLServer svr(&quot;./cert.pem&quot;, &quot;./key.pem&quot;);

// Client
httplib::Client cli(&quot;https://localhost:1234&quot;); // scheme + host
httplib::SSLClient cli(&quot;localhost:1234&quot;); // host
httplib::SSLClient cli(&quot;localhost&quot;, 1234); // host, port

// Use your CA bundle
cli.set_ca_cert_path(&quot;./ca-bundle.crt&quot;);

// Disable cert verification
cli.enable_server_certificate_verification(false);

// Disable host verification
cli.enable_server_hostname_verification(false);"><pre>#<span class="pl-k">define</span> <span class="pl-en">CPPHTTPLIB_OPENSSL_SUPPORT</span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">"</span>path/to/httplib.h<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">//</span> Server</span>
httplib::SSLServer <span class="pl-en">svr</span>(<span class="pl-s"><span class="pl-pds">"</span>./cert.pem<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>./key.pem<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Client</span>
httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>https://localhost:1234<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> scheme + host</span>
httplib::SSLClient <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost:1234<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> host</span>
httplib::SSLClient <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">1234</span>); <span class="pl-c"><span class="pl-c">//</span> host, port</span>

<span class="pl-c"><span class="pl-c">//</span> Use your CA bundle</span>
cli.set_ca_cert_path(<span class="pl-s"><span class="pl-pds">"</span>./ca-bundle.crt<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Disable cert verification</span>
cli.enable_server_certificate_verification(<span class="pl-c1">false</span>);

<span class="pl-c"><span class="pl-c">//</span> Disable host verification</span>
cli.enable_server_hostname_verification(<span class="pl-c1">false</span>);</pre></div>
<div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">When using SSL, it seems impossible to avoid SIGPIPE in all cases, since on some operating systems, SIGPIPE can only be suppressed on a per-message basis, but there is no way to make the OpenSSL library do so for its internal communications. If your program needs to avoid being terminated on SIGPIPE, the only fully general way might be to set up a signal handler for SIGPIPE to handle or ignore it yourself.</p>
</div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">SSL Error Handling</h3><a id="user-content-ssl-error-handling" class="anchor" aria-label="Permalink: SSL Error Handling" href="#ssl-error-handling"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">When SSL operations fail, cpp-httplib provides detailed error information through two separate error fields:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#define CPPHTTPLIB_OPENSSL_SUPPORT
#include &quot;path/to/httplib.h&quot;

httplib::Client cli(&quot;https://example.com&quot;);

auto res = cli.Get(&quot;/&quot;);
if (!res) {
  // Check the error type
  auto err = res.error();

  switch (err) {
    case httplib::Error::SSLConnection:
      std::cout &lt;&lt; &quot;SSL connection failed, SSL error: &quot;
                &lt;&lt; res-&gt;ssl_error() &lt;&lt; std::endl;
      break;

    case httplib::Error::SSLLoadingCerts:
      std::cout &lt;&lt; &quot;SSL cert loading failed, OpenSSL error: &quot;
                &lt;&lt; std::hex &lt;&lt; res-&gt;ssl_openssl_error() &lt;&lt; std::endl;
      break;

    case httplib::Error::SSLServerVerification:
      std::cout &lt;&lt; &quot;SSL verification failed, X509 error: &quot;
                &lt;&lt; res-&gt;ssl_openssl_error() &lt;&lt; std::endl;
      break;

    case httplib::Error::SSLServerHostnameVerification:
      std::cout &lt;&lt; &quot;SSL hostname verification failed, X509 error: &quot;
                &lt;&lt; res-&gt;ssl_openssl_error() &lt;&lt; std::endl;
      break;

    default:
      std::cout &lt;&lt; &quot;HTTP error: &quot; &lt;&lt; httplib::to_string(err) &lt;&lt; std::endl;
    }
  }
}"><pre>#<span class="pl-k">define</span> <span class="pl-en">CPPHTTPLIB_OPENSSL_SUPPORT</span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">"</span>path/to/httplib.h<span class="pl-pds">"</span></span>

httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>https://example.com<span class="pl-pds">"</span></span>);

<span class="pl-k">auto</span> res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>);
<span class="pl-k">if</span> (!res) {
  <span class="pl-c"><span class="pl-c">//</span> Check the error type</span>
  <span class="pl-k">auto</span> err = res.<span class="pl-c1">error</span>();

  <span class="pl-k">switch</span> (err) {
    <span class="pl-k">case</span> httplib::Error::SSLConnection:
      std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>SSL connection failed, SSL error: <span class="pl-pds">"</span></span>
                &lt;&lt; res-&gt;<span class="pl-c1">ssl_error</span>() &lt;&lt; std::endl;
      <span class="pl-k">break</span>;

    <span class="pl-k">case</span> httplib::Error::SSLLoadingCerts:
      std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>SSL cert loading failed, OpenSSL error: <span class="pl-pds">"</span></span>
                &lt;&lt; std::hex &lt;&lt; res-&gt;<span class="pl-c1">ssl_openssl_error</span>() &lt;&lt; std::endl;
      <span class="pl-k">break</span>;

    <span class="pl-k">case</span> httplib::Error::SSLServerVerification:
      std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>SSL verification failed, X509 error: <span class="pl-pds">"</span></span>
                &lt;&lt; res-&gt;<span class="pl-c1">ssl_openssl_error</span>() &lt;&lt; std::endl;
      <span class="pl-k">break</span>;

    <span class="pl-k">case</span> httplib::Error::SSLServerHostnameVerification:
      std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>SSL hostname verification failed, X509 error: <span class="pl-pds">"</span></span>
                &lt;&lt; res-&gt;<span class="pl-c1">ssl_openssl_error</span>() &lt;&lt; std::endl;
      <span class="pl-k">break</span>;

    <span class="pl-k">default</span>:
      std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>HTTP error: <span class="pl-pds">"</span></span> &lt;&lt; <span class="pl-c1">httplib::to_string</span>(err) &lt;&lt; std::endl;
    }
  }
}</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Server</h2><a id="user-content-server" class="anchor" aria-label="Permalink: Server" href="#server"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#include &lt;httplib.h&gt;

int main(void)
{
  using namespace httplib;

  Server svr;

  svr.Get(&quot;/hi&quot;, [](const Request&amp; req, Response&amp; res) {
    res.set_content(&quot;Hello World!&quot;, &quot;text/plain&quot;);
  });

  // Match the request path against a regular expression
  // and extract its captures
  svr.Get(R&quot;(/numbers/(\d+))&quot;, [&amp;](const Request&amp; req, Response&amp; res) {
    auto numbers = req.matches[1];
    res.set_content(numbers, &quot;text/plain&quot;);
  });

  // Capture the second segment of the request path as &quot;id&quot; path param
  svr.Get(&quot;/users/:id&quot;, [&amp;](const Request&amp; req, Response&amp; res) {
    auto user_id = req.path_params.at(&quot;id&quot;);
    res.set_content(user_id, &quot;text/plain&quot;);
  });

  // Extract values from HTTP headers and URL query params
  svr.Get(&quot;/body-header-param&quot;, [](const Request&amp; req, Response&amp; res) {
    if (req.has_header(&quot;Content-Length&quot;)) {
      auto val = req.get_header_value(&quot;Content-Length&quot;);
    }
    if (req.has_param(&quot;key&quot;)) {
      auto val = req.get_param_value(&quot;key&quot;);
    }
    res.set_content(req.body, &quot;text/plain&quot;);
  });

  // If the handler takes time to finish, you can also poll the connection state
  svr.Get(&quot;/task&quot;, [&amp;](const Request&amp; req, Response&amp; res) {
    const char * result = nullptr;
    process.run(); // for example, starting an external process
    while (result == nullptr) {
      sleep(1);
      if (req.is_connection_closed()) {
        process.kill(); // kill the process
        return;
      }
      result = process.stdout(); // != nullptr if the process finishes
    }
    res.set_content(result, &quot;text/plain&quot;);
  });

  svr.Get(&quot;/stop&quot;, [&amp;](const Request&amp; req, Response&amp; res) {
    svr.stop();
  });

  svr.listen(&quot;localhost&quot;, 1234);
}"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>httplib.h<span class="pl-pds">&gt;</span></span>

<span class="pl-k">int</span> <span class="pl-en">main</span>(<span class="pl-k">void</span>)
{
  <span class="pl-k">using</span> <span class="pl-k">namespace</span> <span class="pl-en">httplib</span><span class="pl-k">;</span>

  Server svr;

  svr.<span class="pl-c1">Get</span>(<span class="pl-s"><span class="pl-pds">"</span>/hi<span class="pl-pds">"</span></span>, [](<span class="pl-k">const</span> Request&amp; req, Response&amp; res) {
    res.<span class="pl-c1">set_content</span>(<span class="pl-s"><span class="pl-pds">"</span>Hello World!<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);
  });

  <span class="pl-c"><span class="pl-c">//</span> Match the request path against a regular expression</span>
  <span class="pl-c"><span class="pl-c">//</span> and extract its captures</span>
  svr.<span class="pl-c1">Get</span>(<span class="pl-s"><span class="pl-pds">R"(</span>/numbers/(\d+)<span class="pl-pds">)"</span></span>, [&amp;](<span class="pl-k">const</span> Request&amp; req, Response&amp; res) {
    <span class="pl-k">auto</span> numbers = req.<span class="pl-smi">matches</span>[<span class="pl-c1">1</span>];
    res.<span class="pl-c1">set_content</span>(numbers, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);
  });

  <span class="pl-c"><span class="pl-c">//</span> Capture the second segment of the request path as "id" path param</span>
  svr.<span class="pl-c1">Get</span>(<span class="pl-s"><span class="pl-pds">"</span>/users/:id<span class="pl-pds">"</span></span>, [&amp;](<span class="pl-k">const</span> Request&amp; req, Response&amp; res) {
    <span class="pl-k">auto</span> user_id = req.<span class="pl-smi">path_params</span>.<span class="pl-c1">at</span>(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>);
    res.<span class="pl-c1">set_content</span>(user_id, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);
  });

  <span class="pl-c"><span class="pl-c">//</span> Extract values from HTTP headers and URL query params</span>
  svr.<span class="pl-c1">Get</span>(<span class="pl-s"><span class="pl-pds">"</span>/body-header-param<span class="pl-pds">"</span></span>, [](<span class="pl-k">const</span> Request&amp; req, Response&amp; res) {
    <span class="pl-k">if</span> (req.<span class="pl-c1">has_header</span>(<span class="pl-s"><span class="pl-pds">"</span>Content-Length<span class="pl-pds">"</span></span>)) {
      <span class="pl-k">auto</span> val = req.<span class="pl-c1">get_header_value</span>(<span class="pl-s"><span class="pl-pds">"</span>Content-Length<span class="pl-pds">"</span></span>);
    }
    <span class="pl-k">if</span> (req.<span class="pl-c1">has_param</span>(<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>)) {
      <span class="pl-k">auto</span> val = req.<span class="pl-c1">get_param_value</span>(<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>);
    }
    res.<span class="pl-c1">set_content</span>(req.<span class="pl-smi">body</span>, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);
  });

  <span class="pl-c"><span class="pl-c">//</span> If the handler takes time to finish, you can also poll the connection state</span>
  svr.<span class="pl-c1">Get</span>(<span class="pl-s"><span class="pl-pds">"</span>/task<span class="pl-pds">"</span></span>, [&amp;](<span class="pl-k">const</span> Request&amp; req, Response&amp; res) {
    <span class="pl-k">const</span> <span class="pl-k">char</span> * result = <span class="pl-c1">nullptr</span>;
    process.<span class="pl-c1">run</span>(); <span class="pl-c"><span class="pl-c">//</span> for example, starting an external process</span>
    <span class="pl-k">while</span> (result == <span class="pl-c1">nullptr</span>) {
      <span class="pl-c1">sleep</span>(<span class="pl-c1">1</span>);
      <span class="pl-k">if</span> (req.<span class="pl-c1">is_connection_closed</span>()) {
        process.<span class="pl-c1">kill</span>(); <span class="pl-c"><span class="pl-c">//</span> kill the process</span>
        <span class="pl-k">return</span>;
      }
      result = process.<span class="pl-c1">stdout</span>(); <span class="pl-c"><span class="pl-c">//</span> != nullptr if the process finishes</span>
    }
    res.<span class="pl-c1">set_content</span>(result, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);
  });

  svr.<span class="pl-c1">Get</span>(<span class="pl-s"><span class="pl-pds">"</span>/stop<span class="pl-pds">"</span></span>, [&amp;](<span class="pl-k">const</span> Request&amp; req, Response&amp; res) {
    svr.<span class="pl-c1">stop</span>();
  });

  svr.<span class="pl-c1">listen</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">1234</span>);
}</pre></div>
<p dir="auto"><code>Post</code>, <code>Put</code>, <code>Delete</code> and <code>Options</code> methods are also supported.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Bind a socket to multiple interfaces and any available port</h3><a id="user-content-bind-a-socket-to-multiple-interfaces-and-any-available-port" class="anchor" aria-label="Permalink: Bind a socket to multiple interfaces and any available port" href="#bind-a-socket-to-multiple-interfaces-and-any-available-port"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="int port = svr.bind_to_any_port(&quot;0.0.0.0&quot;);
svr.listen_after_bind();"><pre><span class="pl-k">int</span> port = svr.bind_to_any_port(<span class="pl-s"><span class="pl-pds">"</span>0.0.0.0<span class="pl-pds">"</span></span>);
svr.listen_after_bind();</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Static File Server</h3><a id="user-content-static-file-server" class="anchor" aria-label="Permalink: Static File Server" href="#static-file-server"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Mount / to ./www directory
auto ret = svr.set_mount_point(&quot;/&quot;, &quot;./www&quot;);
if (!ret) {
  // The specified base directory doesn't exist...
}

// Mount /public to ./www directory
ret = svr.set_mount_point(&quot;/public&quot;, &quot;./www&quot;);

// Mount /public to ./www1 and ./www2 directories
ret = svr.set_mount_point(&quot;/public&quot;, &quot;./www1&quot;); // 1st order to search
ret = svr.set_mount_point(&quot;/public&quot;, &quot;./www2&quot;); // 2nd order to search

// Remove mount /
ret = svr.remove_mount_point(&quot;/&quot;);

// Remove mount /public
ret = svr.remove_mount_point(&quot;/public&quot;);"><pre><span class="pl-c"><span class="pl-c">//</span> Mount / to ./www directory</span>
<span class="pl-k">auto</span> ret = svr.set_mount_point(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>./www<span class="pl-pds">"</span></span>);
<span class="pl-k">if</span> (!ret) {
  <span class="pl-c"><span class="pl-c">//</span> The specified base directory doesn't exist...</span>
}

<span class="pl-c"><span class="pl-c">//</span> Mount /public to ./www directory</span>
ret = svr.set_mount_point(<span class="pl-s"><span class="pl-pds">"</span>/public<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>./www<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Mount /public to ./www1 and ./www2 directories</span>
ret = svr.set_mount_point(<span class="pl-s"><span class="pl-pds">"</span>/public<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>./www1<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> 1st order to search</span>
ret = svr.set_mount_point(<span class="pl-s"><span class="pl-pds">"</span>/public<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>./www2<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> 2nd order to search</span>

<span class="pl-c"><span class="pl-c">//</span> Remove mount /</span>
ret = svr.remove_mount_point(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Remove mount /public</span>
ret = svr.remove_mount_point(<span class="pl-s"><span class="pl-pds">"</span>/public<span class="pl-pds">"</span></span>);</pre></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// User defined file extension and MIME type mappings
svr.set_file_extension_and_mimetype_mapping(&quot;cc&quot;, &quot;text/x-c&quot;);
svr.set_file_extension_and_mimetype_mapping(&quot;cpp&quot;, &quot;text/x-c&quot;);
svr.set_file_extension_and_mimetype_mapping(&quot;hh&quot;, &quot;text/x-h&quot;);"><pre><span class="pl-c"><span class="pl-c">//</span> User defined file extension and MIME type mappings</span>
svr.set_file_extension_and_mimetype_mapping(<span class="pl-s"><span class="pl-pds">"</span>cc<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/x-c<span class="pl-pds">"</span></span>);
svr.set_file_extension_and_mimetype_mapping(<span class="pl-s"><span class="pl-pds">"</span>cpp<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/x-c<span class="pl-pds">"</span></span>);
svr.set_file_extension_and_mimetype_mapping(<span class="pl-s"><span class="pl-pds">"</span>hh<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/x-h<span class="pl-pds">"</span></span>);</pre></div>
<p dir="auto">The following are built-in mappings:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th align="left">Extension</th>
<th align="left">MIME Type</th>
<th align="left">Extension</th>
<th align="left">MIME Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">css</td>
<td align="left">text/css</td>
<td align="left">mpga</td>
<td align="left">audio/mpeg</td>
</tr>
<tr>
<td align="left">csv</td>
<td align="left">text/csv</td>
<td align="left">weba</td>
<td align="left">audio/webm</td>
</tr>
<tr>
<td align="left">txt</td>
<td align="left">text/plain</td>
<td align="left">wav</td>
<td align="left">audio/wave</td>
</tr>
<tr>
<td align="left">vtt</td>
<td align="left">text/vtt</td>
<td align="left">otf</td>
<td align="left">font/otf</td>
</tr>
<tr>
<td align="left">html, htm</td>
<td align="left">text/html</td>
<td align="left">ttf</td>
<td align="left">font/ttf</td>
</tr>
<tr>
<td align="left">apng</td>
<td align="left">image/apng</td>
<td align="left">woff</td>
<td align="left">font/woff</td>
</tr>
<tr>
<td align="left">avif</td>
<td align="left">image/avif</td>
<td align="left">woff2</td>
<td align="left">font/woff2</td>
</tr>
<tr>
<td align="left">bmp</td>
<td align="left">image/bmp</td>
<td align="left">7z</td>
<td align="left">application/x-7z-compressed</td>
</tr>
<tr>
<td align="left">gif</td>
<td align="left">image/gif</td>
<td align="left">atom</td>
<td align="left">application/atom+xml</td>
</tr>
<tr>
<td align="left">png</td>
<td align="left">image/png</td>
<td align="left">pdf</td>
<td align="left">application/pdf</td>
</tr>
<tr>
<td align="left">svg</td>
<td align="left">image/svg+xml</td>
<td align="left">mjs, js</td>
<td align="left">text/javascript</td>
</tr>
<tr>
<td align="left">webp</td>
<td align="left">image/webp</td>
<td align="left">json</td>
<td align="left">application/json</td>
</tr>
<tr>
<td align="left">ico</td>
<td align="left">image/x-icon</td>
<td align="left">rss</td>
<td align="left">application/rss+xml</td>
</tr>
<tr>
<td align="left">tif</td>
<td align="left">image/tiff</td>
<td align="left">tar</td>
<td align="left">application/x-tar</td>
</tr>
<tr>
<td align="left">tiff</td>
<td align="left">image/tiff</td>
<td align="left">xhtml, xht</td>
<td align="left">application/xhtml+xml</td>
</tr>
<tr>
<td align="left">jpeg, jpg</td>
<td align="left">image/jpeg</td>
<td align="left">xslt</td>
<td align="left">application/xslt+xml</td>
</tr>
<tr>
<td align="left">mp4</td>
<td align="left">video/mp4</td>
<td align="left">xml</td>
<td align="left">application/xml</td>
</tr>
<tr>
<td align="left">mpeg</td>
<td align="left">video/mpeg</td>
<td align="left">gz</td>
<td align="left">application/gzip</td>
</tr>
<tr>
<td align="left">webm</td>
<td align="left">video/webm</td>
<td align="left">zip</td>
<td align="left">application/zip</td>
</tr>
<tr>
<td align="left">mp3</td>
<td align="left">audio/mp3</td>
<td align="left">wasm</td>
<td align="left">application/wasm</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div class="markdown-alert markdown-alert-warning" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-alert mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Warning</p><p dir="auto">These static file server methods are not thread-safe.</p>
</div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">File request handler</h3><a id="user-content-file-request-handler" class="anchor" aria-label="Permalink: File request handler" href="#file-request-handler"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// The handler is called right before the response is sent to a client
svr.set_file_request_handler([](const Request &amp;req, Response &amp;res) {
  ...
});"><pre><span class="pl-c"><span class="pl-c">//</span> The handler is called right before the response is sent to a client</span>
svr.set_file_request_handler([](<span class="pl-k">const</span> Request &amp;req, Response &amp;res) {
  ...
});</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Logging</h3><a id="user-content-logging" class="anchor" aria-label="Permalink: Logging" href="#logging"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.set_logger([](const auto&amp; req, const auto&amp; res) {
  your_logger(req, res);
});"><pre>svr.set_logger([](<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; req, <span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; res) {
  <span class="pl-c1">your_logger</span>(req, res);
});</pre></div>
<p dir="auto">You can also set a pre-compression logger to capture request/response data before compression is applied. This is useful for debugging and monitoring purposes when you need to see the original, uncompressed response content:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.set_pre_compression_logger([](const auto&amp; req, const auto&amp; res) {
  // Log before compression - res.body contains uncompressed content
  // Content-Encoding header is not yet set
  your_pre_compression_logger(req, res);
});"><pre>svr.set_pre_compression_logger([](<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; req, <span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; res) {
  <span class="pl-c"><span class="pl-c">//</span> Log before compression - res.body contains uncompressed content</span>
  <span class="pl-c"><span class="pl-c">//</span> Content-Encoding header is not yet set</span>
  <span class="pl-c1">your_pre_compression_logger</span>(req, res);
});</pre></div>
<p dir="auto">The pre-compression logger is only called when compression would be applied. For responses without compression, only the regular logger is called.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Error handler</h3><a id="user-content-error-handler" class="anchor" aria-label="Permalink: Error handler" href="#error-handler"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.set_error_handler([](const auto&amp; req, auto&amp; res) {
  auto fmt = &quot;&lt;p&gt;Error Status: &lt;span style='color:red;'&gt;%d&lt;/span&gt;&lt;/p&gt;&quot;;
  char buf[BUFSIZ];
  snprintf(buf, sizeof(buf), fmt, res.status);
  res.set_content(buf, &quot;text/html&quot;);
});"><pre>svr.set_error_handler([](<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; req, <span class="pl-k">auto</span>&amp; res) {
  <span class="pl-k">auto</span> fmt = <span class="pl-s"><span class="pl-pds">"</span>&lt;p&gt;Error Status: &lt;span style='color:red;'&gt;%d&lt;/span&gt;&lt;/p&gt;<span class="pl-pds">"</span></span>;
  <span class="pl-k">char</span> buf[BUFSIZ];
  <span class="pl-c1">snprintf</span>(buf, <span class="pl-k">sizeof</span>(buf), fmt, res.<span class="pl-smi">status</span>);
  res.<span class="pl-c1">set_content</span>(buf, <span class="pl-s"><span class="pl-pds">"</span>text/html<span class="pl-pds">"</span></span>);
});</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Exception handler</h3><a id="user-content-exception-handler" class="anchor" aria-label="Permalink: Exception handler" href="#exception-handler"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The exception handler gets called if a user routing handler throws an error.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.set_exception_handler([](const auto&amp; req, auto&amp; res, std::exception_ptr ep) {
  auto fmt = &quot;&lt;h1&gt;Error 500&lt;/h1&gt;&lt;p&gt;%s&lt;/p&gt;&quot;;
  char buf[BUFSIZ];
  try {
    std::rethrow_exception(ep);
  } catch (std::exception &amp;e) {
    snprintf(buf, sizeof(buf), fmt, e.what());
  } catch (...) { // See the following NOTE
    snprintf(buf, sizeof(buf), fmt, &quot;Unknown Exception&quot;);
  }
  res.set_content(buf, &quot;text/html&quot;);
  res.status = StatusCode::InternalServerError_500;
});"><pre>svr.set_exception_handler([](<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; req, <span class="pl-k">auto</span>&amp; res, std::exception_ptr ep) {
  <span class="pl-k">auto</span> fmt = <span class="pl-s"><span class="pl-pds">"</span>&lt;h1&gt;Error 500&lt;/h1&gt;&lt;p&gt;%s&lt;/p&gt;<span class="pl-pds">"</span></span>;
  <span class="pl-k">char</span> buf[BUFSIZ];
  <span class="pl-k">try</span> {
    <span class="pl-c1">std::rethrow_exception</span>(ep);
  } <span class="pl-k">catch</span> (std::exception &amp;e) {
    <span class="pl-c1">snprintf</span>(buf, <span class="pl-k">sizeof</span>(buf), fmt, e.<span class="pl-c1">what</span>());
  } <span class="pl-k">catch</span> (...) { <span class="pl-c"><span class="pl-c">//</span> See the following NOTE</span>
    <span class="pl-c1">snprintf</span>(buf, <span class="pl-k">sizeof</span>(buf), fmt, <span class="pl-s"><span class="pl-pds">"</span>Unknown Exception<span class="pl-pds">"</span></span>);
  }
  res.<span class="pl-c1">set_content</span>(buf, <span class="pl-s"><span class="pl-pds">"</span>text/html<span class="pl-pds">"</span></span>);
  res.<span class="pl-smi">status</span> = StatusCode::InternalServerError_500;
});</pre></div>
<div class="markdown-alert markdown-alert-caution" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-stop mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M4.47.22A.749.749 0 0 1 5 0h6c.199 0 .389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749 0 0 1-.22.53l-4.25 4.25A.749.749 0 0 1 11 16H5a.749.749 0 0 1-.53-.22L.22 11.53A.749.749 0 0 1 0 11V5c0-.199.079-.389.22-.53Zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5ZM8 4a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Caution</p><p dir="auto">if you don't provide the <code>catch (...)</code> block for a rethrown exception pointer, an uncaught exception will end up causing the server crash. Be careful!</p>
</div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Pre routing handler</h3><a id="user-content-pre-routing-handler" class="anchor" aria-label="Permalink: Pre routing handler" href="#pre-routing-handler"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.set_pre_routing_handler([](const auto&amp; req, auto&amp; res) {
  if (req.path == &quot;/hello&quot;) {
    res.set_content(&quot;world&quot;, &quot;text/html&quot;);
    return Server::HandlerResponse::Handled;
  }
  return Server::HandlerResponse::Unhandled;
});"><pre>svr.set_pre_routing_handler([](<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; req, <span class="pl-k">auto</span>&amp; res) {
  <span class="pl-k">if</span> (req.<span class="pl-smi">path</span> == <span class="pl-s"><span class="pl-pds">"</span>/hello<span class="pl-pds">"</span></span>) {
    res.<span class="pl-c1">set_content</span>(<span class="pl-s"><span class="pl-pds">"</span>world<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/html<span class="pl-pds">"</span></span>);
    <span class="pl-k">return</span> Server::HandlerResponse::Handled;
  }
  <span class="pl-k">return</span> Server::HandlerResponse::Unhandled;
});</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Post routing handler</h3><a id="user-content-post-routing-handler" class="anchor" aria-label="Permalink: Post routing handler" href="#post-routing-handler"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.set_post_routing_handler([](const auto&amp; req, auto&amp; res) {
  res.set_header(&quot;ADDITIONAL_HEADER&quot;, &quot;value&quot;);
});"><pre>svr.set_post_routing_handler([](<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; req, <span class="pl-k">auto</span>&amp; res) {
  res.<span class="pl-c1">set_header</span>(<span class="pl-s"><span class="pl-pds">"</span>ADDITIONAL_HEADER<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>);
});</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Pre request handler</h3><a id="user-content-pre-request-handler" class="anchor" aria-label="Permalink: Pre request handler" href="#pre-request-handler"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.set_pre_request_handler([](const auto&amp; req, auto&amp; res) {
  if (req.matched_route == &quot;/user/:user&quot;) {
    auto user = req.path_params.at(&quot;user&quot;);
    if (user != &quot;john&quot;) {
      res.status = StatusCode::Forbidden_403;
      res.set_content(&quot;error&quot;, &quot;text/html&quot;);
      return Server::HandlerResponse::Handled;
    }
  }
  return Server::HandlerResponse::Unhandled;
});"><pre>svr.set_pre_request_handler([](<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; req, <span class="pl-k">auto</span>&amp; res) {
  <span class="pl-k">if</span> (req.<span class="pl-smi">matched_route</span> == <span class="pl-s"><span class="pl-pds">"</span>/user/:user<span class="pl-pds">"</span></span>) {
    <span class="pl-k">auto</span> user = req.<span class="pl-smi">path_params</span>.<span class="pl-c1">at</span>(<span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>);
    <span class="pl-k">if</span> (user != <span class="pl-s"><span class="pl-pds">"</span>john<span class="pl-pds">"</span></span>) {
      res.<span class="pl-smi">status</span> = StatusCode::Forbidden_403;
      res.<span class="pl-c1">set_content</span>(<span class="pl-s"><span class="pl-pds">"</span>error<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/html<span class="pl-pds">"</span></span>);
      <span class="pl-k">return</span> Server::HandlerResponse::Handled;
    }
  }
  <span class="pl-k">return</span> Server::HandlerResponse::Unhandled;
});</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Form data handling</h3><a id="user-content-form-data-handling" class="anchor" aria-label="Permalink: Form data handling" href="#form-data-handling"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">URL-encoded form data ('application/x-www-form-urlencoded')</h4><a id="user-content-url-encoded-form-data-applicationx-www-form-urlencoded" class="anchor" aria-label="Permalink: URL-encoded form data ('application/x-www-form-urlencoded')" href="#url-encoded-form-data-applicationx-www-form-urlencoded"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.Post(&quot;/form&quot;, [&amp;](const auto&amp; req, auto&amp; res) {
  // URL query parameters and form-encoded data are accessible via req.params
  std::string username = req.get_param_value(&quot;username&quot;);
  std::string password = req.get_param_value(&quot;password&quot;);

  // Handle multiple values with same name
  auto interests = req.get_param_values(&quot;interests&quot;);

  // Check existence
  if (req.has_param(&quot;newsletter&quot;)) {
    // Handle newsletter subscription
  }
});"><pre>svr.Post(<span class="pl-s"><span class="pl-pds">"</span>/form<span class="pl-pds">"</span></span>, [&amp;](<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; req, <span class="pl-k">auto</span>&amp; res) {
  <span class="pl-c"><span class="pl-c">//</span> URL query parameters and form-encoded data are accessible via req.params</span>
  std::string username = req.<span class="pl-c1">get_param_value</span>(<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>);
  std::string password = req.<span class="pl-c1">get_param_value</span>(<span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>);

  <span class="pl-c"><span class="pl-c">//</span> Handle multiple values with same name</span>
  <span class="pl-k">auto</span> interests = req.<span class="pl-c1">get_param_values</span>(<span class="pl-s"><span class="pl-pds">"</span>interests<span class="pl-pds">"</span></span>);

  <span class="pl-c"><span class="pl-c">//</span> Check existence</span>
  <span class="pl-k">if</span> (req.<span class="pl-c1">has_param</span>(<span class="pl-s"><span class="pl-pds">"</span>newsletter<span class="pl-pds">"</span></span>)) {
    <span class="pl-c"><span class="pl-c">//</span> Handle newsletter subscription</span>
  }
});</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">'multipart/form-data' POST data</h4><a id="user-content-multipartform-data-post-data" class="anchor" aria-label="Permalink: 'multipart/form-data' POST data" href="#multipartform-data-post-data"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.Post(&quot;/multipart&quot;, [&amp;](const Request&amp; req, Response&amp; res) {
  // Access text fields (from form inputs without files)
  std::string username = req.form.get_field(&quot;username&quot;);
  std::string bio = req.form.get_field(&quot;bio&quot;);

  // Access uploaded files
  if (req.form.has_file(&quot;avatar&quot;)) {
    const auto&amp; file = req.form.get_file(&quot;avatar&quot;);
    std::cout &lt;&lt; &quot;Uploaded file: &quot; &lt;&lt; file.filename
              &lt;&lt; &quot; (&quot; &lt;&lt; file.content_type &lt;&lt; &quot;) - &quot;
              &lt;&lt; file.content.size() &lt;&lt; &quot; bytes&quot; &lt;&lt; std::endl;

    // Access additional headers if needed
    for (const auto&amp; header : file.headers) {
      std::cout &lt;&lt; &quot;Header: &quot; &lt;&lt; header.first &lt;&lt; &quot; = &quot; &lt;&lt; header.second &lt;&lt; std::endl;
    }

    // Save to disk
    std::ofstream ofs(file.filename, std::ios::binary);
    ofs &lt;&lt; file.content;
  }

  // Handle multiple values with same name
  auto tags = req.form.get_fields(&quot;tags&quot;);  // e.g., multiple checkboxes
  for (const auto&amp; tag : tags) {
    std::cout &lt;&lt; &quot;Tag: &quot; &lt;&lt; tag &lt;&lt; std::endl;
  }

  auto documents = req.form.get_files(&quot;documents&quot;);  // multiple file upload
  for (const auto&amp; doc : documents) {
    std::cout &lt;&lt; &quot;Document: &quot; &lt;&lt; doc.filename
              &lt;&lt; &quot; (&quot; &lt;&lt; doc.content.size() &lt;&lt; &quot; bytes)&quot; &lt;&lt; std::endl;
  }

  // Check existence before accessing
  if (req.form.has_field(&quot;newsletter&quot;)) {
    std::cout &lt;&lt; &quot;Newsletter subscription: &quot; &lt;&lt; req.form.get_field(&quot;newsletter&quot;) &lt;&lt; std::endl;
  }

  // Get counts for validation
  if (req.form.get_field_count(&quot;tags&quot;) &gt; 5) {
    res.status = StatusCode::BadRequest_400;
    res.set_content(&quot;Too many tags&quot;, &quot;text/plain&quot;);
    return;
  }

  // Summary
  std::cout &lt;&lt; &quot;Received &quot; &lt;&lt; req.form.fields.size() &lt;&lt; &quot; text fields and &quot;
            &lt;&lt; req.form.files.size() &lt;&lt; &quot; files&quot; &lt;&lt; std::endl;

  res.set_content(&quot;Upload successful&quot;, &quot;text/plain&quot;);
});"><pre>svr.Post(<span class="pl-s"><span class="pl-pds">"</span>/multipart<span class="pl-pds">"</span></span>, [&amp;](<span class="pl-k">const</span> Request&amp; req, Response&amp; res) {
  <span class="pl-c"><span class="pl-c">//</span> Access text fields (from form inputs without files)</span>
  std::string username = req.<span class="pl-smi">form</span>.<span class="pl-c1">get_field</span>(<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>);
  std::string bio = req.<span class="pl-smi">form</span>.<span class="pl-c1">get_field</span>(<span class="pl-s"><span class="pl-pds">"</span>bio<span class="pl-pds">"</span></span>);

  <span class="pl-c"><span class="pl-c">//</span> Access uploaded files</span>
  <span class="pl-k">if</span> (req.<span class="pl-smi">form</span>.<span class="pl-c1">has_file</span>(<span class="pl-s"><span class="pl-pds">"</span>avatar<span class="pl-pds">"</span></span>)) {
    <span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; file = req.<span class="pl-smi">form</span>.<span class="pl-c1">get_file</span>(<span class="pl-s"><span class="pl-pds">"</span>avatar<span class="pl-pds">"</span></span>);
    std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>Uploaded file: <span class="pl-pds">"</span></span> &lt;&lt; file.<span class="pl-smi">filename</span>
              &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span> (<span class="pl-pds">"</span></span> &lt;&lt; file.<span class="pl-smi">content_type</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>) - <span class="pl-pds">"</span></span>
              &lt;&lt; file.<span class="pl-smi">content</span>.<span class="pl-c1">size</span>() &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span> bytes<span class="pl-pds">"</span></span> &lt;&lt; std::endl;

    <span class="pl-c"><span class="pl-c">//</span> Access additional headers if needed</span>
    <span class="pl-k">for</span> (<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; header : file.<span class="pl-smi">headers</span>) {
      std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>Header: <span class="pl-pds">"</span></span> &lt;&lt; header.<span class="pl-smi">first</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span> = <span class="pl-pds">"</span></span> &lt;&lt; header.<span class="pl-smi">second</span> &lt;&lt; std::endl;
    }

    <span class="pl-c"><span class="pl-c">//</span> Save to disk</span>
    std::ofstream <span class="pl-smi">ofs</span>(file.<span class="pl-smi">filename</span>, std::ios::binary);
    ofs &lt;&lt; file.<span class="pl-smi">content</span>;
  }

  <span class="pl-c"><span class="pl-c">//</span> Handle multiple values with same name</span>
  <span class="pl-k">auto</span> tags = req.<span class="pl-smi">form</span>.<span class="pl-c1">get_fields</span>(<span class="pl-s"><span class="pl-pds">"</span>tags<span class="pl-pds">"</span></span>);  <span class="pl-c"><span class="pl-c">//</span> e.g., multiple checkboxes</span>
  <span class="pl-k">for</span> (<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; tag : tags) {
    std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>Tag: <span class="pl-pds">"</span></span> &lt;&lt; tag &lt;&lt; std::endl;
  }

  <span class="pl-k">auto</span> documents = req.<span class="pl-smi">form</span>.<span class="pl-c1">get_files</span>(<span class="pl-s"><span class="pl-pds">"</span>documents<span class="pl-pds">"</span></span>);  <span class="pl-c"><span class="pl-c">//</span> multiple file upload</span>
  <span class="pl-k">for</span> (<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; doc : documents) {
    std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>Document: <span class="pl-pds">"</span></span> &lt;&lt; doc.<span class="pl-smi">filename</span>
              &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span> (<span class="pl-pds">"</span></span> &lt;&lt; doc.<span class="pl-smi">content</span>.<span class="pl-c1">size</span>() &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span> bytes)<span class="pl-pds">"</span></span> &lt;&lt; std::endl;
  }

  <span class="pl-c"><span class="pl-c">//</span> Check existence before accessing</span>
  <span class="pl-k">if</span> (req.<span class="pl-smi">form</span>.<span class="pl-c1">has_field</span>(<span class="pl-s"><span class="pl-pds">"</span>newsletter<span class="pl-pds">"</span></span>)) {
    std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>Newsletter subscription: <span class="pl-pds">"</span></span> &lt;&lt; req.<span class="pl-smi">form</span>.<span class="pl-c1">get_field</span>(<span class="pl-s"><span class="pl-pds">"</span>newsletter<span class="pl-pds">"</span></span>) &lt;&lt; std::endl;
  }

  <span class="pl-c"><span class="pl-c">//</span> Get counts for validation</span>
  <span class="pl-k">if</span> (req.<span class="pl-smi">form</span>.<span class="pl-c1">get_field_count</span>(<span class="pl-s"><span class="pl-pds">"</span>tags<span class="pl-pds">"</span></span>) &gt; <span class="pl-c1">5</span>) {
    res.<span class="pl-smi">status</span> = StatusCode::BadRequest_400;
    res.<span class="pl-c1">set_content</span>(<span class="pl-s"><span class="pl-pds">"</span>Too many tags<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);
    <span class="pl-k">return</span>;
  }

  <span class="pl-c"><span class="pl-c">//</span> Summary</span>
  std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>Received <span class="pl-pds">"</span></span> &lt;&lt; req.<span class="pl-smi">form</span>.<span class="pl-smi">fields</span>.<span class="pl-c1">size</span>() &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span> text fields and <span class="pl-pds">"</span></span>
            &lt;&lt; req.<span class="pl-smi">form</span>.<span class="pl-smi">files</span>.<span class="pl-c1">size</span>() &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span> files<span class="pl-pds">"</span></span> &lt;&lt; std::endl;

  res.<span class="pl-c1">set_content</span>(<span class="pl-s"><span class="pl-pds">"</span>Upload successful<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);
});</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Receive content with a content receiver</h3><a id="user-content-receive-content-with-a-content-receiver" class="anchor" aria-label="Permalink: Receive content with a content receiver" href="#receive-content-with-a-content-receiver"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.Post(&quot;/content_receiver&quot;,
  [&amp;](const Request &amp;req, Response &amp;res, const ContentReader &amp;content_reader) {
    if (req.is_multipart_form_data()) {
      // NOTE: `content_reader` is blocking until every form data field is read
      // This approach allows streaming processing of large files
      std::vector&lt;FormData&gt; items;
      content_reader(
        [&amp;](const FormData &amp;item) {
          items.push_back(item);
          return true;
        },
        [&amp;](const char *data, size_t data_length) {
          items.back().content.append(data, data_length);
          return true;
        });

      // Process the received items
      for (const auto&amp; item : items) {
        if (item.filename.empty()) {
          // Text field
          std::cout &lt;&lt; &quot;Field: &quot; &lt;&lt; item.name &lt;&lt; &quot; = &quot; &lt;&lt; item.content &lt;&lt; std::endl;
        } else {
          // File
          std::cout &lt;&lt; &quot;File: &quot; &lt;&lt; item.name &lt;&lt; &quot; (&quot; &lt;&lt; item.filename &lt;&lt; &quot;) - &quot;
                    &lt;&lt; item.content.size() &lt;&lt; &quot; bytes&quot; &lt;&lt; std::endl;
        }
      }
    } else {
      std::string body;
      content_reader([&amp;](const char *data, size_t data_length) {
        body.append(data, data_length);
        return true;
      });
    }
  });"><pre>svr.Post(<span class="pl-s"><span class="pl-pds">"</span>/content_receiver<span class="pl-pds">"</span></span>,
  [&amp;](<span class="pl-k">const</span> Request &amp;req, Response &amp;res, <span class="pl-k">const</span> ContentReader &amp;content_reader) {
    <span class="pl-k">if</span> (req.<span class="pl-c1">is_multipart_form_data</span>()) {
      <span class="pl-c"><span class="pl-c">//</span> NOTE: `content_reader` is blocking until every form data field is read</span>
      <span class="pl-c"><span class="pl-c">//</span> This approach allows streaming processing of large files</span>
      std::vector&lt;FormData&gt; items;
      <span class="pl-c1">content_reader</span>(
        [&amp;](<span class="pl-k">const</span> FormData &amp;item) {
          items.<span class="pl-c1">push_back</span>(item);
          <span class="pl-k">return</span> <span class="pl-c1">true</span>;
        },
        [&amp;](<span class="pl-k">const</span> <span class="pl-k">char</span> *data, <span class="pl-c1">size_t</span> data_length) {
          items.<span class="pl-c1">back</span>().<span class="pl-smi">content</span>.<span class="pl-c1">append</span>(data, data_length);
          <span class="pl-k">return</span> <span class="pl-c1">true</span>;
        });

      <span class="pl-c"><span class="pl-c">//</span> Process the received items</span>
      <span class="pl-k">for</span> (<span class="pl-k">const</span> <span class="pl-k">auto</span>&amp; item : items) {
        <span class="pl-k">if</span> (item.<span class="pl-smi">filename</span>.<span class="pl-c1">empty</span>()) {
          <span class="pl-c"><span class="pl-c">//</span> Text field</span>
          std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>Field: <span class="pl-pds">"</span></span> &lt;&lt; item.<span class="pl-smi">name</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span> = <span class="pl-pds">"</span></span> &lt;&lt; item.<span class="pl-smi">content</span> &lt;&lt; std::endl;
        } <span class="pl-k">else</span> {
          <span class="pl-c"><span class="pl-c">//</span> File</span>
          std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>File: <span class="pl-pds">"</span></span> &lt;&lt; item.<span class="pl-smi">name</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span> (<span class="pl-pds">"</span></span> &lt;&lt; item.<span class="pl-smi">filename</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>) - <span class="pl-pds">"</span></span>
                    &lt;&lt; item.<span class="pl-smi">content</span>.<span class="pl-c1">size</span>() &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span> bytes<span class="pl-pds">"</span></span> &lt;&lt; std::endl;
        }
      }
    } <span class="pl-k">else</span> {
      std::string body;
      <span class="pl-c1">content_reader</span>([&amp;](<span class="pl-k">const</span> <span class="pl-k">char</span> *data, <span class="pl-c1">size_t</span> data_length) {
        body.<span class="pl-c1">append</span>(data, data_length);
        <span class="pl-k">return</span> <span class="pl-c1">true</span>;
      });
    }
  });</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Send content with the content provider</h3><a id="user-content-send-content-with-the-content-provider" class="anchor" aria-label="Permalink: Send content with the content provider" href="#send-content-with-the-content-provider"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="const size_t DATA_CHUNK_SIZE = 4;

svr.Get(&quot;/stream&quot;, [&amp;](const Request &amp;req, Response &amp;res) {
  auto data = new std::string(&quot;abcdefg&quot;);

  res.set_content_provider(
    data-&gt;size(), // Content length
    &quot;text/plain&quot;, // Content type
    [&amp;, data](size_t offset, size_t length, DataSink &amp;sink) {
      const auto &amp;d = *data;
      sink.write(&amp;d[offset], std::min(length, DATA_CHUNK_SIZE));
      return true; // return 'false' if you want to cancel the process.
    },
    [data](bool success) { delete data; });
});"><pre><span class="pl-k">const</span> <span class="pl-c1">size_t</span> DATA_CHUNK_SIZE = <span class="pl-c1">4</span>;

svr.Get(<span class="pl-s"><span class="pl-pds">"</span>/stream<span class="pl-pds">"</span></span>, [&amp;](<span class="pl-k">const</span> Request &amp;req, Response &amp;res) {
  <span class="pl-k">auto</span> data = <span class="pl-k">new</span> <span class="pl-c1">std::string</span>(<span class="pl-s"><span class="pl-pds">"</span>abcdefg<span class="pl-pds">"</span></span>);

  res.<span class="pl-c1">set_content_provider</span>(
    data-&gt;<span class="pl-c1">size</span>(), <span class="pl-c"><span class="pl-c">//</span> Content length</span>
    <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>, <span class="pl-c"><span class="pl-c">//</span> Content type</span>
    [&amp;, data](<span class="pl-c1">size_t</span> offset, <span class="pl-c1">size_t</span> length, DataSink &amp;sink) {
      <span class="pl-k">const</span> <span class="pl-k">auto</span> &amp;d = *data;
      sink.<span class="pl-c1">write</span>(&amp;d[offset], <span class="pl-c1">std::min</span>(length, DATA_CHUNK_SIZE));
      <span class="pl-k">return</span> <span class="pl-c1">true</span>; <span class="pl-c"><span class="pl-c">//</span> return 'false' if you want to cancel the process.</span>
    },
    [data](<span class="pl-k">bool</span> success) { <span class="pl-k">delete</span> data; });
});</pre></div>
<p dir="auto">Without content length:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.Get(&quot;/stream&quot;, [&amp;](const Request &amp;req, Response &amp;res) {
  res.set_content_provider(
    &quot;text/plain&quot;, // Content type
    [&amp;](size_t offset, DataSink &amp;sink) {
      if (/* there is still data */) {
        std::vector&lt;char&gt; data;
        // prepare data...
        sink.write(data.data(), data.size());
      } else {
        sink.done(); // No more data
      }
      return true; // return 'false' if you want to cancel the process.
    });
});"><pre>svr.Get(<span class="pl-s"><span class="pl-pds">"</span>/stream<span class="pl-pds">"</span></span>, [&amp;](<span class="pl-k">const</span> Request &amp;req, Response &amp;res) {
  res.<span class="pl-c1">set_content_provider</span>(
    <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>, <span class="pl-c"><span class="pl-c">//</span> Content type</span>
    [&amp;](<span class="pl-c1">size_t</span> offset, DataSink &amp;sink) {
      <span class="pl-k">if</span> (<span class="pl-c"><span class="pl-c">/*</span> there is still data <span class="pl-c">*/</span></span>) {
        std::vector&lt;<span class="pl-k">char</span>&gt; data;
        <span class="pl-c"><span class="pl-c">//</span> prepare data...</span>
        sink.<span class="pl-c1">write</span>(data.<span class="pl-c1">data</span>(), data.<span class="pl-c1">size</span>());
      } <span class="pl-k">else</span> {
        sink.<span class="pl-c1">done</span>(); <span class="pl-c"><span class="pl-c">//</span> No more data</span>
      }
      <span class="pl-k">return</span> <span class="pl-c1">true</span>; <span class="pl-c"><span class="pl-c">//</span> return 'false' if you want to cancel the process.</span>
    });
});</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Chunked transfer encoding</h3><a id="user-content-chunked-transfer-encoding" class="anchor" aria-label="Permalink: Chunked transfer encoding" href="#chunked-transfer-encoding"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.Get(&quot;/chunked&quot;, [&amp;](const Request&amp; req, Response&amp; res) {
  res.set_chunked_content_provider(
    &quot;text/plain&quot;,
    [](size_t offset, DataSink &amp;sink) {
      sink.write(&quot;123&quot;, 3);
      sink.write(&quot;345&quot;, 3);
      sink.write(&quot;789&quot;, 3);
      sink.done(); // No more data
      return true; // return 'false' if you want to cancel the process.
    }
  );
});"><pre>svr.Get(<span class="pl-s"><span class="pl-pds">"</span>/chunked<span class="pl-pds">"</span></span>, [&amp;](<span class="pl-k">const</span> Request&amp; req, Response&amp; res) {
  res.<span class="pl-c1">set_chunked_content_provider</span>(
    <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>,
    [](<span class="pl-c1">size_t</span> offset, DataSink &amp;sink) {
      sink.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">"</span>123<span class="pl-pds">"</span></span>, <span class="pl-c1">3</span>);
      sink.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">"</span>345<span class="pl-pds">"</span></span>, <span class="pl-c1">3</span>);
      sink.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">"</span>789<span class="pl-pds">"</span></span>, <span class="pl-c1">3</span>);
      sink.<span class="pl-c1">done</span>(); <span class="pl-c"><span class="pl-c">//</span> No more data</span>
      <span class="pl-k">return</span> <span class="pl-c1">true</span>; <span class="pl-c"><span class="pl-c">//</span> return 'false' if you want to cancel the process.</span>
    }
  );
});</pre></div>
<p dir="auto">With trailer:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.Get(&quot;/chunked&quot;, [&amp;](const Request&amp; req, Response&amp; res) {
  res.set_header(&quot;Trailer&quot;, &quot;Dummy1, Dummy2&quot;);
  res.set_chunked_content_provider(
    &quot;text/plain&quot;,
    [](size_t offset, DataSink &amp;sink) {
      sink.write(&quot;123&quot;, 3);
      sink.write(&quot;345&quot;, 3);
      sink.write(&quot;789&quot;, 3);
      sink.done_with_trailer({
        {&quot;Dummy1&quot;, &quot;DummyVal1&quot;},
        {&quot;Dummy2&quot;, &quot;DummyVal2&quot;}
      });
      return true;
    }
  );
});"><pre>svr.Get(<span class="pl-s"><span class="pl-pds">"</span>/chunked<span class="pl-pds">"</span></span>, [&amp;](<span class="pl-k">const</span> Request&amp; req, Response&amp; res) {
  res.<span class="pl-c1">set_header</span>(<span class="pl-s"><span class="pl-pds">"</span>Trailer<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Dummy1, Dummy2<span class="pl-pds">"</span></span>);
  res.<span class="pl-c1">set_chunked_content_provider</span>(
    <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>,
    [](<span class="pl-c1">size_t</span> offset, DataSink &amp;sink) {
      sink.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">"</span>123<span class="pl-pds">"</span></span>, <span class="pl-c1">3</span>);
      sink.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">"</span>345<span class="pl-pds">"</span></span>, <span class="pl-c1">3</span>);
      sink.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">"</span>789<span class="pl-pds">"</span></span>, <span class="pl-c1">3</span>);
      sink.<span class="pl-c1">done_with_trailer</span>({
        {<span class="pl-s"><span class="pl-pds">"</span>Dummy1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>DummyVal1<span class="pl-pds">"</span></span>},
        {<span class="pl-s"><span class="pl-pds">"</span>Dummy2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>DummyVal2<span class="pl-pds">"</span></span>}
      });
      <span class="pl-k">return</span> <span class="pl-c1">true</span>;
    }
  );
});</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Send file content</h3><a id="user-content-send-file-content" class="anchor" aria-label="Permalink: Send file content" href="#send-file-content"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.Get(&quot;/content&quot;, [&amp;](const Request &amp;req, Response &amp;res) {
  res.set_file_content(&quot;./path/to/content.html&quot;);
});

svr.Get(&quot;/content&quot;, [&amp;](const Request &amp;req, Response &amp;res) {
  res.set_file_content(&quot;./path/to/content&quot;, &quot;text/html&quot;);
});"><pre>svr.Get(<span class="pl-s"><span class="pl-pds">"</span>/content<span class="pl-pds">"</span></span>, [&amp;](<span class="pl-k">const</span> Request &amp;req, Response &amp;res) {
  res.<span class="pl-c1">set_file_content</span>(<span class="pl-s"><span class="pl-pds">"</span>./path/to/content.html<span class="pl-pds">"</span></span>);
});

svr.Get(<span class="pl-s"><span class="pl-pds">"</span>/content<span class="pl-pds">"</span></span>, [&amp;](<span class="pl-k">const</span> Request &amp;req, Response &amp;res) {
  res.<span class="pl-c1">set_file_content</span>(<span class="pl-s"><span class="pl-pds">"</span>./path/to/content<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/html<span class="pl-pds">"</span></span>);
});</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">'Expect: 100-continue' handler</h3><a id="user-content-expect-100-continue-handler" class="anchor" aria-label="Permalink: 'Expect: 100-continue' handler" href="#expect-100-continue-handler"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">By default, the server sends a <code>100 Continue</code> response for an <code>Expect: 100-continue</code> header.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Send a '417 Expectation Failed' response.
svr.set_expect_100_continue_handler([](const Request &amp;req, Response &amp;res) {
  return StatusCode::ExpectationFailed_417;
});"><pre><span class="pl-c"><span class="pl-c">//</span> Send a '417 Expectation Failed' response.</span>
svr.set_expect_100_continue_handler([](<span class="pl-k">const</span> Request &amp;req, Response &amp;res) {
  <span class="pl-k">return</span> StatusCode::ExpectationFailed_417;
});</pre></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Send a final status without reading the message body.
svr.set_expect_100_continue_handler([](const Request &amp;req, Response &amp;res) {
  return res.status = StatusCode::Unauthorized_401;
});"><pre><span class="pl-c"><span class="pl-c">//</span> Send a final status without reading the message body.</span>
svr.set_expect_100_continue_handler([](<span class="pl-k">const</span> Request &amp;req, Response &amp;res) {
  <span class="pl-k">return</span> res.<span class="pl-smi">status</span> = StatusCode::Unauthorized_401;
});</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Keep-Alive connection</h3><a id="user-content-keep-alive-connection" class="anchor" aria-label="Permalink: Keep-Alive connection" href="#keep-alive-connection"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.set_keep_alive_max_count(2); // Default is 100
svr.set_keep_alive_timeout(10);  // Default is 5"><pre>svr.set_keep_alive_max_count(<span class="pl-c1">2</span>); <span class="pl-c"><span class="pl-c">//</span> Default is 100</span>
svr.set_keep_alive_timeout(<span class="pl-c1">10</span>);  <span class="pl-c"><span class="pl-c">//</span> Default is 5</span></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Timeout</h3><a id="user-content-timeout" class="anchor" aria-label="Permalink: Timeout" href="#timeout"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.set_read_timeout(5, 0); // 5 seconds
svr.set_write_timeout(5, 0); // 5 seconds
svr.set_idle_interval(0, 100000); // 100 milliseconds"><pre>svr.set_read_timeout(<span class="pl-c1">5</span>, <span class="pl-c1">0</span>); <span class="pl-c"><span class="pl-c">//</span> 5 seconds</span>
svr.set_write_timeout(<span class="pl-c1">5</span>, <span class="pl-c1">0</span>); <span class="pl-c"><span class="pl-c">//</span> 5 seconds</span>
svr.set_idle_interval(<span class="pl-c1">0</span>, <span class="pl-c1">100000</span>); <span class="pl-c"><span class="pl-c">//</span> 100 milliseconds</span></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Set maximum payload length for reading a request body</h3><a id="user-content-set-maximum-payload-length-for-reading-a-request-body" class="anchor" aria-label="Permalink: Set maximum payload length for reading a request body" href="#set-maximum-payload-length-for-reading-a-request-body"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.set_payload_max_length(1024 * 1024 * 512); // 512MB"><pre>svr.set_payload_max_length(<span class="pl-c1">1024</span> * <span class="pl-c1">1024</span> * <span class="pl-c1">512</span>); <span class="pl-c"><span class="pl-c">//</span> 512MB</span></pre></div>
<div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">When the request body content type is 'www-form-urlencoded', the actual payload length shouldn't exceed <code>CPPHTTPLIB_FORM_URL_ENCODED_PAYLOAD_MAX_LENGTH</code>.</p>
</div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Server-Sent Events</h3><a id="user-content-server-sent-events" class="anchor" aria-label="Permalink: Server-Sent Events" href="#server-sent-events"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Please see <a href="https://github.com/yhirose/cpp-httplib/blob/master/example/ssesvr.cc">Server example</a> and <a href="https://github.com/yhirose/cpp-httplib/blob/master/example/ssecli.cc">Client example</a>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Default thread pool support</h3><a id="user-content-default-thread-pool-support" class="anchor" aria-label="Permalink: Default thread pool support" href="#default-thread-pool-support"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>ThreadPool</code> is used as the <strong>default</strong> task queue, with a default thread count of 8 or <code>std::thread::hardware_concurrency() - 1</code>, whichever is greater. You can change it with <code>CPPHTTPLIB_THREAD_POOL_COUNT</code>.</p>
<p dir="auto">If you want to set the thread count at runtime, there is no convenient way... But here is how.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.new_task_queue = [] { return new ThreadPool(12); };"><pre>svr.new_task_queue = [] { <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-c1">ThreadPool</span>(<span class="pl-c1">12</span>); };</pre></div>
<p dir="auto">You can also provide an optional parameter to limit the maximum number
of pending requests, i.e. requests <code>accept()</code>ed by the listener but
still waiting to be serviced by worker threads.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="svr.new_task_queue = [] { return new ThreadPool(/*num_threads=*/12, /*max_queued_requests=*/18); };"><pre>svr.new_task_queue = [] { <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-c1">ThreadPool</span>(<span class="pl-c"><span class="pl-c">/*</span>num_threads=<span class="pl-c">*/</span></span><span class="pl-c1">12</span>, <span class="pl-c"><span class="pl-c">/*</span>max_queued_requests=<span class="pl-c">*/</span></span><span class="pl-c1">18</span>); };</pre></div>
<p dir="auto">Default limit is 0 (unlimited). Once the limit is reached, the listener
will shutdown the client connection.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Override the default thread pool with yours</h3><a id="user-content-override-the-default-thread-pool-with-yours" class="anchor" aria-label="Permalink: Override the default thread pool with yours" href="#override-the-default-thread-pool-with-yours"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can supply your own thread pool implementation according to your need.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class YourThreadPoolTaskQueue : public TaskQueue {
public:
  YourThreadPoolTaskQueue(size_t n) {
    pool_.start_with_thread_count(n);
  }

  virtual bool enqueue(std::function&lt;void()&gt; fn) override {
    /* Return true if the task was actually enqueued, or false
     * if the caller must drop the corresponding connection. */
    return pool_.enqueue(fn);
  }

  virtual void shutdown() override {
    pool_.shutdown_gracefully();
  }

private:
  YourThreadPool pool_;
};

svr.new_task_queue = [] {
  return new YourThreadPoolTaskQueue(12);
};"><pre><span class="pl-k">class</span> <span class="pl-en">YourThreadPoolTaskQueue</span> : <span class="pl-k">public</span> <span class="pl-en">TaskQueue</span> {
<span class="pl-k">public:</span>
  <span class="pl-en">YourThreadPoolTaskQueue</span>(<span class="pl-c1">size_t</span> n) {
    pool_.<span class="pl-c1">start_with_thread_count</span>(n);
  }

  <span class="pl-k">virtual</span> <span class="pl-k">bool</span> <span class="pl-en">enqueue</span>(std::function&lt;<span class="pl-k">void</span>()&gt; fn) <span class="pl-k">override</span> {
    <span class="pl-c"><span class="pl-c">/*</span> Return true if the task was actually enqueued, or false</span>
<span class="pl-c">     * if the caller must drop the corresponding connection. <span class="pl-c">*/</span></span>
    <span class="pl-k">return</span> pool_.<span class="pl-c1">enqueue</span>(fn);
  }

  <span class="pl-k">virtual</span> <span class="pl-k">void</span> <span class="pl-en">shutdown</span>() <span class="pl-k">override</span> {
    pool_.<span class="pl-c1">shutdown_gracefully</span>();
  }

<span class="pl-k">private:</span>
  YourThreadPool pool_;
};

svr.new_task_queue = [] {
  <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-c1">YourThreadPoolTaskQueue</span>(<span class="pl-c1">12</span>);
};</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Client</h2><a id="user-content-client-1" class="anchor" aria-label="Permalink: Client" href="#client-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#include &lt;httplib.h&gt;
#include &lt;iostream&gt;

int main(void)
{
  httplib::Client cli(&quot;localhost&quot;, 1234);

  if (auto res = cli.Get(&quot;/hi&quot;)) {
    if (res-&gt;status == StatusCode::OK_200) {
      std::cout &lt;&lt; res-&gt;body &lt;&lt; std::endl;
    }
  } else {
    auto err = res.error();
    std::cout &lt;&lt; &quot;HTTP error: &quot; &lt;&lt; httplib::to_string(err) &lt;&lt; std::endl;
  }
}"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>httplib.h<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>iostream<span class="pl-pds">&gt;</span></span>

<span class="pl-k">int</span> <span class="pl-en">main</span>(<span class="pl-k">void</span>)
{
  httplib::Client <span class="pl-smi">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">1234</span>);

  <span class="pl-k">if</span> (<span class="pl-k">auto</span> res = cli.<span class="pl-c1">Get</span>(<span class="pl-s"><span class="pl-pds">"</span>/hi<span class="pl-pds">"</span></span>)) {
    <span class="pl-k">if</span> (res-&gt;<span class="pl-smi">status</span> == StatusCode::OK_200) {
      std::cout &lt;&lt; res-&gt;<span class="pl-smi">body</span> &lt;&lt; std::endl;
    }
  } <span class="pl-k">else</span> {
    <span class="pl-k">auto</span> err = res.<span class="pl-c1">error</span>();
    std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>HTTP error: <span class="pl-pds">"</span></span> &lt;&lt; <span class="pl-c1">httplib::to_string</span>(err) &lt;&lt; std::endl;
  }
}</pre></div>
<div class="markdown-alert markdown-alert-tip" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-light-bulb mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</p><p dir="auto">Constructor with scheme-host-port string is now supported!</p>
</div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="httplib::Client cli(&quot;localhost&quot;);
httplib::Client cli(&quot;localhost:8080&quot;);
httplib::Client cli(&quot;http://localhost&quot;);
httplib::Client cli(&quot;http://localhost:8080&quot;);
httplib::Client cli(&quot;https://localhost&quot;);
httplib::SSLClient cli(&quot;localhost&quot;);"><pre>httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>);
httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost:8080<span class="pl-pds">"</span></span>);
httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>http://localhost<span class="pl-pds">"</span></span>);
httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>http://localhost:8080<span class="pl-pds">"</span></span>);
httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>https://localhost<span class="pl-pds">"</span></span>);
httplib::SSLClient <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Error code</h3><a id="user-content-error-code" class="anchor" aria-label="Permalink: Error code" href="#error-code"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Here is the list of errors from <code>Result::error()</code>.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="enum Error {
  Success = 0,
  Unknown,
  Connection,
  BindIPAddress,
  Read,
  Write,
  ExceedRedirectCount,
  Canceled,
  SSLConnection,
  SSLLoadingCerts,
  SSLServerVerification,
  SSLServerHostnameVerification,
  UnsupportedMultipartBoundaryChars,
  Compression,
  ConnectionTimeout,
  ProxyConnection,
};"><pre><span class="pl-k">enum</span> Error {
  Success = <span class="pl-c1">0</span>,
  Unknown,
  Connection,
  BindIPAddress,
  Read,
  Write,
  ExceedRedirectCount,
  Canceled,
  SSLConnection,
  SSLLoadingCerts,
  SSLServerVerification,
  SSLServerHostnameVerification,
  UnsupportedMultipartBoundaryChars,
  Compression,
  ConnectionTimeout,
  ProxyConnection,
};</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">GET with HTTP headers</h3><a id="user-content-get-with-http-headers" class="anchor" aria-label="Permalink: GET with HTTP headers" href="#get-with-http-headers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="httplib::Headers headers = {
  { &quot;Hello&quot;, &quot;World!&quot; }
};
auto res = cli.Get(&quot;/hi&quot;, headers);"><pre>httplib::Headers headers = {
  { <span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>World!<span class="pl-pds">"</span></span> }
};
<span class="pl-k">auto</span> res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/hi<span class="pl-pds">"</span></span>, headers);</pre></div>
<p dir="auto">or</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="auto res = cli.Get(&quot;/hi&quot;, {{&quot;Hello&quot;, &quot;World!&quot;}});"><pre><span class="pl-k">auto</span> res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/hi<span class="pl-pds">"</span></span>, {{<span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>World!<span class="pl-pds">"</span></span>}});</pre></div>
<p dir="auto">or</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cli.set_default_headers({
  { &quot;Hello&quot;, &quot;World!&quot; }
});
auto res = cli.Get(&quot;/hi&quot;);"><pre>cli.set_default_headers({
  { <span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>World!<span class="pl-pds">"</span></span> }
});
<span class="pl-k">auto</span> res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/hi<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">POST</h3><a id="user-content-post" class="anchor" aria-label="Permalink: POST" href="#post"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="res = cli.Post(&quot;/post&quot;, &quot;text&quot;, &quot;text/plain&quot;);
res = cli.Post(&quot;/person&quot;, &quot;name=john1&amp;note=coder&quot;, &quot;application/x-www-form-urlencoded&quot;);"><pre>res = cli.Post(<span class="pl-s"><span class="pl-pds">"</span>/post<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);
res = cli.Post(<span class="pl-s"><span class="pl-pds">"</span>/person<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>name=john1&amp;note=coder<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>application/x-www-form-urlencoded<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">POST with parameters</h3><a id="user-content-post-with-parameters" class="anchor" aria-label="Permalink: POST with parameters" href="#post-with-parameters"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="httplib::Params params;
params.emplace(&quot;name&quot;, &quot;john&quot;);
params.emplace(&quot;note&quot;, &quot;coder&quot;);

auto res = cli.Post(&quot;/post&quot;, params);"><pre>httplib::Params params;
params.emplace(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>john<span class="pl-pds">"</span></span>);
params.emplace(<span class="pl-s"><span class="pl-pds">"</span>note<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>coder<span class="pl-pds">"</span></span>);

<span class="pl-k">auto</span> res = cli.Post(<span class="pl-s"><span class="pl-pds">"</span>/post<span class="pl-pds">"</span></span>, params);</pre></div>
<p dir="auto">or</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="httplib::Params params{
  { &quot;name&quot;, &quot;john&quot; },
  { &quot;note&quot;, &quot;coder&quot; }
};

auto res = cli.Post(&quot;/post&quot;, params);"><pre>httplib::Params params{
  { <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>john<span class="pl-pds">"</span></span> },
  { <span class="pl-s"><span class="pl-pds">"</span>note<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>coder<span class="pl-pds">"</span></span> }
};

<span class="pl-k">auto</span> res = cli.Post(<span class="pl-s"><span class="pl-pds">"</span>/post<span class="pl-pds">"</span></span>, params);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">POST with Multipart Form Data</h3><a id="user-content-post-with-multipart-form-data" class="anchor" aria-label="Permalink: POST with Multipart Form Data" href="#post-with-multipart-form-data"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="httplib::UploadFormDataItems items = {
  { &quot;text1&quot;, &quot;text default&quot;, &quot;&quot;, &quot;&quot; },
  { &quot;text2&quot;, &quot;ab&quot;, &quot;&quot;, &quot;&quot; },
  { &quot;file1&quot;, &quot;h\ne\n\nl\nl\no\n&quot;, &quot;hello.txt&quot;, &quot;text/plain&quot; },
  { &quot;file2&quot;, &quot;{\n  \&quot;world\&quot;, true\n}\n&quot;, &quot;world.json&quot;, &quot;application/json&quot; },
  { &quot;file3&quot;, &quot;&quot;, &quot;&quot;, &quot;application/octet-stream&quot; },
};

auto res = cli.Post(&quot;/multipart&quot;, items);"><pre>httplib::UploadFormDataItems items = {
  { <span class="pl-s"><span class="pl-pds">"</span>text1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text default<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> },
  { <span class="pl-s"><span class="pl-pds">"</span>text2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>ab<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> },
  { <span class="pl-s"><span class="pl-pds">"</span>file1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>h<span class="pl-cce">\n</span>e<span class="pl-cce">\n\n</span>l<span class="pl-cce">\n</span>l<span class="pl-cce">\n</span>o<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>hello.txt<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span> },
  { <span class="pl-s"><span class="pl-pds">"</span>file2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>{<span class="pl-cce">\n</span>  <span class="pl-cce">\"</span>world<span class="pl-cce">\"</span>, true<span class="pl-cce">\n</span>}<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>world.json<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span> },
  { <span class="pl-s"><span class="pl-pds">"</span>file3<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>application/octet-stream<span class="pl-pds">"</span></span> },
};

<span class="pl-k">auto</span> res = cli.Post(<span class="pl-s"><span class="pl-pds">"</span>/multipart<span class="pl-pds">"</span></span>, items);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">PUT</h3><a id="user-content-put" class="anchor" aria-label="Permalink: PUT" href="#put"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="res = cli.Put(&quot;/resource/foo&quot;, &quot;text&quot;, &quot;text/plain&quot;);"><pre>res = cli.Put(<span class="pl-s"><span class="pl-pds">"</span>/resource/foo<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">DELETE</h3><a id="user-content-delete" class="anchor" aria-label="Permalink: DELETE" href="#delete"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="res = cli.Delete(&quot;/resource/foo&quot;);"><pre>res = cli.Delete(<span class="pl-s"><span class="pl-pds">"</span>/resource/foo<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">OPTIONS</h3><a id="user-content-options" class="anchor" aria-label="Permalink: OPTIONS" href="#options"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="res = cli.Options(&quot;*&quot;);
res = cli.Options(&quot;/resource/foo&quot;);"><pre>res = cli.Options(<span class="pl-s"><span class="pl-pds">"</span>*<span class="pl-pds">"</span></span>);
res = cli.Options(<span class="pl-s"><span class="pl-pds">"</span>/resource/foo<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Timeout</h3><a id="user-content-timeout-1" class="anchor" aria-label="Permalink: Timeout" href="#timeout-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cli.set_connection_timeout(0, 300000); // 300 milliseconds
cli.set_read_timeout(5, 0); // 5 seconds
cli.set_write_timeout(5, 0); // 5 seconds

// This method works the same as curl's `--max-time` option
cli.set_max_timeout(5000); // 5 seconds"><pre>cli.set_connection_timeout(<span class="pl-c1">0</span>, <span class="pl-c1">300000</span>); <span class="pl-c"><span class="pl-c">//</span> 300 milliseconds</span>
cli.set_read_timeout(<span class="pl-c1">5</span>, <span class="pl-c1">0</span>); <span class="pl-c"><span class="pl-c">//</span> 5 seconds</span>
cli.set_write_timeout(<span class="pl-c1">5</span>, <span class="pl-c1">0</span>); <span class="pl-c"><span class="pl-c">//</span> 5 seconds</span>

<span class="pl-c"><span class="pl-c">//</span> This method works the same as curl's `--max-time` option</span>
cli.set_max_timeout(<span class="pl-c1">5000</span>); <span class="pl-c"><span class="pl-c">//</span> 5 seconds</span></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Receive content with a content receiver</h3><a id="user-content-receive-content-with-a-content-receiver-1" class="anchor" aria-label="Permalink: Receive content with a content receiver" href="#receive-content-with-a-content-receiver-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="std::string body;

auto res = cli.Get(&quot;/large-data&quot;,
  [&amp;](const char *data, size_t data_length) {
    body.append(data, data_length);
    return true;
  });"><pre>std::string body;

<span class="pl-k">auto</span> res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/large-data<span class="pl-pds">"</span></span>,
  [&amp;](<span class="pl-k">const</span> <span class="pl-k">char</span> *data, <span class="pl-c1">size_t</span> data_length) {
    body.<span class="pl-c1">append</span>(data, data_length);
    <span class="pl-k">return</span> <span class="pl-c1">true</span>;
  });</pre></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="std::string body;

auto res = cli.Get(
  &quot;/stream&quot;, Headers(),
  [&amp;](const Response &amp;response) {
    EXPECT_EQ(StatusCode::OK_200, response.status);
    return true; // return 'false' if you want to cancel the request.
  },
  [&amp;](const char *data, size_t data_length) {
    body.append(data, data_length);
    return true; // return 'false' if you want to cancel the request.
  });"><pre>std::string body;

<span class="pl-k">auto</span> res = cli.Get(
  <span class="pl-s"><span class="pl-pds">"</span>/stream<span class="pl-pds">"</span></span>, Headers(),
  [&amp;](<span class="pl-k">const</span> Response &amp;response) {
    <span class="pl-c1">EXPECT_EQ</span>(StatusCode::OK_200, response.<span class="pl-smi">status</span>);
    <span class="pl-k">return</span> <span class="pl-c1">true</span>; <span class="pl-c"><span class="pl-c">//</span> return 'false' if you want to cancel the request.</span>
  },
  [&amp;](<span class="pl-k">const</span> <span class="pl-k">char</span> *data, <span class="pl-c1">size_t</span> data_length) {
    body.<span class="pl-c1">append</span>(data, data_length);
    <span class="pl-k">return</span> <span class="pl-c1">true</span>; <span class="pl-c"><span class="pl-c">//</span> return 'false' if you want to cancel the request.</span>
  });</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Send content with a content provider</h3><a id="user-content-send-content-with-a-content-provider" class="anchor" aria-label="Permalink: Send content with a content provider" href="#send-content-with-a-content-provider"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="std::string body = ...;

auto res = cli.Post(
  &quot;/stream&quot;, body.size(),
  [](size_t offset, size_t length, DataSink &amp;sink) {
    sink.write(body.data() + offset, length);
    return true; // return 'false' if you want to cancel the request.
  },
  &quot;text/plain&quot;);"><pre>std::string body = ...;

<span class="pl-k">auto</span> res = cli.Post(
  <span class="pl-s"><span class="pl-pds">"</span>/stream<span class="pl-pds">"</span></span>, body.size(),
  [](<span class="pl-c1">size_t</span> offset, <span class="pl-c1">size_t</span> length, DataSink &amp;sink) {
    sink.<span class="pl-c1">write</span>(body.<span class="pl-c1">data</span>() + offset, length);
    <span class="pl-k">return</span> <span class="pl-c1">true</span>; <span class="pl-c"><span class="pl-c">//</span> return 'false' if you want to cancel the request.</span>
  },
  <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Chunked transfer encoding</h3><a id="user-content-chunked-transfer-encoding-1" class="anchor" aria-label="Permalink: Chunked transfer encoding" href="#chunked-transfer-encoding-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="auto res = cli.Post(
  &quot;/stream&quot;,
  [](size_t offset, DataSink &amp;sink) {
    sink.os &lt;&lt; &quot;chunked data 1&quot;;
    sink.os &lt;&lt; &quot;chunked data 2&quot;;
    sink.os &lt;&lt; &quot;chunked data 3&quot;;
    sink.done();
    return true; // return 'false' if you want to cancel the request.
  },
  &quot;text/plain&quot;);"><pre><span class="pl-k">auto</span> res = cli.Post(
  <span class="pl-s"><span class="pl-pds">"</span>/stream<span class="pl-pds">"</span></span>,
  [](<span class="pl-c1">size_t</span> offset, DataSink &amp;sink) {
    sink.<span class="pl-smi">os</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>chunked data 1<span class="pl-pds">"</span></span>;
    sink.<span class="pl-smi">os</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>chunked data 2<span class="pl-pds">"</span></span>;
    sink.<span class="pl-smi">os</span> &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>chunked data 3<span class="pl-pds">"</span></span>;
    sink.<span class="pl-c1">done</span>();
    <span class="pl-k">return</span> <span class="pl-c1">true</span>; <span class="pl-c"><span class="pl-c">//</span> return 'false' if you want to cancel the request.</span>
  },
  <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">With Progress Callback</h3><a id="user-content-with-progress-callback" class="anchor" aria-label="Permalink: With Progress Callback" href="#with-progress-callback"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="httplib::Client cli(url, port);

// prints: 0 / 000 bytes =&gt; 50% complete
auto res = cli.Get(&quot;/&quot;, [](uint64_t len, uint64_t total) {
  printf(&quot;%lld / %lld bytes =&gt; %d%% complete\n&quot;,
    len, total,
    (int)(len*100/total));
  return true; // return 'false' if you want to cancel the request.
}
);"><pre>httplib::Client <span class="pl-en">cli</span>(url, port);

<span class="pl-c"><span class="pl-c">//</span> prints: 0 / 000 bytes =&gt; 50% complete</span>
<span class="pl-k">auto</span> res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>, [](<span class="pl-c1">uint64_t</span> len, <span class="pl-c1">uint64_t</span> total) {
  <span class="pl-c1">printf</span>(<span class="pl-s"><span class="pl-pds">"</span>%lld / %lld bytes =&gt; %d%% complete<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>,
    len, total,
    (<span class="pl-k">int</span>)(len*<span class="pl-c1">100</span>/total));
  <span class="pl-k">return</span> <span class="pl-c1">true</span>; <span class="pl-c"><span class="pl-c">//</span> return 'false' if you want to cancel the request.</span>
}
);</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/236374/33138910-495c4ecc-cf86-11e7-8693-2fc6d09615c4.gif"><img src="https://user-images.githubusercontent.com/236374/33138910-495c4ecc-cf86-11e7-8693-2fc6d09615c4.gif" alt="progress" data-animated-image="" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Authentication</h3><a id="user-content-authentication" class="anchor" aria-label="Permalink: Authentication" href="#authentication"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Basic Authentication
cli.set_basic_auth(&quot;user&quot;, &quot;pass&quot;);

// Digest Authentication
cli.set_digest_auth(&quot;user&quot;, &quot;pass&quot;);

// Bearer Token Authentication
cli.set_bearer_token_auth(&quot;token&quot;);"><pre><span class="pl-c"><span class="pl-c">//</span> Basic Authentication</span>
cli.set_basic_auth(<span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>pass<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Digest Authentication</span>
cli.set_digest_auth(<span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>pass<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Bearer Token Authentication</span>
cli.set_bearer_token_auth(<span class="pl-s"><span class="pl-pds">"</span>token<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">OpenSSL is required for Digest Authentication.</p>
</div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Proxy server support</h3><a id="user-content-proxy-server-support" class="anchor" aria-label="Permalink: Proxy server support" href="#proxy-server-support"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cli.set_proxy(&quot;host&quot;, port);

// Basic Authentication
cli.set_proxy_basic_auth(&quot;user&quot;, &quot;pass&quot;);

// Digest Authentication
cli.set_proxy_digest_auth(&quot;user&quot;, &quot;pass&quot;);

// Bearer Token Authentication
cli.set_proxy_bearer_token_auth(&quot;pass&quot;);"><pre>cli.set_proxy(<span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>, port);

<span class="pl-c"><span class="pl-c">//</span> Basic Authentication</span>
cli.set_proxy_basic_auth(<span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>pass<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Digest Authentication</span>
cli.set_proxy_digest_auth(<span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>pass<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Bearer Token Authentication</span>
cli.set_proxy_bearer_token_auth(<span class="pl-s"><span class="pl-pds">"</span>pass<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">OpenSSL is required for Digest Authentication.</p>
</div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Range</h3><a id="user-content-range" class="anchor" aria-label="Permalink: Range" href="#range"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="httplib::Client cli(&quot;httpbin.org&quot;);

auto res = cli.Get(&quot;/range/32&quot;, {
  httplib::make_range_header({{1, 10}}) // 'Range: bytes=1-10'
});
// res-&gt;status should be 206.
// res-&gt;body should be &quot;bcdefghijk&quot;."><pre>httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>httpbin.org<span class="pl-pds">"</span></span>);

<span class="pl-k">auto</span> res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/range/32<span class="pl-pds">"</span></span>, {
  <span class="pl-c1">httplib::make_range_header</span>({{<span class="pl-c1">1</span>, <span class="pl-c1">10</span>}}) <span class="pl-c"><span class="pl-c">//</span> 'Range: bytes=1-10'</span>
});
<span class="pl-c"><span class="pl-c">//</span> res-&gt;status should be 206.</span>
<span class="pl-c"><span class="pl-c">//</span> res-&gt;body should be "bcdefghijk".</span></pre></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="httplib::make_range_header({{1, 10}, {20, -1}})      // 'Range: bytes=1-10, 20-'
httplib::make_range_header({{100, 199}, {500, 599}}) // 'Range: bytes=100-199, 500-599'
httplib::make_range_header({{0, 0}, {-1, 1}})        // 'Range: bytes=0-0, -1'"><pre><span class="pl-en">httplib::make_range_header</span>({{<span class="pl-c1">1</span>, <span class="pl-c1">10</span>}, {<span class="pl-c1">20</span>, -<span class="pl-c1">1</span>}})      <span class="pl-c"><span class="pl-c">//</span> 'Range: bytes=1-10, 20-'</span>
httplib::make_range_header({{<span class="pl-c1">100</span>, <span class="pl-c1">199</span>}, {<span class="pl-c1">500</span>, <span class="pl-c1">599</span>}}) <span class="pl-c"><span class="pl-c">//</span> 'Range: bytes=100-199, 500-599'</span>
httplib::make_range_header({{<span class="pl-c1">0</span>, <span class="pl-c1">0</span>}, {-<span class="pl-c1">1</span>, <span class="pl-c1">1</span>}})        <span class="pl-c"><span class="pl-c">//</span> 'Range: bytes=0-0, -1'</span></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Keep-Alive connection</h3><a id="user-content-keep-alive-connection-1" class="anchor" aria-label="Permalink: Keep-Alive connection" href="#keep-alive-connection-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="httplib::Client cli(&quot;localhost&quot;, 1234);

cli.Get(&quot;/hello&quot;);         // with &quot;Connection: close&quot;

cli.set_keep_alive(true);
cli.Get(&quot;/world&quot;);

cli.set_keep_alive(false);
cli.Get(&quot;/last-request&quot;);  // with &quot;Connection: close&quot;"><pre>httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">1234</span>);

cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/hello<span class="pl-pds">"</span></span>);         <span class="pl-c"><span class="pl-c">//</span> with "Connection: close"</span>

cli.set_keep_alive(<span class="pl-c1">true</span>);
cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/world<span class="pl-pds">"</span></span>);

cli.set_keep_alive(<span class="pl-c1">false</span>);
cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/last-request<span class="pl-pds">"</span></span>);  <span class="pl-c"><span class="pl-c">//</span> with "Connection: close"</span></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Redirect</h3><a id="user-content-redirect" class="anchor" aria-label="Permalink: Redirect" href="#redirect"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="httplib::Client cli(&quot;yahoo.com&quot;);

auto res = cli.Get(&quot;/&quot;);
res-&gt;status; // 301

cli.set_follow_location(true);
res = cli.Get(&quot;/&quot;);
res-&gt;status; // 200"><pre>httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>yahoo.com<span class="pl-pds">"</span></span>);

<span class="pl-k">auto</span> res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>);
res-&gt;status; <span class="pl-c"><span class="pl-c">//</span> 301</span>

cli.set_follow_location(<span class="pl-c1">true</span>);
res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>);
res-&gt;status; <span class="pl-c"><span class="pl-c">//</span> 200</span></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Use a specific network interface</h3><a id="user-content-use-a-specific-network-interface" class="anchor" aria-label="Permalink: Use a specific network interface" href="#use-a-specific-network-interface"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">This feature is not available on Windows, yet.</p>
</div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cli.set_interface(&quot;eth0&quot;); // Interface name, IP address or host name"><pre>cli.set_interface(<span class="pl-s"><span class="pl-pds">"</span>eth0<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> Interface name, IP address or host name</span></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Automatic Path Encoding</h3><a id="user-content-automatic-path-encoding" class="anchor" aria-label="Permalink: Automatic Path Encoding" href="#automatic-path-encoding"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The client automatically encodes special characters in URL paths by default:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="httplib::Client cli(&quot;https://example.com&quot;);

// Automatic path encoding (default behavior)
cli.set_path_encode(true);
auto res = cli.Get(&quot;/path with spaces/file.txt&quot;); // Automatically encodes spaces

// Disable automatic path encoding
cli.set_path_encode(false);
auto res = cli.Get(&quot;/already%20encoded/path&quot;); // Use pre-encoded paths"><pre>httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>https://example.com<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Automatic path encoding (default behavior)</span>
cli.set_path_encode(<span class="pl-c1">true</span>);
<span class="pl-k">auto</span> res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/path with spaces/file.txt<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> Automatically encodes spaces</span>

<span class="pl-c"><span class="pl-c">//</span> Disable automatic path encoding</span>
cli.set_path_encode(<span class="pl-c1">false</span>);
<span class="pl-k">auto</span> res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/already%20encoded/path<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> Use pre-encoded paths</span></pre></div>
<ul dir="auto">
<li><code>set_path_encode(bool on)</code> - Controls automatic encoding of special characters in URL paths
<ul dir="auto">
<li><code>true</code> (default): Automatically encodes spaces, plus signs, newlines, and other special characters</li>
<li><code>false</code>: Sends paths as-is without encoding (useful for pre-encoded URLs)</li>
</ul>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Performance Note for Local Connections</h3><a id="user-content-performance-note-for-local-connections" class="anchor" aria-label="Permalink: Performance Note for Local Connections" href="#performance-note-for-local-connections"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-alert markdown-alert-warning" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-alert mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Warning</p><p dir="auto">On Windows systems with improperly configured IPv6 settings, using "localhost" as the hostname may cause significant connection delays (up to 2 seconds per request) due to DNS resolution issues. This affects both client and server operations. For better performance when connecting to local services, use "127.0.0.1" instead of "localhost".</p>
<p dir="auto">See: <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="572389131" data-permission-text="Title is private" data-url="https://github.com/yhirose/cpp-httplib/issues/366" data-hovercard-type="issue" data-hovercard-url="/yhirose/cpp-httplib/issues/366/hovercard?comment_id=593004264&amp;comment_type=issue_comment" href="https://github.com/yhirose/cpp-httplib/issues/366#issuecomment-593004264">#366 (comment)</a></p>
</div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// May be slower on Windows due to DNS resolution delays
httplib::Client cli(&quot;localhost&quot;, 8080);
httplib::Server svr;
svr.listen(&quot;localhost&quot;, 8080);

// Faster alternative for local connections
httplib::Client cli(&quot;127.0.0.1&quot;, 8080);
httplib::Server svr;
svr.listen(&quot;127.0.0.1&quot;, 8080);"><pre><span class="pl-c"><span class="pl-c">//</span> May be slower on Windows due to DNS resolution delays</span>
httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">8080</span>);
httplib::Server svr;
svr.listen(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">8080</span>);

<span class="pl-c"><span class="pl-c">//</span> Faster alternative for local connections</span>
httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, <span class="pl-c1">8080</span>);
httplib::Server svr;
svr.listen(<span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, <span class="pl-c1">8080</span>);</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Compression</h2><a id="user-content-compression" class="anchor" aria-label="Permalink: Compression" href="#compression"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The server can apply compression to the following MIME type contents:</p>
<ul dir="auto">
<li>all text types except text/event-stream</li>
<li>image/svg+xml</li>
<li>application/javascript</li>
<li>application/json</li>
<li>application/xml</li>
<li>application/protobuf</li>
<li>application/xhtml+xml</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Zlib Support</h3><a id="user-content-zlib-support" class="anchor" aria-label="Permalink: Zlib Support" href="#zlib-support"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">'gzip' compression is available with <code>CPPHTTPLIB_ZLIB_SUPPORT</code>. <code>libz</code> should be linked.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Brotli Support</h3><a id="user-content-brotli-support" class="anchor" aria-label="Permalink: Brotli Support" href="#brotli-support"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Brotli compression is available with <code>CPPHTTPLIB_BROTLI_SUPPORT</code>. Necessary libraries should be linked.
Please see <a href="https://github.com/google/brotli">https://github.com/google/brotli</a> for more detail.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Zstd Support</h3><a id="user-content-zstd-support" class="anchor" aria-label="Permalink: Zstd Support" href="#zstd-support"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Zstd compression is available with <code>CPPHTTPLIB_ZSTD_SUPPORT</code>. Necessary libraries should be linked.
Please see <a href="https://github.com/facebook/zstd">https://github.com/facebook/zstd</a> for more detail.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Default <code>Accept-Encoding</code> value</h3><a id="user-content-default-accept-encoding-value" class="anchor" aria-label="Permalink: Default Accept-Encoding value" href="#default-accept-encoding-value"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The default <code>Accept-Encoding</code> value contains all possible compression types. So, the following two examples are same.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="res = cli.Get(&quot;/resource/foo&quot;);
res = cli.Get(&quot;/resource/foo&quot;, {{&quot;Accept-Encoding&quot;, &quot;br, gzip, deflate, zstd&quot;}});"><pre>res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/resource/foo<span class="pl-pds">"</span></span>);
res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/resource/foo<span class="pl-pds">"</span></span>, {{<span class="pl-s"><span class="pl-pds">"</span>Accept-Encoding<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>br, gzip, deflate, zstd<span class="pl-pds">"</span></span>}});</pre></div>
<p dir="auto">If we don't want a response without compression, we have to set <code>Accept-Encoding</code> to an empty string. This behavior is similar to curl.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="res = cli.Get(&quot;/resource/foo&quot;, {{&quot;Accept-Encoding&quot;, &quot;&quot;}});"><pre>res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/resource/foo<span class="pl-pds">"</span></span>, {{<span class="pl-s"><span class="pl-pds">"</span>Accept-Encoding<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>}});</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Compress request body on client</h3><a id="user-content-compress-request-body-on-client" class="anchor" aria-label="Permalink: Compress request body on client" href="#compress-request-body-on-client"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cli.set_compress(true);
res = cli.Post(&quot;/resource/foo&quot;, &quot;...&quot;, &quot;text/plain&quot;);"><pre>cli.set_compress(<span class="pl-c1">true</span>);
res = cli.Post(<span class="pl-s"><span class="pl-pds">"</span>/resource/foo<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Compress response body on client</h3><a id="user-content-compress-response-body-on-client" class="anchor" aria-label="Permalink: Compress response body on client" href="#compress-response-body-on-client"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cli.set_decompress(false);
res = cli.Get(&quot;/resource/foo&quot;);
res-&gt;body; // Compressed data
"><pre>cli.set_decompress(<span class="pl-c1">false</span>);
res = cli.Get(<span class="pl-s"><span class="pl-pds">"</span>/resource/foo<span class="pl-pds">"</span></span>);
res-&gt;body; <span class="pl-c"><span class="pl-c">//</span> Compressed data</span>
</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Unix Domain Socket Support</h2><a id="user-content-unix-domain-socket-support" class="anchor" aria-label="Permalink: Unix Domain Socket Support" href="#unix-domain-socket-support"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Unix Domain Socket support is available on Linux and macOS.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Server
httplib::Server svr;
svr.set_address_family(AF_UNIX).listen(&quot;./my-socket.sock&quot;, 80);

// Client
httplib::Client cli(&quot;./my-socket.sock&quot;);
cli.set_address_family(AF_UNIX);"><pre><span class="pl-c"><span class="pl-c">//</span> Server</span>
httplib::Server svr;
svr.set_address_family(AF_UNIX).listen(<span class="pl-s"><span class="pl-pds">"</span>./my-socket.sock<span class="pl-pds">"</span></span>, <span class="pl-c1">80</span>);

<span class="pl-c"><span class="pl-c">//</span> Client</span>
httplib::Client <span class="pl-en">cli</span>(<span class="pl-s"><span class="pl-pds">"</span>./my-socket.sock<span class="pl-pds">"</span></span>);
cli.set_address_family(AF_UNIX);</pre></div>
<p dir="auto">"my-socket.sock" can be a relative path or an absolute path. Your application must have the appropriate permissions for the path. You can also use an abstract socket address on Linux. To use an abstract socket address, prepend a null byte ('\x00') to the path.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">URI Encoding/Decoding Utilities</h2><a id="user-content-uri-encodingdecoding-utilities" class="anchor" aria-label="Permalink: URI Encoding/Decoding Utilities" href="#uri-encodingdecoding-utilities"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">cpp-httplib provides utility functions for URI encoding and decoding:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#include &lt;httplib.h&gt;

std::string url = &quot;https://example.com/search?q=hello world&quot;;
std::string encoded = httplib::encode_uri(url);
std::string decoded = httplib::decode_uri(encoded);

std::string param = &quot;hello world&quot;;
std::string encoded_component = httplib::encode_uri_component(param);
std::string decoded_component = httplib::decode_uri_component(encoded_component);"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>httplib.h<span class="pl-pds">&gt;</span></span>

std::string url = <span class="pl-s"><span class="pl-pds">"</span>https://example.com/search?q=hello world<span class="pl-pds">"</span></span>;
std::string encoded = httplib::encode_uri(url);
std::string decoded = httplib::decode_uri(encoded);

std::string param = <span class="pl-s"><span class="pl-pds">"</span>hello world<span class="pl-pds">"</span></span>;
std::string encoded_component = httplib::encode_uri_component(param);
std::string decoded_component = httplib::decode_uri_component(encoded_component);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Functions</h3><a id="user-content-functions" class="anchor" aria-label="Permalink: Functions" href="#functions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><code>encode_uri(const std::string &amp;value)</code> - Encodes a full URI, preserving reserved characters like <code>://</code>, <code>?</code>, <code>&amp;</code>, <code>=</code></li>
<li><code>decode_uri(const std::string &amp;value)</code> - Decodes a URI-encoded string</li>
<li><code>encode_uri_component(const std::string &amp;value)</code> - Encodes a URI component (query parameter, path segment), encoding all reserved characters</li>
<li><code>decode_uri_component(const std::string &amp;value)</code> - Decodes a URI component</li>
</ul>
<p dir="auto">Use <code>encode_uri()</code> for full URLs and <code>encode_uri_component()</code> for individual query parameters or path segments.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Split httplib.h into .h and .cc</h2><a id="user-content-split-httplibh-into-h-and-cc" class="anchor" aria-label="Permalink: Split httplib.h into .h and .cc" href="#split-httplibh-into-h-and-cc"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ ./split.py -h
usage: split.py [-h] [-e EXTENSION] [-o OUT]

This script splits httplib.h into .h and .cc parts.

optional arguments:
  -h, --help            show this help message and exit
  -e EXTENSION, --extension EXTENSION
                        extension of the implementation file (default: cc)
  -o OUT, --out OUT     where to write the files (default: out)

$ ./split.py
Wrote out/httplib.h and out/httplib.cc"><pre>$ <span class="pl-s1">./split.py -h</span>
<span class="pl-c1">usage: split.py [-h] [-e EXTENSION] [-o OUT]</span>

<span class="pl-c1">This script splits httplib.h into .h and .cc parts.</span>

<span class="pl-c1">optional arguments:</span>
<span class="pl-c1">  -h, --help            show this help message and exit</span>
<span class="pl-c1">  -e EXTENSION, --extension EXTENSION</span>
<span class="pl-c1">                        extension of the implementation file (default: cc)</span>
<span class="pl-c1">  -o OUT, --out OUT     where to write the files (default: out)</span>

$ <span class="pl-s1">./split.py</span>
<span class="pl-c1">Wrote out/httplib.h and out/httplib.cc</span></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Dockerfile for Static HTTP Server</h2><a id="user-content-dockerfile-for-static-http-server" class="anchor" aria-label="Permalink: Dockerfile for Static HTTP Server" href="#dockerfile-for-static-http-server"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Dockerfile for static HTTP server is available. Port number of this HTTP server is 80, and it serves static files from <code>/html</code> directory in the container.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="&gt; docker build -t cpp-httplib-server .
...

&gt; docker run --rm -it -p 8080:80 -v ./docker/html:/html cpp-httplib-server
Serving HTTP on 0.0.0.0 port 80 ...
192.168.65.1 - - [31/Aug/2024:21:33:56 +0000] &quot;GET / HTTP/1.1&quot; 200 599 &quot;-&quot; &quot;curl/8.7.1&quot;
192.168.65.1 - - [31/Aug/2024:21:34:26 +0000] &quot;GET / HTTP/1.1&quot; 200 599 &quot;-&quot; &quot;Mozilla/5.0 ...&quot;
192.168.65.1 - - [31/Aug/2024:21:34:26 +0000] &quot;GET /favicon.ico HTTP/1.1&quot; 404 152 &quot;-&quot; &quot;Mozilla/5.0 ...&quot;"><pre><span class="pl-k">&gt;</span> docker build -t cpp-httplib-server <span class="pl-c1">.</span>
...

<span class="pl-k">&gt;</span> docker run --rm -it -p 8080:80 -v ./docker/html:/html cpp-httplib-server
Serving HTTP on 0.0.0.0 port 80 ...
192.168.65.1 - - [31/Aug/2024:21:33:56 +0000] <span class="pl-s"><span class="pl-pds">"</span>GET / HTTP/1.1<span class="pl-pds">"</span></span> 200 599 <span class="pl-s"><span class="pl-pds">"</span>-<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>curl/8.7.1<span class="pl-pds">"</span></span>
192.168.65.1 - - [31/Aug/2024:21:34:26 +0000] <span class="pl-s"><span class="pl-pds">"</span>GET / HTTP/1.1<span class="pl-pds">"</span></span> 200 599 <span class="pl-s"><span class="pl-pds">"</span>-<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>Mozilla/5.0 ...<span class="pl-pds">"</span></span>
192.168.65.1 - - [31/Aug/2024:21:34:26 +0000] <span class="pl-s"><span class="pl-pds">"</span>GET /favicon.ico HTTP/1.1<span class="pl-pds">"</span></span> 404 152 <span class="pl-s"><span class="pl-pds">"</span>-<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>Mozilla/5.0 ...<span class="pl-pds">"</span></span></pre></div>
<p dir="auto">From Docker Hub</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="&gt; docker run --rm -it -p 8080:80 -v ./docker/html:/html yhirose4dockerhub/cpp-httplib-server
Serving HTTP on 0.0.0.0 port 80 ...
192.168.65.1 - - [31/Aug/2024:21:33:56 +0000] &quot;GET / HTTP/1.1&quot; 200 599 &quot;-&quot; &quot;curl/8.7.1&quot;
192.168.65.1 - - [31/Aug/2024:21:34:26 +0000] &quot;GET / HTTP/1.1&quot; 200 599 &quot;-&quot; &quot;Mozilla/5.0 ...&quot;
192.168.65.1 - - [31/Aug/2024:21:34:26 +0000] &quot;GET /favicon.ico HTTP/1.1&quot; 404 152 &quot;-&quot; &quot;Mozilla/5.0 ...&quot;"><pre><span class="pl-k">&gt;</span> docker run --rm -it -p 8080:80 -v ./docker/html:/html yhirose4dockerhub/cpp-httplib-server
Serving HTTP on 0.0.0.0 port 80 ...
192.168.65.1 - - [31/Aug/2024:21:33:56 +0000] <span class="pl-s"><span class="pl-pds">"</span>GET / HTTP/1.1<span class="pl-pds">"</span></span> 200 599 <span class="pl-s"><span class="pl-pds">"</span>-<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>curl/8.7.1<span class="pl-pds">"</span></span>
192.168.65.1 - - [31/Aug/2024:21:34:26 +0000] <span class="pl-s"><span class="pl-pds">"</span>GET / HTTP/1.1<span class="pl-pds">"</span></span> 200 599 <span class="pl-s"><span class="pl-pds">"</span>-<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>Mozilla/5.0 ...<span class="pl-pds">"</span></span>
192.168.65.1 - - [31/Aug/2024:21:34:26 +0000] <span class="pl-s"><span class="pl-pds">"</span>GET /favicon.ico HTTP/1.1<span class="pl-pds">"</span></span> 404 152 <span class="pl-s"><span class="pl-pds">"</span>-<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>Mozilla/5.0 ...<span class="pl-pds">"</span></span></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">NOTE</h2><a id="user-content-note" class="anchor" aria-label="Permalink: NOTE" href="#note"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Regular Expression Stack Overflow</h3><a id="user-content-regular-expression-stack-overflow" class="anchor" aria-label="Permalink: Regular Expression Stack Overflow" href="#regular-expression-stack-overflow"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-alert markdown-alert-caution" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-stop mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M4.47.22A.749.749 0 0 1 5 0h6c.199 0 .389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749 0 0 1-.22.53l-4.25 4.25A.749.749 0 0 1 11 16H5a.749.749 0 0 1-.53-.22L.22 11.53A.749.749 0 0 1 0 11V5c0-.199.079-.389.22-.53Zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5ZM8 4a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Caution</p><p dir="auto">When using complex regex patterns in route handlers, be aware that certain patterns may cause stack overflow during pattern matching. This is a known issue with <code>std::regex</code> implementations and affects the <code>dispatch_request()</code> method.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// This pattern can cause stack overflow with large input
svr.Get(&quot;.*&quot;, handler);"><pre><span class="pl-c"><span class="pl-c">//</span> This pattern can cause stack overflow with large input</span>
svr.Get(<span class="pl-s"><span class="pl-pds">"</span>.*<span class="pl-pds">"</span></span>, handler);</pre></div>
<p dir="auto">Consider using simpler patterns or path parameters to avoid this issue:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Safer alternatives
svr.Get(&quot;/users/:id&quot;, handler);           // Path parameters
svr.Get(R&quot;(/api/v\d+/.*)&quot;, handler);     // More specific patterns"><pre><span class="pl-c"><span class="pl-c">//</span> Safer alternatives</span>
svr.Get(<span class="pl-s"><span class="pl-pds">"</span>/users/:id<span class="pl-pds">"</span></span>, handler);           <span class="pl-c"><span class="pl-c">//</span> Path parameters</span>
svr.Get(<span class="pl-s"><span class="pl-pds">R"(</span>/api/v\d+/.*<span class="pl-pds">)"</span></span>, handler);     <span class="pl-c"><span class="pl-c">//</span> More specific patterns</span></pre></div>
</div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">g++</h3><a id="user-content-g" class="anchor" aria-label="Permalink: g++" href="#g"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">g++ 4.8 and below cannot build this library since <code>&lt;regex&gt;</code> in the versions are <a href="https://stackoverflow.com/questions/12530406/is-gcc-4-8-or-earlier-buggy-about-regular-expressions" rel="nofollow">broken</a>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Windows</h3><a id="user-content-windows" class="anchor" aria-label="Permalink: Windows" href="#windows"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Include <code>httplib.h</code> before <code>Windows.h</code> or include <code>Windows.h</code> by defining <code>WIN32_LEAN_AND_MEAN</code> beforehand.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#include &lt;httplib.h&gt;
#include &lt;Windows.h&gt;"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>httplib.h<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>Windows.h<span class="pl-pds">&gt;</span></span></pre></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#define WIN32_LEAN_AND_MEAN
#include &lt;Windows.h&gt;
#include &lt;httplib.h&gt;"><pre>#<span class="pl-k">define</span> <span class="pl-en">WIN32_LEAN_AND_MEAN</span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>Windows.h<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>httplib.h<span class="pl-pds">&gt;</span></span></pre></div>
<div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">cpp-httplib officially supports only the latest Visual Studio. It might work with former versions of Visual Studio, but I can no longer verify it. Pull requests are always welcome for the older versions of Visual Studio unless they break the C++11 conformance.</p>
</div>
<div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">Windows 8 or lower, Visual Studio 2015 or lower, and Cygwin and MSYS2 including MinGW are neither supported nor tested.</p>
</div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">License</h2><a id="user-content-license" class="anchor" aria-label="Permalink: License" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">MIT license ( 2025 Yuji Hirose)</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Special Thanks To</h2><a id="user-content-special-thanks-to" class="anchor" aria-label="Permalink: Special Thanks To" href="#special-thanks-to"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://github.com/yhirose/cpp-httplib/graphs/contributors">These folks</a> made great contributions to polish this library to totally another level from a simple toy!</p>
</article></div>