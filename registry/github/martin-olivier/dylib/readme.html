<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">dylib</h1><a id="user-content-dylib" class="anchor" aria-label="Permalink: dylib" href="#dylib"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://github.com/martin-olivier/dylib/releases/tag/v3.0.1"><img src="https://camo.githubusercontent.com/35a4b7dc96b4ac7c5f45b36871cdeec2e1cfe3147a7c138afbef522b5ce64a7e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f56657273696f6e2d332e302e312d626c75652e737667" alt="version" data-canonical-src="https://img.shields.io/badge/Version-3.0.1-blue.svg" style="max-width: 100%;"></a>
<a href="https://github.com/martin-olivier/dylib/blob/main/LICENSE"><img src="https://camo.githubusercontent.com/c9976f14039bee981f255ff250600a1e78489f3c6e442422638ffe9b6e016af2/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d6f72616e67652e737667" alt="license" data-canonical-src="https://img.shields.io/badge/License-MIT-orange.svg" style="max-width: 100%;"></a>
<a href="https://isocpp.org" rel="nofollow"><img src="https://camo.githubusercontent.com/22439450d3927eb573b9c766b2651fc2db06653d9c0097a7c8f5e9f40291b51e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436f6d7061746962696c6974792d432b2b31312d6461726b677265656e2e737667" alt="cpp" data-canonical-src="https://img.shields.io/badge/Compatibility-C++11-darkgreen.svg" style="max-width: 100%;"></a>
<a href="https://github.com/martin-olivier/dylib/actions/workflows/CI.yml"><img src="https://github.com/martin-olivier/dylib/actions/workflows/CI.yml/badge.svg" alt="ci" style="max-width: 100%;"></a></p>
<p dir="auto">The goal of this C++ library is to load dynamic libraries (.so, .dll, .dylib) and access its C and C++ functions and global variables at runtime.</p>
<p dir="auto"><code>‚≠ê Don't forget to put a star if you like the project!</code></p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Compatibility</h2><a id="user-content-compatibility" class="anchor" aria-label="Permalink: Compatibility" href="#compatibility"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>OS</strong>:
Works on <code>Linux</code>, <code>MacOS</code> and <code>Windows</code></p>
</li>
<li>
<p dir="auto"><strong>Compilers</strong>:
Works with <code>GCC</code>, <code>Clang</code>, <code>MSVC</code> and <code>MinGW</code></p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Installation</h2><a id="user-content-installation" class="anchor" aria-label="Permalink: Installation" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Using a package manager</h3><a id="user-content-using-a-package-manager" class="anchor" aria-label="Permalink: Using a package manager" href="#using-a-package-manager"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can install <code>dylib</code> from <a href="https://vcpkg.io/en" rel="nofollow">vcpkg</a> or <a href="https://conan.io/center" rel="nofollow">conan center</a>:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="vcpkg install dylib"><pre>vcpkg install dylib</pre></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="conan install --requires=dylib/3.0.1"><pre>conan install --requires=dylib/3.0.1</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Using CMake Fetch</h3><a id="user-content-using-cmake-fetch" class="anchor" aria-label="Permalink: Using CMake Fetch" href="#using-cmake-fetch"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can also fetch <code>dylib</code> to your project using <code>CMake</code>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="include(FetchContent)

FetchContent_Declare(
    dylib
    GIT_REPOSITORY &quot;https://github.com/martin-olivier/dylib&quot;
    GIT_TAG        &quot;v3.0.1&quot;
)

FetchContent_MakeAvailable(dylib)"><pre><span class="pl-k">include</span>(FetchContent)

FetchContent_Declare(
    dylib
    GIT_REPOSITORY <span class="pl-s">"https://github.com/martin-olivier/dylib"</span>
    GIT_TAG        <span class="pl-s">"v3.0.1"</span>
)

FetchContent_MakeAvailable(dylib)</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Documentation</h2><a id="user-content-documentation" class="anchor" aria-label="Permalink: Documentation" href="#documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Constructor</h3><a id="user-content-constructor" class="anchor" aria-label="Permalink: Constructor" href="#constructor"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>dylib::library</code> class can load a dynamic library from a relative or a full path:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Load &quot;foo&quot; library from relative path &quot;./plugins&quot;

dylib::library lib(&quot;./plugins/libfoo.so&quot;);

// Load &quot;foo&quot; library from full path &quot;/lib&quot;

dylib::library lib(&quot;/lib/libfoo.so&quot;);"><pre><span class="pl-c"><span class="pl-c">//</span> Load "foo" library from relative path "./plugins"</span>

dylib::library <span class="pl-en">lib</span>(<span class="pl-s"><span class="pl-pds">"</span>./plugins/libfoo.so<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Load "foo" library from full path "/lib"</span>

dylib::library <span class="pl-en">lib</span>(<span class="pl-s"><span class="pl-pds">"</span>/lib/libfoo.so<span class="pl-pds">"</span></span>);</pre></div>
<p dir="auto">The <code>dylib::library</code> class can add filename decorations to the library name.
You can use <code>dylib::decorations::os_default()</code> to add default OS decorations to the library name.
You can also use <code>dylib::decorations</code> to add custom decorations to the library name.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// No decorations added
// Windows -&gt; &quot;foo.lib&quot;
// MacOS   -&gt; &quot;foo.lib&quot;
// Linux   -&gt; &quot;foo.lib&quot;

dylib::library lib(&quot;./foo.lib&quot;);

// Default OS decorations added
// Windows -&gt; &quot;foo.dll&quot;
// MacOS   -&gt; &quot;libfoo.dylib&quot;
// Linux   -&gt; &quot;libfoo.so&quot;

dylib::library lib(&quot;./foo&quot;, dylib::decorations::os_default());

// Custom OS decorations added
// Windows -&gt; &quot;foo.dll&quot;
// MacOS   -&gt; &quot;libfoo.so&quot;
// Linux   -&gt; &quot;libfoo.so&quot;

auto custom_decorations = dylib::decorations(
    DYLIB_WIN_OTHER(&quot;&quot;, &quot;lib&quot;), DYLIB_WIN_OTHER(&quot;.dll&quot;, &quot;.so&quot;)
);
dylib::library lib(&quot;./foo&quot;, custom_decorations);"><pre><span class="pl-c"><span class="pl-c">//</span> No decorations added</span>
<span class="pl-c"><span class="pl-c">//</span> Windows -&gt; "foo.lib"</span>
<span class="pl-c"><span class="pl-c">//</span> MacOS   -&gt; "foo.lib"</span>
<span class="pl-c"><span class="pl-c">//</span> Linux   -&gt; "foo.lib"</span>

dylib::library <span class="pl-en">lib</span>(<span class="pl-s"><span class="pl-pds">"</span>./foo.lib<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Default OS decorations added</span>
<span class="pl-c"><span class="pl-c">//</span> Windows -&gt; "foo.dll"</span>
<span class="pl-c"><span class="pl-c">//</span> MacOS   -&gt; "libfoo.dylib"</span>
<span class="pl-c"><span class="pl-c">//</span> Linux   -&gt; "libfoo.so"</span>

dylib::library <span class="pl-en">lib</span>(<span class="pl-s"><span class="pl-pds">"</span>./foo<span class="pl-pds">"</span></span>, dylib::decorations::os_default());

<span class="pl-c"><span class="pl-c">//</span> Custom OS decorations added</span>
<span class="pl-c"><span class="pl-c">//</span> Windows -&gt; "foo.dll"</span>
<span class="pl-c"><span class="pl-c">//</span> MacOS   -&gt; "libfoo.so"</span>
<span class="pl-c"><span class="pl-c">//</span> Linux   -&gt; "libfoo.so"</span>

<span class="pl-k">auto</span> custom_decorations = dylib::decorations(
    <span class="pl-en">DYLIB_WIN_OTHER</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>lib<span class="pl-pds">"</span></span>), DYLIB_WIN_OTHER(<span class="pl-s"><span class="pl-pds">"</span>.dll<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>.so<span class="pl-pds">"</span></span>)
);
dylib::library <span class="pl-en">lib</span>(<span class="pl-s"><span class="pl-pds">"</span>./foo<span class="pl-pds">"</span></span>, custom_decorations);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Get a function or a variable</h3><a id="user-content-get-a-function-or-a-variable" class="anchor" aria-label="Permalink: Get a function or a variable" href="#get-a-function-or-a-variable"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>get_function</code><br>
Get a function from the dynamic library currently loaded in the object</p>
<p dir="auto"><code>get_variable</code><br>
Get a global variable from the dynamic library currently loaded in the object</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">C symbols</h4><a id="user-content-c-symbols" class="anchor" aria-label="Permalink: C symbols" href="#c-symbols"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Load &quot;foo&quot; dynamic library

dylib::library lib(&quot;./foo&quot;, dylib::decorations::os_default());

// Get the C function &quot;adder&quot; (get_function&lt;T&gt; will return T*)

auto adder = lib.get_function&lt;double(double, double)&gt;(&quot;adder&quot;);

// Get the variable &quot;pi_value&quot; (get_variable&lt;T&gt; will return T&amp;)

double pi = lib.get_variable&lt;double&gt;(&quot;pi_value&quot;);

// Use the function &quot;adder&quot; with &quot;pi_value&quot;

double result = adder(pi, pi);"><pre><span class="pl-c"><span class="pl-c">//</span> Load "foo" dynamic library</span>

dylib::library <span class="pl-en">lib</span>(<span class="pl-s"><span class="pl-pds">"</span>./foo<span class="pl-pds">"</span></span>, dylib::decorations::os_default());

<span class="pl-c"><span class="pl-c">//</span> Get the C function "adder" (get_function&lt;T&gt; will return T*)</span>

<span class="pl-k">auto</span> adder = lib.get_function&lt;<span class="pl-k">double</span>(<span class="pl-k">double</span>, <span class="pl-k">double</span>)&gt;(<span class="pl-s"><span class="pl-pds">"</span>adder<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Get the variable "pi_value" (get_variable&lt;T&gt; will return T&amp;)</span>

<span class="pl-k">double</span> pi = lib.get_variable&lt;<span class="pl-k">double</span>&gt;(<span class="pl-s"><span class="pl-pds">"</span>pi_value<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Use the function "adder" with "pi_value"</span>

<span class="pl-k">double</span> result = adder(pi, pi);</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">C++ symbols</h4><a id="user-content-c-symbols-1" class="anchor" aria-label="Permalink: C++ symbols" href="#c-symbols-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Load &quot;foo&quot; dynamic library

dylib::library lib(&quot;./foo&quot;, dylib::decorations::os_default());

// Get the C++ functions &quot;to_string&quot; located in the namespace &quot;tools&quot;
// The format for the function arguments is the following:
// type [const] [volatile] [*|&amp;|&amp;&amp;]

auto int_to_string = lib.get_function&lt;std::string(int)&gt;(&quot;tools::to_string(int)&quot;);
auto double_to_string = lib.get_function&lt;std::string(double)&gt;(&quot;tools::to_string(double)&quot;);

// Get the variable &quot;pi_value&quot; located in the namespace &quot;global::math&quot;

double pi = lib.get_variable&lt;double&gt;(&quot;global::math::pi_value&quot;);

std::string meaning_of_life_str = int_to_string(42);
std::string pi_str = double_to_string(pi);"><pre><span class="pl-c"><span class="pl-c">//</span> Load "foo" dynamic library</span>

dylib::library <span class="pl-en">lib</span>(<span class="pl-s"><span class="pl-pds">"</span>./foo<span class="pl-pds">"</span></span>, dylib::decorations::os_default());

<span class="pl-c"><span class="pl-c">//</span> Get the C++ functions "to_string" located in the namespace "tools"</span>
<span class="pl-c"><span class="pl-c">//</span> The format for the function arguments is the following:</span>
<span class="pl-c"><span class="pl-c">//</span> type [const] [volatile] [*|&amp;|&amp;&amp;]</span>

<span class="pl-k">auto</span> int_to_string = lib.get_function&lt;std::string(<span class="pl-k">int</span>)&gt;(<span class="pl-s"><span class="pl-pds">"</span>tools::to_string(int)<span class="pl-pds">"</span></span>);
<span class="pl-k">auto</span> double_to_string = lib.get_function&lt;std::string(<span class="pl-k">double</span>)&gt;(<span class="pl-s"><span class="pl-pds">"</span>tools::to_string(double)<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Get the variable "pi_value" located in the namespace "global::math"</span>

<span class="pl-k">double</span> pi = lib.get_variable&lt;<span class="pl-k">double</span>&gt;(<span class="pl-s"><span class="pl-pds">"</span>global::math::pi_value<span class="pl-pds">"</span></span>);

std::string meaning_of_life_str = int_to_string(<span class="pl-c1">42</span>);
std::string pi_str = double_to_string(pi);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Gather library symbols</h3><a id="user-content-gather-library-symbols" class="anchor" aria-label="Permalink: Gather library symbols" href="#gather-library-symbols"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can collect the symbols of a dynamic library using the <code>symbols</code> method:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Load &quot;foo&quot; dynamic library

dylib::library lib(&quot;./foo&quot;, dylib::decorations::os_default());

// Iterate through symbols

for (auto &amp;symbol : lib.symbols()) {
    if (symbol.loadable)
        std::cout &lt;&lt; symbol.demangled_name &lt;&lt; std::endl;
}"><pre><span class="pl-c"><span class="pl-c">//</span> Load "foo" dynamic library</span>

dylib::library <span class="pl-en">lib</span>(<span class="pl-s"><span class="pl-pds">"</span>./foo<span class="pl-pds">"</span></span>, dylib::decorations::os_default());

<span class="pl-c"><span class="pl-c">//</span> Iterate through symbols</span>

<span class="pl-k">for</span> (<span class="pl-k">auto</span> &amp;symbol : lib.symbols()) {
    <span class="pl-k">if</span> (symbol.<span class="pl-smi">loadable</span>)
        std::cout &lt;&lt; symbol.<span class="pl-smi">demangled_name</span> &lt;&lt; std::endl;
}</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Miscellaneous tools</h3><a id="user-content-miscellaneous-tools" class="anchor" aria-label="Permalink: Miscellaneous tools" href="#miscellaneous-tools"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>get_symbol</code><br>
Get a C or C++ symbol from the dynamic library currently loaded in the object</p>
<p dir="auto"><code>native_handle</code><br>
Returns the dynamic library handle</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="dylib::library lib(&quot;./foo&quot;, dylib::decorations::os_default());

dylib::native_handle_type handle = lib.native_handle();
dylib::native_symbol_type symbol = lib.get_symbol(&quot;pi_value&quot;);

assert(handle != nullptr &amp;&amp; symbol != nullptr);
assert(symbol == dlsym(handle, &quot;pi_value&quot;));"><pre>dylib::library <span class="pl-en">lib</span>(<span class="pl-s"><span class="pl-pds">"</span>./foo<span class="pl-pds">"</span></span>, dylib::decorations::os_default());

dylib::native_handle_type handle = lib.native_handle();
dylib::native_symbol_type symbol = lib.get_symbol(<span class="pl-s"><span class="pl-pds">"</span>pi_value<span class="pl-pds">"</span></span>);

<span class="pl-k">assert</span>(handle != <span class="pl-c1">nullptr</span> &amp;&amp; symbol != <span class="pl-c1">nullptr</span>);
<span class="pl-k">assert</span>(symbol == dlsym(handle, <span class="pl-s"><span class="pl-pds">"</span>pi_value<span class="pl-pds">"</span></span>));</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Exceptions</h3><a id="user-content-exceptions" class="anchor" aria-label="Permalink: Exceptions" href="#exceptions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>load_error</code><br>
This exception is raised when the library failed to load or the library encountered symbol resolution issues</p>
<p dir="auto"><code>symbol_error</code><br>
This exception is raised when the library failed to load a symbol</p>
<p dir="auto">Those exceptions inherit from <code>dylib::exception</code></p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="try {
    dylib::library lib(&quot;./foo&quot;, dylib::decorations::os_default());
    double pi_value = lib.get_variable&lt;double&gt;(&quot;pi_value&quot;);
    std::cout &lt;&lt; pi_value &lt;&lt; std::endl;
} catch (const dylib::load_error &amp;) {
    std::cerr &lt;&lt; &quot;failed to load 'foo' library&quot; &lt;&lt; std::endl;
} catch (const dylib::symbol_error &amp;) {
    std::cerr &lt;&lt; &quot;failed to get 'pi_value' symbol&quot; &lt;&lt; std::endl;
}"><pre><span class="pl-k">try</span> {
    dylib::library <span class="pl-smi">lib</span>(<span class="pl-s"><span class="pl-pds">"</span>./foo<span class="pl-pds">"</span></span>, <span class="pl-c1">dylib::decorations::os_default</span>());
    <span class="pl-k">double</span> pi_value = lib.<span class="pl-smi">get_variable</span>&lt;<span class="pl-k">double</span>&gt;(<span class="pl-s"><span class="pl-pds">"</span>pi_value<span class="pl-pds">"</span></span>);
    std::cout &lt;&lt; pi_value &lt;&lt; std::endl;
} <span class="pl-k">catch</span> (<span class="pl-k">const</span> dylib::load_error &amp;) {
    std::cerr &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>failed to load 'foo' library<span class="pl-pds">"</span></span> &lt;&lt; std::endl;
} <span class="pl-k">catch</span> (<span class="pl-k">const</span> dylib::symbol_error &amp;) {
    std::cerr &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>failed to get 'pi_value' symbol<span class="pl-pds">"</span></span> &lt;&lt; std::endl;
}</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Example</h2><a id="user-content-example" class="anchor" aria-label="Permalink: Example" href="#example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A full example about the usage of the <code>dylib</code> library is available <a href="example">HERE</a></p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Tests</h2><a id="user-content-tests" class="anchor" aria-label="Permalink: Tests" href="#tests"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To build unit tests, enter the following commands:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cmake . -B build -DDYLIB_BUILD_TESTS=ON
cmake --build build"><pre>cmake <span class="pl-c1">.</span> -B build -DDYLIB_BUILD_TESTS=ON
cmake --build build</pre></div>
<p dir="auto">To run unit tests, enter the following command inside <code>build</code> directory:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="ctest"><pre>ctest</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Community</h2><a id="user-content-community" class="anchor" aria-label="Permalink: Community" href="#community"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you have any question about the usage of the library, do not hesitate to open a <a href="https://github.com/martin-olivier/dylib/discussions">discussion</a></p>
<p dir="auto">If you want to report a bug or provide a feature, do not hesitate to open an <a href="https://github.com/martin-olivier/dylib/issues">issue</a> or submit a <a href="https://github.com/martin-olivier/dylib/pulls">pull request</a></p>
</article></div>