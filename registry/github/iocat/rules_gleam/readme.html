<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">rules_gleam</h1><a id="user-content-rules_gleam" class="anchor" aria-label="Permalink: rules_gleam" href="#rules_gleam"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This repository contains Bazel rules for working with the <a href="https://gleam.run" rel="nofollow">Gleam</a> programming language.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Table of Contents</h2><a id="user-content-table-of-contents" class="anchor" aria-label="Permalink: Table of Contents" href="#table-of-contents"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#rules">Rules</a>
<ul dir="auto">
<li><a href="#gleam_library"><code>gleam_library</code></a></li>
<li><a href="#gleam_binary"><code>gleam_binary</code></a></li>
<li><a href="#gleam_test"><code>gleam_test</code></a></li>
</ul>
</li>
<li><a href="#examples">Examples</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Getting Started</h2><a id="user-content-getting-started" class="anchor" aria-label="Permalink: Getting Started" href="#getting-started"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>Note:</strong> These rules are designed for use with Bazel Modules and do not support the legacy <code>WORKSPACE</code> setup.</p>
<p dir="auto">To use the rules, add the following to your <code>MODULE.bazel</code> file:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# MODULE.bazel

bazel_dep(name = &quot;rules_gleam&quot;, version = &quot;0.0.1&quot;)"><pre><span class="pl-c"># MODULE.bazel</span>

<span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_gleam"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"0.0.1"</span>)</pre></div>
<p dir="auto">Then, in your <code>BUILD.bazel</code> files, load the rules you need:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# BUILD.bazel
load(&quot;@rules_gleam//gleam:defs.bzl&quot;, &quot;gleam_binary&quot;, &quot;gleam_library&quot;, &quot;gleam_test&quot;)"><pre><span class="pl-c"># BUILD.bazel</span>
<span class="pl-en">load</span>(<span class="pl-s">"@rules_gleam//gleam:defs.bzl"</span>, <span class="pl-s">"gleam_binary"</span>, <span class="pl-s">"gleam_library"</span>, <span class="pl-s">"gleam_test"</span>)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Managing Hex Dependencies</h3><a id="user-content-managing-hex-dependencies" class="anchor" aria-label="Permalink: Managing Hex Dependencies" href="#managing-hex-dependencies"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To use external dependencies from <a href="https://hex.pm/" rel="nofollow">Hex</a>, you'll need a <code>gleam.toml</code> and a <code>manifest.toml</code> file.</p>
<ol dir="auto">
<li>
<p dir="auto"><strong>Define Dependencies in <code>gleam.toml</code></strong>: Add your Hex dependencies to the <code>[dependencies]</code> or <code>[dev-dependencies]</code> sections of your <code>gleam.toml</code> file.</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# gleam.toml
[dependencies]
gleam_stdlib = &quot;&gt;= 0.51.0 and &lt; 2.0.0&quot;
gleam_json = &quot;&gt;= 3.0.2 and &lt; 4.0.0&quot;

[dev-dependencies]
gleeunit = &quot;&gt;= 1.0.0 and &lt; 2.0.0&quot;"><pre><span class="pl-c"><span class="pl-c">#</span> gleam.toml</span>
[<span class="pl-en">dependencies</span>]
<span class="pl-smi">gleam_stdlib</span> = <span class="pl-s"><span class="pl-pds">"</span>&gt;= 0.51.0 and &lt; 2.0.0<span class="pl-pds">"</span></span>
<span class="pl-smi">gleam_json</span> = <span class="pl-s"><span class="pl-pds">"</span>&gt;= 3.0.2 and &lt; 4.0.0<span class="pl-pds">"</span></span>

[<span class="pl-en">dev-dependencies</span>]
<span class="pl-smi">gleeunit</span> = <span class="pl-s"><span class="pl-pds">"</span>&gt;= 1.0.0 and &lt; 2.0.0<span class="pl-pds">"</span></span></pre></div>
</li>
<li>
<p dir="auto"><strong>Fetch Dependencies</strong>: Run <code>gleam deps download</code> to fetch the dependencies and generate a <code>manifest.toml</code> file.</p>
</li>
</ol>
<p dir="auto">Commit and save both "gleam.toml", and "manifest.toml". The rest can be discarded.</p>
<ol start="3" dir="auto">
<li>
<p dir="auto"><strong>Configure Bazel Module</strong>: In your <code>MODULE.bazel</code> file, use the <code>gleam.deps</code> extension to declare your dependencies.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# MODULE.bazel
gleam = use_extension(&quot;@rules_gleam//:extensions.bzl&quot;, &quot;gleam&quot;)
gleam.deps(gleam_toml = &quot;//:gleam.toml&quot;)
use_repo(gleam, &quot;hex_gleam_json&quot;, &quot;hex_gleam_stdlib&quot;, &quot;hex_gleeunit&quot;)"><pre><span class="pl-c"># MODULE.bazel</span>
<span class="pl-s1">gleam</span> <span class="pl-c1">=</span> <span class="pl-en">use_extension</span>(<span class="pl-s">"@rules_gleam//:extensions.bzl"</span>, <span class="pl-s">"gleam"</span>)
<span class="pl-s1">gleam</span>.<span class="pl-c1">deps</span>(<span class="pl-s1">gleam_toml</span> <span class="pl-c1">=</span> <span class="pl-s">"//:gleam.toml"</span>)
<span class="pl-en">use_repo</span>(<span class="pl-s1">gleam</span>, <span class="pl-s">"hex_gleam_json"</span>, <span class="pl-s">"hex_gleam_stdlib"</span>, <span class="pl-s">"hex_gleeunit"</span>)</pre></div>
</li>
</ol>
<p dir="auto">The <code>use_repo</code> calls can be managed by hand, or you can call <code>bazel mod tidy</code> to have bazel manages it.</p>
<ol start="4" dir="auto">
<li>
<p dir="auto"><strong>Use Dependencies in <code>BUILD.bazel</code></strong>: You can now reference the Hex packages in your <code>BUILD.bazel</code> file.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# BUILD.bazel
gleam_binary(
    name = &quot;example&quot;,
    srcs = [&quot;example.gleam&quot;],
    deps = [
        &quot;@hex_gleam_json//gleam&quot;,
        &quot;@hex_gleam_stdlib//gleam&quot;,
    ],
)"><pre><span class="pl-c"># BUILD.bazel</span>
<span class="pl-en">gleam_binary</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"example"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"example.gleam"</span>],
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"@hex_gleam_json//gleam"</span>,
        <span class="pl-s">"@hex_gleam_stdlib//gleam"</span>,
    ],
)</pre></div>
<p dir="auto">Gazelle will automatically update your repository with these dependencies.</p>
</li>
</ol>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Usage</h2><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Building a Gleam Library</h3><a id="user-content-building-a-gleam-library" class="anchor" aria-label="Permalink: Building a Gleam Library" href="#building-a-gleam-library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To build a Gleam library, use the <code>gleam_library</code> rule. This rule compiles your Gleam source files into Erlang modules.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="gleam_library(
    name = &quot;my_lib&quot;,
    srcs = [&quot;my_lib.gleam&quot;],
    deps = [
        &quot;//path/to/another:lib&quot;,
    ],
)"><pre><span class="pl-en">gleam_library</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"my_lib"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"my_lib.gleam"</span>],
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"//path/to/another:lib"</span>,
    ],
)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Building a Gleam Binary</h3><a id="user-content-building-a-gleam-binary" class="anchor" aria-label="Permalink: Building a Gleam Binary" href="#building-a-gleam-binary"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To build a Gleam binary, use the <code>gleam_binary</code> rule. This creates an executable script that runs your Gleam application.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="gleam_binary(
    name = &quot;my_app&quot;,
    srcs = [&quot;main.gleam&quot;],
    main_module = &quot;main&quot;,
    deps = [
        &quot;:my_lib&quot;,
    ],
)"><pre><span class="pl-en">gleam_binary</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"my_app"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"main.gleam"</span>],
    <span class="pl-s1">main_module</span> <span class="pl-c1">=</span> <span class="pl-s">"main"</span>,
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
        <span class="pl-s">":my_lib"</span>,
    ],
)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Testing a Gleam Module</h3><a id="user-content-testing-a-gleam-module" class="anchor" aria-label="Permalink: Testing a Gleam Module" href="#testing-a-gleam-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To test a Gleam module, use the <code>gleam_test</code> rule. This will compile your test files and run them using the <code>gleeunit</code> test runner.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="gleam_test(
    name = &quot;my_lib_test&quot;,
    srcs = [&quot;my_lib_test.gleam&quot;],
    deps = [
        &quot;:my_lib&quot;,
    ],
)"><pre><span class="pl-en">gleam_test</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"my_lib_test"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"my_lib_test.gleam"</span>],
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
        <span class="pl-s">":my_lib"</span>,
    ],
)</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Rules</h2><a id="user-content-rules" class="anchor" aria-label="Permalink: Rules" href="#rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>gleam_library</code></h3><a id="user-content-gleam_library" class="anchor" aria-label="Permalink: gleam_library" href="#gleam_library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Compiles Gleam source files into a library of Erlang modules.</p>
<p dir="auto"><strong>Attributes:</strong></p>
<ul dir="auto">
<li><code>name</code> (mandatory): A unique name for this target.</li>
<li><code>srcs</code> (mandatory): A list of <code>.gleam</code> source files to be compiled.</li>
<li><code>deps</code>: A list of other <code>gleam_library</code> or <code>gleam_erl_library</code> targets that this library depends on.</li>
<li><code>data</code>: A list of data files needed by the library at runtime.</li>
<li><code>strip_src_prefix</code>: A string to strip from the beginning of source file paths when determining the Gleam module name. For example, with <code>strip_src_prefix = "src"</code>, a file at <code>src/my/module.gleam</code> will be compiled as the <code>my/module</code> module.</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>gleam_binary</code></h3><a id="user-content-gleam_binary" class="anchor" aria-label="Permalink: gleam_binary" href="#gleam_binary"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Creates an executable script to run a Gleam application. This rule compiles the specified sources and their dependencies and generates a runner that invokes the <code>main</code> function in the specified <code>main_module</code>.</p>
<p dir="auto"><strong>Attributes:</strong></p>
<ul dir="auto">
<li><code>name</code> (mandatory): A unique name for this target.</li>
<li><code>srcs</code> (mandatory): A list of <code>.gleam</code> source files to be compiled.</li>
<li><code>main_module</code> (mandatory): The name of the Gleam module containing the <code>main</code> function (e.g., <code>"my_app/main"</code>).
Default to the only gleam source. Must be provided if there are multiple Gleam modules.</li>
<li><code>deps</code>: A list of <code>gleam_library</code> or <code>gleam_erl_library</code> targets that this binary depends on.</li>
<li><code>data</code>: A list of data files needed by the binary at runtime.</li>
<li><code>strip_src_prefix</code>: A string to strip from the beginning of source file paths when determining the Gleam module name.</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>gleam_test</code></h3><a id="user-content-gleam_test" class="anchor" aria-label="Permalink: gleam_test" href="#gleam_test"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Builds and runs a Gleam test using the <code>gleeunit</code> test runner. This rule compiles the test sources and their dependencies and executes them as a Bazel test.</p>
<p dir="auto"><strong>Attributes:</strong></p>
<ul dir="auto">
<li><code>name</code> (mandatory): A unique name for this target.</li>
<li><code>srcs</code> (mandatory): A list of <code>.gleam</code> test files. Test file names must end with <code>_test.gleam</code> or <code>_tests.gleam</code>.</li>
<li><code>deps</code>: A list of <code>gleam_library</code> or <code>gleam_erl_library</code> targets that the test depends on.</li>
<li><code>size</code>: The size of the test. Can be <code>small</code>, <code>medium</code>, <code>large</code>, or <code>enormous</code>.</li>
<li><code>timeout</code>: The timeout for the test. Can be <code>short</code>, <code>moderate</code>, <code>long</code>, or <code>eternal</code>.</li>
<li><code>data</code>: A list of data files needed by the test at runtime.</li>
<li><code>strip_src_prefix</code>: A string to strip from the beginning of source file paths when determining the Gleam module name. Used for external Hex module.</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>gleam_erl_library</code></h3><a id="user-content-gleam_erl_library" class="anchor" aria-label="Permalink: gleam_erl_library" href="#gleam_erl_library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Builds a library from raw Erlang source files for use as a Foreign Function Interface (FFI) with Gleam.</p>
<p dir="auto">This rule is useful for integrating existing Erlang code into your Gleam project. The compiled Erlang modules can be called from Gleam using the external function syntax.</p>
<p dir="auto"><strong>Note on Module Namespacing:</strong> Unlike <code>gleam_library</code>, this rule does not namespace the compiled modules. The resulting BEAM files are placed at the root of the package. This means you must ensure that your Erlang module names are unique across your entire project and its dependencies to avoid conflicts.</p>
<p dir="auto"><strong>Attributes:</strong></p>
<ul dir="auto">
<li><code>name</code> (mandatory): A unique name for this target.</li>
<li><code>srcs</code> (mandatory): A list of <code>.erl</code> source files to be compiled.</li>
<li><code>deps</code>: A list of other <code>gleam_library</code> or <code>gleam_erl_library</code> targets that this library depends on.</li>
<li><code>data</code>: A list of data files needed by the library at runtime.</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Gazelle Integration</h2><a id="user-content-gazelle-integration" class="anchor" aria-label="Permalink: Gazelle Integration" href="#gazelle-integration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This repository provides a Gazelle extension that can automatically generate <code>BUILD.bazel</code> files for your Gleam projects.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Setup</h3><a id="user-content-setup" class="anchor" aria-label="Permalink: Setup" href="#setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To use the Gazelle extension, first, set it up in your root <code>BUILD.bazel</code> file:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# BUILD.bazel
load(&quot;@bazel_gazelle//:def.bzl&quot;, &quot;gazelle&quot;)

gazelle(
    name = &quot;gazelle&quot;,
    gazelle = &quot;@rules_gleam//gazelle&quot;,
)"><pre><span class="pl-c"># BUILD.bazel</span>
<span class="pl-en">load</span>(<span class="pl-s">"@bazel_gazelle//:def.bzl"</span>, <span class="pl-s">"gazelle"</span>)

<span class="pl-en">gazelle</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"gazelle"</span>,
    <span class="pl-s1">gazelle</span> <span class="pl-c1">=</span> <span class="pl-s">"@rules_gleam//gazelle"</span>,
)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Usage</h3><a id="user-content-usage-1" class="anchor" aria-label="Permalink: Usage" href="#usage-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Once configured, you can run Gazelle from the command line:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel run //:gazelle"><pre>bazel run //:gazelle</pre></div>
<p dir="auto">Gazelle will scan your project and generate <code>gleam_library</code>, <code>gleam_binary</code>, and <code>gleam_test</code> rules automatically.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Directives</h3><a id="user-content-directives" class="anchor" aria-label="Permalink: Directives" href="#directives"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The Gleam Gazelle extension supports the following directive:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>gleam_visibility</code>: Specifies the visibility of the generated targets. You can add this as a comment in your <code>BUILD.bazel</code> file.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# gazelle:gleam_visibility //my/project:__subpackages__"><pre><span class="pl-c"># gazelle:gleam_visibility //my/project:__subpackages__</span></pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Examples</h2><a id="user-content-examples" class="anchor" aria-label="Permalink: Examples" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can find example usage of these rules in the <a href="examples"><code>examples</code></a> directory.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Contributing</h2><a id="user-content-contributing" class="anchor" aria-label="Permalink: Contributing" href="#contributing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Contributions are welcome! Please open an issue or submit a pull request for any improvements or bug fixes.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">License</h2><a id="user-content-license" class="anchor" aria-label="Permalink: License" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This project is licensed under the MIT License. See the <a href="LICENSE">LICENSE</a> file for details.</p>
</article></div>