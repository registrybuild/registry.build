<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a href="https://buildkite.com/bazel/rules-postcss" rel="nofollow"><img src="https://camo.githubusercontent.com/264da6beeedc86f56d8ce109299ff186edc66aa8989137900d709665dd00100f/68747470733a2f2f62616467652e6275696c646b6974652e636f6d2f62633533333335303535313761663437616261363863306334363466313761386535393633333862373432653664663239352e737667" alt="Build status" data-canonical-src="https://badge.buildkite.com/bc5333505517af47aba68c0c464f17a8e596338b742e6df295.svg" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">PostCSS Rules for Bazel</h1><a id="user-content-postcss-rules-for-bazel" class="anchor" aria-label="Permalink: PostCSS Rules for Bazel" href="#postcss-rules-for-bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Rules</h2><a id="user-content-rules" class="anchor" aria-label="Permalink: Rules" href="#rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>postcss_binary</li>
<li>postcss_multi_binary</li>
<li>postcss_plugin</li>
<li>autoprefixer</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Overview</h2><a id="user-content-overview" class="anchor" aria-label="Permalink: Overview" href="#overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">These build rules are used for post-processing CSS files via <a href="https://postcss.org" rel="nofollow">PostCSS</a>
with Bazel.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Setup</h2><a id="user-content-setup" class="anchor" aria-label="Permalink: Setup" href="#setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Using npm and Node.js rules</h3><a id="user-content-using-npm-and-nodejs-rules" class="anchor" aria-label="Permalink: Using npm and Node.js rules" href="#using-npm-and-nodejs-rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">We recommend you use npm to install the PostCSS build rules if you use the
<a href="https://bazelbuild.github.io/rules_nodejs/" rel="nofollow">Node.js build rules</a>, and <strong>strongly recommend</strong> using npm
if you also depend or plan to depend on PostCSS in your local <code>package.json</code>.
(For example, if PostCSS plugin(s) will form part of your repository's build
pipeline.)</p>
<p dir="auto">Installing the PostCSS build rules via npm allows you to rely on its native
package management functionality. If you depend on PostCSS in your local
<code>package.json</code>, using npm also helps avoid version skew between PostCSS in
your repository and these build rules.</p>
<p dir="auto">Add the <code>@bazel/postcss</code> npm package to your <code>devDependencies</code> in
<code>package.json</code>.</p>
<p dir="auto">Your <code>WORKSPACE</code> should declare a <code>yarn_install</code> or <code>npm_install</code> rule named
<code>npm</code>.
See <a href="https://github.com/bazelbuild/rules_nodejs/#quickstart">https://github.com/bazelbuild/rules_nodejs/#quickstart</a></p>
<p dir="auto">This causes the build rules to be made available under
<code>@npm//@bazel/postcss:index.bzl</code>.</p>
<p dir="auto">Lastly, in your <code>WORKSPACE</code> file, add <code>rules_postcss</code> dependencies:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@npm//@bazel/postcss:package.bzl&quot;, &quot;rules_postcss_dependencies&quot;)
rules_postcss_dependencies()"><pre><span class="pl-en">load</span>(<span class="pl-s">"@npm//@bazel/postcss:package.bzl"</span>, <span class="pl-s">"rules_postcss_dependencies"</span>)
<span class="pl-en">rules_postcss_dependencies</span>()</pre></div>
<p dir="auto"><strong>TODO:</strong> Compare to using PostCSS directly using <code>rules_nodejs</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Using repository rules</h3><a id="user-content-using-repository-rules" class="anchor" aria-label="Permalink: Using repository rules" href="#using-repository-rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following to your WORKSPACE file to add the external repositories for
PostCSS, making sure to use the latest published versions:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="http_archive(
    name = &quot;build_bazel_rules_postcss&quot;,
    # Make sure to check for the latest version when you install
    url = &quot;https://github.com/bazelbuild/rules_postcss/archive/0.5.0.tar.gz&quot;,
    strip_prefix = &quot;rules_postcss-0.5.0&quot;,
    sha256 = &quot;3f0c754f97e3940ea90f4d6408bfb2aefb3850e7941572b22b1b88579c428ff9&quot;,
)
load(&quot;@build_bazel_rules_postcss//:package.bzl&quot;, &quot;rules_postcss_dependencies&quot;)
rules_postcss_dependencies()"><pre><span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"build_bazel_rules_postcss"</span>,
    <span class="pl-c"># Make sure to check for the latest version when you install</span>
    <span class="pl-s1">url</span> <span class="pl-c1">=</span> <span class="pl-s">"https://github.com/bazelbuild/rules_postcss/archive/0.5.0.tar.gz"</span>,
    <span class="pl-s1">strip_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_postcss-0.5.0"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"3f0c754f97e3940ea90f4d6408bfb2aefb3850e7941572b22b1b88579c428ff9"</span>,
)
<span class="pl-en">load</span>(<span class="pl-s">"@build_bazel_rules_postcss//:package.bzl"</span>, <span class="pl-s">"rules_postcss_dependencies"</span>)
<span class="pl-en">rules_postcss_dependencies</span>()</pre></div>
<p dir="auto">This causes the build rules to be made available under
<code>@build_bazel_rules_postcss//:index.bzl</code>.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Basic Example</h2><a id="user-content-basic-example" class="anchor" aria-label="Permalink: Basic Example" href="#basic-example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To be documented.</p>
</article></div>