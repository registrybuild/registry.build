<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Bazel Kotlin Rules</h1><a id="user-content-bazel-kotlin-rules" class="anchor" aria-label="Permalink: Bazel Kotlin Rules" href="#bazel-kotlin-rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://buildkite.com/bazel/kotlin-postsubmit" rel="nofollow"><img src="https://camo.githubusercontent.com/76eaa530d359384b21f08ac48e72a121244049981b0f2d2733ed7659801287b8/68747470733a2f2f62616467652e6275696c646b6974652e636f6d2f61383836306539346137333738343931636538663530343830653336303562343965623235353863666138353162626639622e737667" alt="Build Status" data-canonical-src="https://badge.buildkite.com/a8860e94a7378491ce8f50480e3605b49eb2558cfa851bbf9b.svg" style="max-width: 100%;"></a>
<a href="https://github.com/bazelbuild/rules_kotlin/tree/master"><img src="https://camo.githubusercontent.com/2070e31de882971d79a4b3320d8d083cc3e51c5f76dbbf456dd04e348be4c599/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4d61696e2532304272616e63682d6d61737465722d626c75652e737667" data-canonical-src="https://img.shields.io/badge/Main%20Branch-master-blue.svg" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Releases</h3><a id="user-content-releases" class="anchor" aria-label="Permalink: Releases" href="#releases"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://github.com/bazelbuild/rules_kotlin/releases/latest"><img src="https://camo.githubusercontent.com/669fa03cd672f5d5e3e0c022ce5b7db53cd7adb06a67376a673ee69bca134e17/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f62617a656c6275696c642f72756c65735f6b6f746c696e3f646973706c61795f6e616d653d746167266c6162656c3d4c6174657374253230537461626c6525323052656c65617365" data-canonical-src="https://img.shields.io/github/v/release/bazelbuild/rules_kotlin?display_name=tag&amp;label=Latest%20Stable%20Release" style="max-width: 100%;"></a>
<br>
<a href="https://github.com/bazelbuild/rules_kotlin/releases/"><img src="https://camo.githubusercontent.com/a2dea1c0846cd1d0e04f466beb66759b347fa2deac80c04120d90837bc874da3/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f62617a656c6275696c642f72756c65735f6b6f746c696e3f646973706c61795f6e616d653d74616726696e636c7564655f70726572656c6561736573266c6162656c3d4c617465737425323052656c6561736525323043616e646964617465" data-canonical-src="https://img.shields.io/github/v/release/bazelbuild/rules_kotlin?display_name=tag&amp;include_prereleases&amp;label=Latest%20Release%20Candidate" style="max-width: 100%;"></a></p>
<p dir="auto">For more information about release and changelogs please see <a href="CHANGELOG.md">Changelog</a> or refer to the <a href="https://github.com/bazelbuild/rules_kotlin/releases">Github Releases</a> page.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto"><code>rules_kotlin</code> Bazel Compatibility</h1><a id="user-content-rules_kotlin-bazel-compatibility" class="anchor" aria-label="Permalink: rules_kotlin Bazel Compatibility" href="#rules_kotlin-bazel-compatibility"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>HEAD: <code>6</code>, <code>7</code></li>
<li><a href="https://github.com/bazelbuild/rules_kotlin/releases/tag/v1.9.1">Release 1.9</a>: <code>6</code>, <code>7</code></li>
<li><a href="https://github.com/bazelbuild/rules_kotlin/releases/tag/v1.8.1">Release 1.8</a>: <code>5</code>, <code>6</code></li>
<li><a href="https://github.com/bazelbuild/rules_kotlin/releases/tag/v1.7.1">Release 1.7</a>: <code>4</code>, <code>5</code>, <code>6</code></li>
</ul>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Overview</h1><a id="user-content-overview" class="anchor" aria-label="Permalink: Overview" href="#overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>rules_kotlin</strong> supports the basic paradigm of <code>*_binary</code>, <code>*_library</code>, <code>*_test</code> of other Bazel
language rules. It also supports <code>jvm</code>, <code>android</code>, and <code>js</code> flavors, with the prefix <code>kt_jvm</code>
and <code>kt_android</code> typically applied to the rules.</p>
<p dir="auto">Support for kotlin's -Xfriend-paths via the <code>associates=</code> attribute in the jvm allow access to
<code>internal</code> members.</p>
<p dir="auto">Also, <code>kt_jvm_*</code> rules support the following standard <code>java_*</code> rules attributes:</p>
<ul dir="auto">
<li><code>data</code></li>
<li><code>resource_jars</code></li>
<li><code>runtime_deps</code></li>
<li><code>resources</code></li>
<li><code>resources_strip_prefix</code></li>
<li><code>exports</code></li>
</ul>
<p dir="auto">Additionally, <code>kt_jvm_binary</code> and <code>kt_jvm_test</code> support environment variable configuration:</p>
<ul dir="auto">
<li><code>env</code> - Dictionary of environment variables to set when the target is executed with <code>bazel run</code> or <code>bazel test</code></li>
<li><code>env_inherit</code> - List of environment variable names to inherit from the shell environment</li>
</ul>
<p dir="auto">Android rules also support custom_package for <code>R.java</code> generation, <code>manifest=</code>, <code>resource_files</code>, etc.</p>
<p dir="auto">Other features:</p>
<ul dir="auto">
<li>Persistent worker support.</li>
<li>Mixed-Mode compilation (compile Java and Kotlin in one pass).</li>
<li>Configurable Kotlinc distribution and version</li>
<li>Configurable Toolchain</li>
<li>Support for all recent major Kotlin releases.</li>
</ul>
<p dir="auto">Javascript is reported to work, but is not as well maintained (at present)</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Documentation</h1><a id="user-content-documentation" class="anchor" aria-label="Permalink: Documentation" href="#documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Generated API documentation is available at
<a href="https://bazelbuild.github.io/rules_kotlin/kotlin" rel="nofollow">https://bazelbuild.github.io/rules_kotlin/kotlin</a>.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Quick Guide</h1><a id="user-content-quick-guide" class="anchor" aria-label="Permalink: Quick Guide" href="#quick-guide"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Installation</h2><a id="user-content-installation" class="anchor" aria-label="Permalink: Installation" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Copy from the
<a href="https://github.com/bazelbuild/rules_kotlin/releases">release you wish to use</a> either the Bzlmod or WORKSPACE snippet into your <code>MODULE.bazel</code> or <code>WORKSPACE</code> file respectively.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>WORKSPACE</code></h3><a id="user-content-workspace" class="anchor" aria-label="Permalink: WORKSPACE" href="#workspace"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In the project's <code>WORKSPACE</code>, declare the external repository and initialize the toolchains, like
this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;, &quot;http_archive&quot;)

rules_kotlin_version = &quot;1.9.0&quot;
rules_kotlin_sha = &quot;5766f1e599acf551aa56f49dab9ab9108269b03c557496c54acaf41f98e2b8d6&quot;
http_archive(
    name = &quot;rules_kotlin&quot;,
    urls = [&quot;https://github.com/bazelbuild/rules_kotlin/releases/download/v%s/rules_kotlin-v%s.tar.gz&quot; % (rules_kotlin_version, rules_kotlin_version)],
    sha256 = rules_kotlin_sha,
)

load(&quot;@rules_kotlin//kotlin:repositories.bzl&quot;, &quot;kotlin_repositories&quot;)
kotlin_repositories() # if you want the default. Otherwise see custom kotlinc distribution below

load(&quot;@rules_kotlin//kotlin:core.bzl&quot;, &quot;kt_register_toolchains&quot;)
kt_register_toolchains() # to use the default toolchain, otherwise see toolchains below"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_tools//tools/build_defs/repo:http.bzl"</span>, <span class="pl-s">"http_archive"</span>)

<span class="pl-s1">rules_kotlin_version</span> <span class="pl-c1">=</span> <span class="pl-s">"1.9.0"</span>
<span class="pl-s1">rules_kotlin_sha</span> <span class="pl-c1">=</span> <span class="pl-s">"5766f1e599acf551aa56f49dab9ab9108269b03c557496c54acaf41f98e2b8d6"</span>
<span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_kotlin"</span>,
    <span class="pl-s1">urls</span> <span class="pl-c1">=</span> [<span class="pl-s">"https://github.com/bazelbuild/rules_kotlin/releases/download/v%s/rules_kotlin-v%s.tar.gz"</span> <span class="pl-c1">%</span> (<span class="pl-s1">rules_kotlin_version</span>, <span class="pl-s1">rules_kotlin_version</span>)],
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s1">rules_kotlin_sha</span>,
)

<span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:repositories.bzl"</span>, <span class="pl-s">"kotlin_repositories"</span>)
<span class="pl-en">kotlin_repositories</span>() <span class="pl-c"># if you want the default. Otherwise see custom kotlinc distribution below</span>

<span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:core.bzl"</span>, <span class="pl-s">"kt_register_toolchains"</span>)
<span class="pl-en">kt_register_toolchains</span>() <span class="pl-c"># to use the default toolchain, otherwise see toolchains below</span></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto"><code>BUILD</code> files</h2><a id="user-content-build-files" class="anchor" aria-label="Permalink: BUILD files" href="#build-files"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In your project's <code>BUILD</code> files, load the Kotlin rules and use them like so:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_kotlin//kotlin:jvm.bzl&quot;, &quot;kt_jvm_library&quot;)

kt_jvm_library(
    name = &quot;package_name&quot;,
    srcs = glob([&quot;*.kt&quot;]),
    deps = [
        &quot;//path/to/dependency&quot;,
    ],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:jvm.bzl"</span>, <span class="pl-s">"kt_jvm_library"</span>)

<span class="pl-en">kt_jvm_library</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"package_name"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> <span class="pl-en">glob</span>([<span class="pl-s">"*.kt"</span>]),
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"//path/to/dependency"</span>,
    ],
)</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Custom toolchain</h2><a id="user-content-custom-toolchain" class="anchor" aria-label="Permalink: Custom toolchain" href="#custom-toolchain"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To enable a custom toolchain (to configure language level, etc.)
do the following.  In a <code>&lt;workspace&gt;/BUILD.bazel</code> file define the following:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_kotlin//kotlin:core.bzl&quot;, &quot;define_kt_toolchain&quot;)

define_kt_toolchain(
    name = &quot;kotlin_toolchain&quot;,
    api_version = KOTLIN_LANGUAGE_LEVEL,  # &quot;1.1&quot;, &quot;1.2&quot;, &quot;1.3&quot;, &quot;1.4&quot;, &quot;1.5&quot; &quot;1.6&quot;, &quot;1.7&quot;, &quot;1.8&quot;, or &quot;1.9&quot;
    jvm_target = JAVA_LANGUAGE_LEVEL, # &quot;1.6&quot;, &quot;1.8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;15&quot;, &quot;16&quot;, &quot;17&quot;, &quot;18&quot;, &quot;19&quot;, &quot;20&quot; or &quot;21&quot;
    language_version = KOTLIN_LANGUAGE_LEVEL,  # &quot;1.1&quot;, &quot;1.2&quot;, &quot;1.3&quot;, &quot;1.4&quot;, &quot;1.5&quot; &quot;1.6&quot;, &quot;1.7&quot;, &quot;1.8&quot;, or &quot;1.9&quot;
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:core.bzl"</span>, <span class="pl-s">"define_kt_toolchain"</span>)

<span class="pl-en">define_kt_toolchain</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"kotlin_toolchain"</span>,
    <span class="pl-s1">api_version</span> <span class="pl-c1">=</span> <span class="pl-c1">KOTLIN_LANGUAGE_LEVEL</span>,  <span class="pl-c"># "1.1", "1.2", "1.3", "1.4", "1.5" "1.6", "1.7", "1.8", or "1.9"</span>
    <span class="pl-s1">jvm_target</span> <span class="pl-c1">=</span> <span class="pl-c1">JAVA_LANGUAGE_LEVEL</span>, <span class="pl-c"># "1.6", "1.8", "9", "10", "11", "12", "13", "15", "16", "17", "18", "19", "20" or "21"</span>
    <span class="pl-s1">language_version</span> <span class="pl-c1">=</span> <span class="pl-c1">KOTLIN_LANGUAGE_LEVEL</span>,  <span class="pl-c"># "1.1", "1.2", "1.3", "1.4", "1.5" "1.6", "1.7", "1.8", or "1.9"</span>
)</pre></div>
<p dir="auto">and then in your <code>WORKSPACE</code> file, instead of <code>kt_register_toolchains()</code> do</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="register_toolchains(&quot;//:kotlin_toolchain&quot;)"><pre><span class="pl-en">register_toolchains</span>(<span class="pl-s">"//:kotlin_toolchain"</span>)</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Custom <code>kotlinc</code> distribution (and version)</h2><a id="user-content-custom-kotlinc-distribution-and-version" class="anchor" aria-label="Permalink: Custom kotlinc distribution (and version)" href="#custom-kotlinc-distribution-and-version"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To choose a different <code>kotlinc</code> distribution (1.3 and 1.4 variants supported), do the following
in your <code>WORKSPACE</code> file (or import from a <code>.bzl</code> file:</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>MODULE.bazel</code></h3><a id="user-content-modulebazel" class="anchor" aria-label="Permalink: MODULE.bazel" href="#modulebazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="rules_kotlin_extensions = use_extension(&quot;@rules_kotlin//src/main/starlark/core/repositories:bzlmod_setup.bzl&quot;, &quot;rules_kotlin_extensions&quot;)
rules_kotlin_extensions.kotlinc_version(
    version = &quot;2.1.20&quot;,
    sha256 = &quot;a118197b0de55ffab2bc8d5cd03a5e39033cfb53383d6931bc761dec0784891a&quot;
)
use_repo(rules_kotlin_extensions, &quot;com_github_google_ksp&quot;, &quot;com_github_jetbrains_kotlin&quot;, &quot;com_github_jetbrains_kotlin_git&quot;, &quot;com_github_pinterest_ktlint&quot;, &quot;kotlinx_serialization_core_jvm&quot;, &quot;kotlinx_serialization_json&quot;, &quot;kotlinx_serialization_json_jvm&quot;)"><pre><span class="pl-s1">rules_kotlin_extensions</span> <span class="pl-c1">=</span> <span class="pl-en">use_extension</span>(<span class="pl-s">"@rules_kotlin//src/main/starlark/core/repositories:bzlmod_setup.bzl"</span>, <span class="pl-s">"rules_kotlin_extensions"</span>)
<span class="pl-s1">rules_kotlin_extensions</span>.<span class="pl-c1">kotlinc_version</span>(
    <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"2.1.20"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"a118197b0de55ffab2bc8d5cd03a5e39033cfb53383d6931bc761dec0784891a"</span>
)
<span class="pl-en">use_repo</span>(<span class="pl-s1">rules_kotlin_extensions</span>, <span class="pl-s">"com_github_google_ksp"</span>, <span class="pl-s">"com_github_jetbrains_kotlin"</span>, <span class="pl-s">"com_github_jetbrains_kotlin_git"</span>, <span class="pl-s">"com_github_pinterest_ktlint"</span>, <span class="pl-s">"kotlinx_serialization_core_jvm"</span>, <span class="pl-s">"kotlinx_serialization_json"</span>, <span class="pl-s">"kotlinx_serialization_json_jvm"</span>)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>WORKSPACE</code></h3><a id="user-content-workspace-1" class="anchor" aria-label="Permalink: WORKSPACE" href="#workspace-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_kotlin//kotlin:repositories.bzl&quot;, &quot;kotlin_repositories&quot;, &quot;kotlinc_version&quot;)

kotlin_repositories(
    compiler_release = kotlinc_version(
        release = &quot;2.1.20&quot;,
        sha256 = &quot;a118197b0de55ffab2bc8d5cd03a5e39033cfb53383d6931bc761dec0784891a&quot;
    )
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:repositories.bzl"</span>, <span class="pl-s">"kotlin_repositories"</span>, <span class="pl-s">"kotlinc_version"</span>)

<span class="pl-en">kotlin_repositories</span>(
    <span class="pl-s1">compiler_release</span> <span class="pl-c1">=</span> <span class="pl-en">kotlinc_version</span>(
        <span class="pl-s1">release</span> <span class="pl-c1">=</span> <span class="pl-s">"2.1.20"</span>,
        <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"a118197b0de55ffab2bc8d5cd03a5e39033cfb53383d6931bc761dec0784891a"</span>
    )
)</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Third party dependencies</h2><a id="user-content-third-party-dependencies" class="anchor" aria-label="Permalink: Third party dependencies" href="#third-party-dependencies"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><em>(e.g. Maven artifacts)</em></p>
<p dir="auto">Third party (external) artifacts can be brought in with systems such as <a href="https://github.com/bazelbuild/rules_jvm_external"><code>rules_jvm_external</code></a> or <a href="https://github.com/square/bazel_maven_repository"><code>bazel_maven_repository</code></a> or <a href="https://github.com/johnynek/bazel-deps"><code>bazel-deps</code></a>, but make sure the version you use doesn't naively use <code>java_import</code>, as this will cause bazel to make an interface-only (<code>ijar</code>), or ABI jar, and the native <code>ijar</code> tool does not know about kotlin metadata with respect to inlined functions, and will remove method bodies inappropriately.  Recent versions of <code>rules_jvm_external</code> and <code>bazel_maven_repository</code> are known to work with Kotlin.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Development Setup</h2><a id="user-content-development-setup" class="anchor" aria-label="Permalink: Development Setup" href="#development-setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For local development of rules_kotlin:</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">With Bzlmod</h4><a id="user-content-with-bzlmod" class="anchor" aria-label="Permalink: With Bzlmod" href="#with-bzlmod"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="local_path_override(
    module_name = &quot;rules_kotlin&quot;,
    path = &quot;../path/to/rules_kotlin_clone/&quot;,
)"><pre><span class="pl-en">local_path_override</span>(
    <span class="pl-s1">module_name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_kotlin"</span>,
    <span class="pl-s1">path</span> <span class="pl-c1">=</span> <span class="pl-s">"../path/to/rules_kotlin_clone/"</span>,
)</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">From HEAD (Bzlmod)</h4><a id="user-content-from-head-bzlmod" class="anchor" aria-label="Permalink: From HEAD (Bzlmod)" href="#from-head-bzlmod"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="_RULES_KOTLIN_COMMIT = &quot;HEAD_COMMIT_SHA&quot;

archive_override(
    module_name = &quot;rules_kotlin&quot;,
    integrity = &quot;sha256-...&quot;,
    strip_prefix = &quot;rules_kotlin-%s&quot; % _RULES_KOTLIN_COMMIT,
    urls = [&quot;https://github.com/bazelbuild/rules_kotlin/archive/%s.tar.gz&quot; % _RULES_KOTLIN_COMMIT],
)"><pre><span class="pl-s1">_RULES_KOTLIN_COMMIT</span> <span class="pl-c1">=</span> <span class="pl-s">"HEAD_COMMIT_SHA"</span>

<span class="pl-en">archive_override</span>(
    <span class="pl-s1">module_name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_kotlin"</span>,
    <span class="pl-s1">integrity</span> <span class="pl-c1">=</span> <span class="pl-s">"sha256-..."</span>,
    <span class="pl-s1">strip_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_kotlin-%s"</span> <span class="pl-c1">%</span> <span class="pl-s1">_RULES_KOTLIN_COMMIT</span>,
    <span class="pl-s1">urls</span> <span class="pl-c1">=</span> [<span class="pl-s">"https://github.com/bazelbuild/rules_kotlin/archive/%s.tar.gz"</span> <span class="pl-c1">%</span> <span class="pl-s1">_RULES_KOTLIN_COMMIT</span>],
)</pre></div>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Debugging native actions</h1><a id="user-content-debugging-native-actions" class="anchor" aria-label="Permalink: Debugging native actions" href="#debugging-native-actions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To attach debugger and step through native action code when using local checkout of rules_kotlin repo :</p>
<ol dir="auto">
<li>Open <code>rules_kotlin</code> project in Android Studio, using existing <code>.bazelproject</code> file as project view.</li>
<li>In terminal, build the kotlin target you want to debug, using the subcommand option, ex: <code>bazel build //lib/mylib:main_kt -s</code>. You can also use <code>bazel aquery</code> to get this info.</li>
<li>Locate the subcommand for the kotlin action you want to debug, let's say <code>KotlinCompile</code>. Note: If you don't see it, target rebuild may have been skipped (in this case <code>touch</code> one of the source .kt file to trigger rebuild).</li>
<li>Export <code>REPOSITORY_NAME</code> as specified in action env, ex : <code>export REPOSITORY_NAME=rules_kotlin</code></li>
<li>Copy the command line, ex : <code>bazel-out/darwin_arm64-opt-exec-2B5CBBC6/bin/external/rules_kotlin/src/main/kotlin/build '--flagfile=bazel-out/darwin_arm64-fastbuild/bin/lib/mylib/main_kt-kt.jar-0.params'</code></li>
<li>Change directory into the <a href="https://bazel.build/remote/output-directories#layout-diagram" rel="nofollow">execRoot</a>, normally <code>bazel-MYPROJECT</code>, available via <code>bazel info | grep execution_root</code>.</li>
<li>Add <code>--debug=5005</code> to command line to make the action wait for a debugger to attach, ex: <code>bazel-out/darwin_arm64-opt-exec-2B5CBBC6/bin/external/rules_kotlin/src/main/kotlin/build --debug=5005 '--flagfile=bazel-out/darwin_arm64-fastbuild/bin/lib/mylib/main_kt-kt.jar-0.params'</code>. Note: if command invokes <code>java</code> toolchain directly, use <code>-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005</code> instead.</li>
<li>You should see in output that action is waiting for debugger. Use a default <code>Remote JVM Debug</code> configuration in Android Studio, set breakpoint in kotlin action java/kt code, and attach debugger. Breakpoints should be hit.</li>
</ol>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Kotlin and Java compiler flags</h1><a id="user-content-kotlin-and-java-compiler-flags" class="anchor" aria-label="Permalink: Kotlin and Java compiler flags" href="#kotlin-and-java-compiler-flags"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>kt_kotlinc_options</code> and <code>kt_javac_options</code> rules allows passing compiler flags to kotlinc and javac.</p>
<p dir="auto">Note: Not all compiler flags are supported in all language versions. When this happens, the rules will fail.</p>
<p dir="auto">For example you can define global compiler flags by doing:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_kotlin//kotlin:core.bzl&quot;, &quot;kt_kotlinc_options&quot;, &quot;kt_javac_options&quot;, &quot;define_kt_toolchain&quot;)

kt_kotlinc_options(
    name = &quot;kt_kotlinc_options&quot;,
    x_no_param_assertions = True,
    jvm_target = &quot;1.8&quot;,
)

kt_javac_options(
    name = &quot;kt_javac_options&quot;,
    warn = &quot;off&quot;,
)

define_kt_toolchain(
    name = &quot;kotlin_toolchain&quot;,
    kotlinc_options = &quot;//:kt_kotlinc_options&quot;,
    javac_options = &quot;//:kt_javac_options&quot;,
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:core.bzl"</span>, <span class="pl-s">"kt_kotlinc_options"</span>, <span class="pl-s">"kt_javac_options"</span>, <span class="pl-s">"define_kt_toolchain"</span>)

<span class="pl-en">kt_kotlinc_options</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"kt_kotlinc_options"</span>,
    <span class="pl-s1">x_no_param_assertions</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>,
    <span class="pl-s1">jvm_target</span> <span class="pl-c1">=</span> <span class="pl-s">"1.8"</span>,
)

<span class="pl-en">kt_javac_options</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"kt_javac_options"</span>,
    <span class="pl-s1">warn</span> <span class="pl-c1">=</span> <span class="pl-s">"off"</span>,
)

<span class="pl-en">define_kt_toolchain</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"kotlin_toolchain"</span>,
    <span class="pl-s1">kotlinc_options</span> <span class="pl-c1">=</span> <span class="pl-s">"//:kt_kotlinc_options"</span>,
    <span class="pl-s1">javac_options</span> <span class="pl-c1">=</span> <span class="pl-s">"//:kt_javac_options"</span>,
)</pre></div>
<p dir="auto">You can optionally override compiler flags at the target level by providing an alternative set of <code>kt_kotlinc_options</code> or <code>kt_javac_options</code> in your target definitions.</p>
<p dir="auto">Compiler flags that are passed to the rule definitions will be taken over the toolchain definition.</p>
<p dir="auto">Example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_kotlin//kotlin:core.bzl&quot;, &quot;kt_kotlinc_options&quot;, &quot;kt_javac_options&quot;)
load(&quot;@rules_kotlin//kotlin:jvm.bzl&quot;, &quot;kt_jvm_library&quot;)

kt_kotlinc_options(
    name = &quot;kt_kotlinc_options_for_package_name&quot;,
    x_no_param_assertions = True,
    x_optin = [
        &quot;kotlin.Experimental&quot;,
        &quot;kotlin.ExperimentalStdlibApi&quot;,
    ],
)

kt_javac_options(
    name = &quot;kt_javac_options_for_package_name&quot;,
    warn = &quot;off&quot;
)

kt_jvm_library(
    name = &quot;package_name&quot;,
    srcs = glob([&quot;*.kt&quot;]),
    kotlinc_opts = &quot;//:kt_kotlinc_options_for_package_name&quot;,
    javac_opts = &quot;//:kt_javac_options_for_package_name&quot;,
    deps = [&quot;//path/to/dependency&quot;],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:core.bzl"</span>, <span class="pl-s">"kt_kotlinc_options"</span>, <span class="pl-s">"kt_javac_options"</span>)
<span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:jvm.bzl"</span>, <span class="pl-s">"kt_jvm_library"</span>)

<span class="pl-en">kt_kotlinc_options</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"kt_kotlinc_options_for_package_name"</span>,
    <span class="pl-s1">x_no_param_assertions</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>,
    <span class="pl-s1">x_optin</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"kotlin.Experimental"</span>,
        <span class="pl-s">"kotlin.ExperimentalStdlibApi"</span>,
    ],
)

<span class="pl-en">kt_javac_options</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"kt_javac_options_for_package_name"</span>,
    <span class="pl-s1">warn</span> <span class="pl-c1">=</span> <span class="pl-s">"off"</span>
)

<span class="pl-en">kt_jvm_library</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"package_name"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> <span class="pl-en">glob</span>([<span class="pl-s">"*.kt"</span>]),
    <span class="pl-s1">kotlinc_opts</span> <span class="pl-c1">=</span> <span class="pl-s">"//:kt_kotlinc_options_for_package_name"</span>,
    <span class="pl-s1">javac_opts</span> <span class="pl-c1">=</span> <span class="pl-s">"//:kt_javac_options_for_package_name"</span>,
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [<span class="pl-s">"//path/to/dependency"</span>],
)</pre></div>
<p dir="auto">Additionally, you can add options for both tracing and timing of the bazel build using the <code>kt_trace</code> and <code>kt_timings</code> flags, for example:</p>
<ul dir="auto">
<li><code>bazel build --define=kt_trace=1</code></li>
<li><code>bazel build --define=kt_timings=1</code></li>
</ul>
<p dir="auto"><code>kt_trace=1</code> will allow you to inspect the full kotlinc commandline invocation, while <code>kt_timings=1</code> will report the high level time taken for each step.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">KSP (Kotlin Symbol Processing)</h1><a id="user-content-ksp-kotlin-symbol-processing" class="anchor" aria-label="Permalink: KSP (Kotlin Symbol Processing)" href="#ksp-kotlin-symbol-processing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">KSP is officially supported as of <code>rules_kotlin</code> 1.8 and can be declared using the new
<code>kt_ksp_plugin</code> rule.</p>
<p dir="auto">Note:</p>
<ul dir="auto">
<li>KSP is <a href="https://github.com/google/ksp/issues/1385" data-hovercard-type="issue" data-hovercard-url="/google/ksp/issues/1385/hovercard">not yet thread safe</a> and will likely fail if you are using it in a build that has multiplex workers enabled. To work around this add the following flag to your Bazelrc:
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="build --experimental_worker_max_multiplex_instances=KotlinKsp=1"><pre class="notranslate"><code>build --experimental_worker_max_multiplex_instances=KotlinKsp=1
</code></pre></div>
</li>
</ul>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_kotlin//kotlin:core.bzl&quot;, &quot;kt_ksp_plugin&quot;)
load(&quot;@rules_kotlin//kotlin:jvm.bzl&quot;, &quot;kt_jvm_library&quot;)

kt_ksp_plugin(
    name = &quot;moshi-kotlin-codegen&quot;,
    processor_class = &quot;com.squareup.moshi.kotlin.codegen.ksp.JsonClassSymbolProcessorProvider&quot;,
    deps = [
        &quot;@maven//:com_squareup_moshi_moshi&quot;,
        &quot;@maven//:com_squareup_moshi_moshi_kotlin&quot;,
        &quot;@maven//:com_squareup_moshi_moshi_kotlin_codegen&quot;,
    ],
)

kt_jvm_library(
    name = &quot;lib&quot;,
    srcs = glob([&quot;*.kt&quot;]),
    plugins = [&quot;//:moshi-kotlin-codegen&quot;],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:core.bzl"</span>, <span class="pl-s">"kt_ksp_plugin"</span>)
<span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:jvm.bzl"</span>, <span class="pl-s">"kt_jvm_library"</span>)

<span class="pl-en">kt_ksp_plugin</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"moshi-kotlin-codegen"</span>,
    <span class="pl-s1">processor_class</span> <span class="pl-c1">=</span> <span class="pl-s">"com.squareup.moshi.kotlin.codegen.ksp.JsonClassSymbolProcessorProvider"</span>,
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"@maven//:com_squareup_moshi_moshi"</span>,
        <span class="pl-s">"@maven//:com_squareup_moshi_moshi_kotlin"</span>,
        <span class="pl-s">"@maven//:com_squareup_moshi_moshi_kotlin_codegen"</span>,
    ],
)

<span class="pl-en">kt_jvm_library</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"lib"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> <span class="pl-en">glob</span>([<span class="pl-s">"*.kt"</span>]),
    <span class="pl-s1">plugins</span> <span class="pl-c1">=</span> [<span class="pl-s">"//:moshi-kotlin-codegen"</span>],
)</pre></div>
<p dir="auto">To choose a different <code>ksp_version</code> distribution,
do the following in your repository.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>MODULE.bazel</code></h3><a id="user-content-modulebazel-1" class="anchor" aria-label="Permalink: MODULE.bazel" href="#modulebazel-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="rules_kotlin_extensions = use_extension(&quot;@rules_kotlin//src/main/starlark/core/repositories:bzlmod_setup.bzl&quot;, &quot;rules_kotlin_extensions&quot;)
rules_kotlin_extensions.ksp_version(
    version = &quot;1.8.22-1.0.11&quot;,
    sha256 = &quot;2ce5a08fddd20ef07ac051615905453fe08c3ba3ce5afa5dc43a9b77aa64507d&quot;,
)
use_repo(rules_kotlin_extensions, &quot;com_github_google_ksp&quot;, &quot;com_github_jetbrains_kotlin&quot;, &quot;com_github_jetbrains_kotlin_git&quot;, &quot;com_github_pinterest_ktlint&quot;, &quot;kotlinx_serialization_core_jvm&quot;, &quot;kotlinx_serialization_json&quot;, &quot;kotlinx_serialization_json_jvm&quot;)"><pre><span class="pl-s1">rules_kotlin_extensions</span> <span class="pl-c1">=</span> <span class="pl-en">use_extension</span>(<span class="pl-s">"@rules_kotlin//src/main/starlark/core/repositories:bzlmod_setup.bzl"</span>, <span class="pl-s">"rules_kotlin_extensions"</span>)
<span class="pl-s1">rules_kotlin_extensions</span>.<span class="pl-c1">ksp_version</span>(
    <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"1.8.22-1.0.11"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"2ce5a08fddd20ef07ac051615905453fe08c3ba3ce5afa5dc43a9b77aa64507d"</span>,
)
<span class="pl-en">use_repo</span>(<span class="pl-s1">rules_kotlin_extensions</span>, <span class="pl-s">"com_github_google_ksp"</span>, <span class="pl-s">"com_github_jetbrains_kotlin"</span>, <span class="pl-s">"com_github_jetbrains_kotlin_git"</span>, <span class="pl-s">"com_github_pinterest_ktlint"</span>, <span class="pl-s">"kotlinx_serialization_core_jvm"</span>, <span class="pl-s">"kotlinx_serialization_json"</span>, <span class="pl-s">"kotlinx_serialization_json_jvm"</span>)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>WORKSPACE</code> (or import from a <code>.bzl</code> file):</h3><a id="user-content-workspace-or-import-from-a-bzl-file" class="anchor" aria-label="Permalink: WORKSPACE (or import from a .bzl file):" href="#workspace-or-import-from-a-bzl-file"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_kotlin//kotlin:repositories.bzl&quot;, &quot;kotlin_repositories&quot;, &quot;ksp_version&quot;)

kotlin_repositories(
    ksp_compiler_release = ksp_version(
        release = &quot;1.8.22-1.0.11&quot;,
        sha256 = &quot;2ce5a08fddd20ef07ac051615905453fe08c3ba3ce5afa5dc43a9b77aa64507d&quot;,
    ),
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:repositories.bzl"</span>, <span class="pl-s">"kotlin_repositories"</span>, <span class="pl-s">"ksp_version"</span>)

<span class="pl-en">kotlin_repositories</span>(
    <span class="pl-s1">ksp_compiler_release</span> <span class="pl-c1">=</span> <span class="pl-en">ksp_version</span>(
        <span class="pl-s1">release</span> <span class="pl-c1">=</span> <span class="pl-s">"1.8.22-1.0.11"</span>,
        <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"2ce5a08fddd20ef07ac051615905453fe08c3ba3ce5afa5dc43a9b77aa64507d"</span>,
    ),
)</pre></div>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Kotlin compiler plugins</h1><a id="user-content-kotlin-compiler-plugins" class="anchor" aria-label="Permalink: Kotlin compiler plugins" href="#kotlin-compiler-plugins"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>kt_compiler_plugin</code> rule allows running Kotlin compiler plugins, such as no-arg, sam-with-receiver and allopen.</p>
<p dir="auto">For example, you can add allopen to your project like this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_kotlin//kotlin:core.bzl&quot;, &quot;kt_compiler_plugin&quot;)
load(&quot;@rules_kotlin//kotlin:jvm.bzl&quot;, &quot;kt_jvm_library&quot;)

kt_compiler_plugin(
    name = &quot;open_for_testing_plugin&quot;,
    id = &quot;org.jetbrains.kotlin.allopen&quot;,
    options = {
        &quot;annotation&quot;: &quot;plugin.allopen.OpenForTesting&quot;,
    },
    deps = [
        &quot;//kotlin/compiler:allopen-compiler-plugin&quot;,
    ],
)

kt_jvm_library(
    name = &quot;user&quot;,
    srcs = [&quot;User.kt&quot;], # The User class is annotated with OpenForTesting
    plugins = [
        &quot;:open_for_testing_plugin&quot;,
    ],
    deps = [
        &quot;:open_for_testing&quot;, # This contains the annotation (plugin.allopen.OpenForTesting)
    ],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:core.bzl"</span>, <span class="pl-s">"kt_compiler_plugin"</span>)
<span class="pl-en">load</span>(<span class="pl-s">"@rules_kotlin//kotlin:jvm.bzl"</span>, <span class="pl-s">"kt_jvm_library"</span>)

<span class="pl-en">kt_compiler_plugin</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"open_for_testing_plugin"</span>,
    <span class="pl-s1">id</span> <span class="pl-c1">=</span> <span class="pl-s">"org.jetbrains.kotlin.allopen"</span>,
    <span class="pl-s1">options</span> <span class="pl-c1">=</span> {
        <span class="pl-s">"annotation"</span>: <span class="pl-s">"plugin.allopen.OpenForTesting"</span>,
    },
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"//kotlin/compiler:allopen-compiler-plugin"</span>,
    ],
)

<span class="pl-en">kt_jvm_library</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"user"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"User.kt"</span>], <span class="pl-c"># The User class is annotated with OpenForTesting</span>
    <span class="pl-s1">plugins</span> <span class="pl-c1">=</span> [
        <span class="pl-s">":open_for_testing_plugin"</span>,
    ],
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
        <span class="pl-s">":open_for_testing"</span>, <span class="pl-c"># This contains the annotation (plugin.allopen.OpenForTesting)</span>
    ],
)</pre></div>
<p dir="auto">Full examples of using compiler plugins can be found <a href="examples/plugin">here</a>.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Creating Rule Releases</h2><a id="user-content-creating-rule-releases" class="anchor" aria-label="Permalink: Creating Rule Releases" href="#creating-rule-releases"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A new release can be published by just pushing a tag.</p>
<p dir="auto">Once the tag is pushed, GitHub Actions will build, test, and publish a release to both GitHub releases and the BCR.</p>
<p dir="auto">A tag can be created and pushed by doing the following:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="git tag v4.13
git push origin v4.13"><pre class="notranslate"><code>git tag v4.13
git push origin v4.13
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Examples</h2><a id="user-content-examples" class="anchor" aria-label="Permalink: Examples" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Examples can be found in the <a href="https://github.com/bazelbuild/rules_kotlin/tree/master/examples">examples directory</a>, including usage with Android, Dagger, Node-JS, Kotlin compiler plugins, etc.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">History</h1><a id="user-content-history" class="anchor" aria-label="Permalink: History" href="#history"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">These rules were initially forked from <a href="http://github.com/pubref/rules_kotlin">pubref/rules_kotlin</a>, and then re-forked from <a href="http://github.com/bazelbuild/rules_kotlin">bazelbuild/rules_kotlin</a>. They were merged back into this repository in October, 2019.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">License</h1><a id="user-content-license" class="anchor" aria-label="Permalink: License" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This project is licensed under the <a href="LICENSE">Apache 2.0 license</a>, as are all contributions</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Contributing</h1><a id="user-content-contributing" class="anchor" aria-label="Permalink: Contributing" href="#contributing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">See the <a href="CONTRIBUTING.md">CONTRIBUTING</a> doc for information about how to contribute to
this project.</p>
</article></div>