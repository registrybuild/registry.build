<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Ada</h1><a id="user-content-ada" class="anchor" aria-label="Permalink: Ada" href="#ada"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://securityscorecards.dev/viewer/?uri=github.com/ada-url/ada" rel="nofollow"><img src="https://camo.githubusercontent.com/2432a82fa39b01d95420cf79568e2927546a18bc12978bb3eec9616870e33b29/68747470733a2f2f6170692e736563757269747973636f726563617264732e6465762f70726f6a656374732f6769746875622e636f6d2f6164612d75726c2f6164612f6261646765" alt="OpenSSF Scorecard" data-canonical-src="https://api.securityscorecards.dev/projects/github.com/ada-url/ada/badge" style="max-width: 100%;"></a>
<a href="https://bestpractices.coreinfrastructure.org/projects/7085" rel="nofollow"><img src="https://camo.githubusercontent.com/c5a5bce1c82ed21a7f805e259db62bb62f0bd0391b56c4d1e67b885168a21185/68747470733a2f2f626573747072616374696365732e636f7265696e6672617374727563747572652e6f72672f70726f6a656374732f373038352f6261646765" alt="OpenSSF Best Practices" data-canonical-src="https://bestpractices.coreinfrastructure.org/projects/7085/badge" style="max-width: 100%;"></a>
<a href="https://github.com/ada-url/ada/actions/workflows/ubuntu.yml"><img src="https://github.com/ada-url/ada/actions/workflows/ubuntu.yml/badge.svg" alt="Ubuntu 22.04" style="max-width: 100%;"></a>
<a href="https://github.com/ada-url/ada/actions/workflows/visual_studio.yml"><img src="https://github.com/ada-url/ada/actions/workflows/visual_studio.yml/badge.svg" alt="VS17-CI" style="max-width: 100%;"></a>
<a href="https://github.com/ada-url/ada/actions/workflows/visual_studio_clang.yml"><img src="https://github.com/ada-url/ada/actions/workflows/visual_studio_clang.yml/badge.svg" alt="VS17-clang-CI" style="max-width: 100%;"></a>
<a href="https://github.com/ada-url/ada/actions/workflows/ubuntu-s390x.yml"><img src="https://github.com/ada-url/ada/actions/workflows/ubuntu-s390x.yml/badge.svg" alt="Ubuntu s390x (GCC 11)" style="max-width: 100%;"></a></p>
<p dir="auto">Ada is a fast and spec-compliant URL parser written in C++.
Specification for URL parser can be found from the
<a href="https://url.spec.whatwg.org/#url-parsing" rel="nofollow">WHATWG</a> website.</p>
<p dir="auto">Ada library also includes a <a href="https://url.spec.whatwg.org/#urlpattern" rel="nofollow">URLPattern</a> implementation
that is compatible with the <a href="https://github.com/web-platform-tests/wpt/tree/master/urlpattern">web-platform tests</a>.</p>
<p dir="auto">The Ada library passes the full range of tests from the specification,
across a wide range of platforms (e.g., Windows, Linux, macOS). It fully
supports the relevant <a href="https://www.unicode.org/reports/tr46/#ToUnicode" rel="nofollow">Unicode Technical Standard</a>.</p>
<p dir="auto">A common use of a URL parser is to take a URL string and normalize it.
The WHATWG URL specification has been adopted by most browsers.  Other tools, such as curl and many
standard libraries, follow the RFC 3986. The following table illustrates possible differences in practice
(encoding of the host, encoding of the path):</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th align="left">string source</th>
<th align="left">string value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">input string</td>
<td align="left"><a href="https://www.7%E2%80%91Eleven.com/Home/Privacy/Montr%C3%A9al" rel="nofollow">https://www.7‑Eleven.com/Home/Privacy/Montréal</a></td>
</tr>
<tr>
<td align="left">ada's normalized string</td>
<td align="left"><a href="https://www.xn--7eleven-506c.com/Home/Privacy/Montr%C3%A9al" rel="nofollow">https://www.xn--7eleven-506c.com/Home/Privacy/Montr%C3%A9al</a></td>
</tr>
<tr>
<td align="left">curl 7.87</td>
<td align="left">(returns the original unchanged)</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Ada is fast.</h2><a id="user-content-ada-is-fast" class="anchor" aria-label="Permalink: Ada is fast." href="#ada-is-fast"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">On a benchmark where we need to validate and normalize <a href="https://github.com/ada-url/url-various-datasets/tree/main/top100">thousands URLs found
on popular websites</a>,
we find that ada can be several times faster than popular competitors (system: Apple MacBook 2022
with LLVM 14).</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="      ada ▏  188 ns/URL ███▏
servo url ▏  664 ns/URL ███████████▎
     CURL ▏ 1471 ns/URL █████████████████████████"><pre class="notranslate"><code>      ada ▏  188 ns/URL ███▏
servo url ▏  664 ns/URL ███████████▎
     CURL ▏ 1471 ns/URL █████████████████████████
</code></pre></div>
<p dir="auto">Ada has improved the performance of the popular JavaScript environment Node.js:</p>
<blockquote>
<p dir="auto">Since Node.js 18, a new URL parser dependency was added to Node.js — Ada. This addition bumped the Node.js performance when parsing URLs to a new level. Some results could reach up to an improvement of <strong>400%</strong>. (<a href="https://blog.rafaelgss.dev/state-of-nodejs-performance-2023" rel="nofollow">State of Node.js Performance 2023</a>)</p>
</blockquote>
<p dir="auto">The Ada library is used by important systems besides Node.js such as Redpanda, Kong, Telegram, DataDog, and Cloudflare Workers.</p>
<p dir="auto"><a href="https://www.youtube.com/watch?v=tQ-6OWRDsZg" rel="nofollow"><img src="https://camo.githubusercontent.com/3fb54567cec95aee1f55091e2e14d65832f6956e07ad2ffe3605f97cb88a9d7b/687474703a2f2f696d672e796f75747562652e636f6d2f76692f74512d364f575244735a672f302e6a7067" alt="the ada library" data-canonical-src="http://img.youtube.com/vi/tQ-6OWRDsZg/0.jpg" style="max-width: 100%;"></a><br></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Requirements</h3><a id="user-content-requirements" class="anchor" aria-label="Permalink: Requirements" href="#requirements"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The project is otherwise self-contained and it has no dependency.
A recent C++ compiler supporting C++20. We test GCC 12 or better, LLVM 14 or better and Microsoft Visual Studio 2022.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Installation</h2><a id="user-content-installation" class="anchor" aria-label="Permalink: Installation" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Binary packages for the following systems are currently available:</p>
<p dir="auto"><a href="https://repology.org/project/ada/versions" rel="nofollow"><img src="https://camo.githubusercontent.com/ea59bce1e2b2408456890de2f9ec901f0637868770dff5c2bcaa334266819646/68747470733a2f2f7265706f6c6f67792e6f72672f62616467652f766572746963616c2d616c6c7265706f732f6164612e737667" alt="Packaging status" data-canonical-src="https://repology.org/badge/vertical-allrepos/ada.svg" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Quick Start</h2><a id="user-content-quick-start" class="anchor" aria-label="Permalink: Quick Start" href="#quick-start"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Linux or macOS users might follow the following instructions if they have a recent C++ compiler installed and a standard utility (<code>wget</code>)</p>
<ol dir="auto">
<li>
<p dir="auto">Pull the library in a directory</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="wget https://github.com/ada-url/ada/releases/download/v3.0.0/ada.cpp
wget https://github.com/ada-url/ada/releases/download/v3.0.0/ada.h"><pre class="notranslate"><code>wget https://github.com/ada-url/ada/releases/download/v3.0.0/ada.cpp
wget https://github.com/ada-url/ada/releases/download/v3.0.0/ada.h
</code></pre></div>
</li>
<li>
<p dir="auto">Create a new file named <code>demo.cpp</code> with this content:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content=" #include &quot;ada.cpp&quot;
 #include &quot;ada.h&quot;
 #include &lt;iostream&gt;

 int main(int, char *[]) {
   auto url = ada::parse(&quot;https://www.google.com&quot;);
   if (!url) {
     std::cout &lt;&lt; &quot;failure&quot; &lt;&lt; std::endl;
     return EXIT_FAILURE;
   }
   url-&gt;set_protocol(&quot;http&quot;);
   std::cout &lt;&lt; url-&gt;get_protocol() &lt;&lt; std::endl;
   std::cout &lt;&lt; url-&gt;get_host() &lt;&lt; std::endl;
   return EXIT_SUCCESS;
 }"><pre> #<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">"</span>ada.cpp<span class="pl-pds">"</span></span>
 #<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">"</span>ada.h<span class="pl-pds">"</span></span>
 #<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>iostream<span class="pl-pds">&gt;</span></span>

 <span class="pl-k">int</span> <span class="pl-en">main</span>(<span class="pl-k">int</span>, <span class="pl-k">char</span> *[]) {
   <span class="pl-k">auto</span> url = <span class="pl-c1">ada::parse</span>(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>);
   <span class="pl-k">if</span> (!url) {
     std::cout &lt;&lt; <span class="pl-s"><span class="pl-pds">"</span>failure<span class="pl-pds">"</span></span> &lt;&lt; std::endl;
     <span class="pl-k">return</span> EXIT_FAILURE;
   }
   url-&gt;<span class="pl-c1">set_protocol</span>(<span class="pl-s"><span class="pl-pds">"</span>http<span class="pl-pds">"</span></span>);
   std::cout &lt;&lt; url-&gt;<span class="pl-c1">get_protocol</span>() &lt;&lt; std::endl;
   std::cout &lt;&lt; url-&gt;<span class="pl-c1">get_host</span>() &lt;&lt; std::endl;
   <span class="pl-k">return</span> EXIT_SUCCESS;
 }</pre></div>
</li>
<li>
<p dir="auto">Compile</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="c++ -std=c++20 -o demo demo.cpp"><pre class="notranslate"><code>c++ -std=c++20 -o demo demo.cpp
</code></pre></div>
</li>
<li>
<p dir="auto"><code>./demo</code></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="http:
www.google.com"><pre class="notranslate"><code>http:
www.google.com
</code></pre></div>
</li>
</ol>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Bindings of Ada</h2><a id="user-content-bindings-of-ada" class="anchor" aria-label="Permalink: Bindings of Ada" href="#bindings-of-ada"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The following libraries are maintained by the Ada team and available under <a href="https://github.com/ada-url">Ada GitHub organization</a>.</p>
<ul dir="auto">
<li><a href="https://github.com/ada-url/rust">Rust</a>: Rust bindings for Ada</li>
<li><a href="https://github.com/ada-url/goada">Go</a>: Go bindings for Ada</li>
<li><a href="https://github.com/ada-url/python">Python</a>: Python bindings for Ada</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Community maintained</h3><a id="user-content-community-maintained" class="anchor" aria-label="Permalink: Community maintained" href="#community-maintained"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://github.com/schochastics/adaR">R</a>: R wrapper for Ada</li>
<li><a href="https://github.com/lnear-dev/ada-url">PHP</a>: PHP Wrapper for Ada URL</li>
<li><a href="https://github.com/bungle/lua-resty-ada">LuaJIT</a>: LuaJIT FFI bindings for Ada</li>
<li><a href="https://github.com/braheezy/ada-zig">Zig</a>: Unofficial Zig bindings for Ada</li>
<li><a href="https://github.com/TkTech/can_ada">Python</a>: Python bindings for Ada</li>
<li><a href="https://github.com/KusStar/react-native-fast-url">React Native</a>: A Fast URL and URLSearchParams polyfill for React Native.</li>
<li><a href="https://github.com/kassane/ada-d">D</a>: D bindings for Ada, <code>@nogc</code>, <code>nothrow</code> and <code>@safe</code> compat.</li>
<li><a href="https://github.com/ferus-web/nim-ada">Nim</a>: High-level Nim abstraction over Ada, uses ORC move semantics to safely and efficiently handle memory.</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Usage</h2><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Ada supports two types of URL instances, <code>ada::url</code> and <code>ada::url_aggregator</code>. The usage is
the same in either case: we have an parsing function template <code>ada::parse</code> which can return
either a result of type <code>ada::result&lt;ada::url&gt;</code> or of type <code>ada::result&lt;ada::url_aggregator&gt;</code>
depending on your needs. The <code>ada::url_aggregator</code> class is smaller and it is backed by a precomputed
serialized URL string. The <code>ada::url</code> class is made of several separate strings for the various
components (path, host, and so forth).</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Parsing &amp; Validation</h3><a id="user-content-parsing--validation" class="anchor" aria-label="Permalink: Parsing &amp; Validation" href="#parsing--validation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Parse and validate a URL from an ASCII or a valid UTF-8 string.</li>
</ul>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="auto url = ada::parse&lt;ada::url_aggregator&gt;(&quot;https://www.google.com&quot;);
if (url) { /* URL is valid */ }"><pre><span class="pl-k">auto</span> url = ada::parse&lt;ada::url_aggregator&gt;(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>);
<span class="pl-k">if</span> (url) { <span class="pl-c"><span class="pl-c">/*</span> URL is valid <span class="pl-c">*/</span></span> }</pre></div>
<p dir="auto">After calling 'parse', you <em>must</em> check that the result is valid before
accessing it when you are not sure that it will succeed. The following
code is unsafe:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="auto&gt; url = ada::parse&lt;ada::url_aggregator&gt;(&quot;some bad url&quot;);
url-&gt;get_href();"><pre><span class="pl-k">auto</span>&gt; url = ada::parse&lt;ada::url_aggregator&gt;(<span class="pl-s"><span class="pl-pds">"</span>some bad url<span class="pl-pds">"</span></span>);
url-&gt;<span class="pl-en">get_href</span>();</pre></div>
<p dir="auto">For simplicity, in the examples below, we skip the check because
we know that parsing succeeds. All strings are assumed to be valid
UTF-8 strings.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Examples</h2><a id="user-content-examples" class="anchor" aria-label="Permalink: Examples" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">URL Parser</h2><a id="user-content-url-parser" class="anchor" aria-label="Permalink: URL Parser" href="#url-parser"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="auto url = ada::parse&lt;ada::url_aggregator&gt;(&quot;https://www.google.com&quot;);

url-&gt;set_username(&quot;username&quot;); // Update credentials
url-&gt;set_password(&quot;password&quot;);
// ada-&gt;get_href() will return &quot;https://username:password@www.google.com/&quot;

url-&gt;set_protocol(&quot;wss&quot;); // Update protocol
// url-&gt;get_protocol() will return &quot;wss:&quot;

url-&gt;set_host(&quot;github.com&quot;); // Update host
// url-&gt;get_host() will return &quot;github.com&quot;

url-&gt;set_port(&quot;8080&quot;); // Update port
// url-&gt;get_port() will return &quot;8080&quot;

url-&gt;set_pathname(&quot;/my-super-long-path&quot;); // Update pathname
// url-&gt;get_pathname() will return &quot;/my-super-long-path&quot;

url-&gt;set_search(&quot;target=self&quot;); // Update search
// url-&gt;get_search() will return &quot;?target=self&quot;

url-&gt;set_hash(&quot;is-this-the-real-life&quot;); // Update hash/fragment
// url-&gt;get_hash() will return &quot;#is-this-the-real-life&quot;"><pre><span class="pl-k">auto</span> url = ada::parse&lt;ada::url_aggregator&gt;(<span class="pl-s"><span class="pl-pds">"</span>https://www.google.com<span class="pl-pds">"</span></span>);

url-&gt;<span class="pl-en">set_username</span>(<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> Update credentials</span>
url-&gt;<span class="pl-en">set_password</span>(<span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>);
<span class="pl-c"><span class="pl-c">//</span> ada-&gt;get_href() will return "https://username:password@www.google.com/"</span>

url-&gt;<span class="pl-en">set_protocol</span>(<span class="pl-s"><span class="pl-pds">"</span>wss<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> Update protocol</span>
<span class="pl-c"><span class="pl-c">//</span> url-&gt;get_protocol() will return "wss:"</span>

url-&gt;<span class="pl-en">set_host</span>(<span class="pl-s"><span class="pl-pds">"</span>github.com<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> Update host</span>
<span class="pl-c"><span class="pl-c">//</span> url-&gt;get_host() will return "github.com"</span>

url-&gt;<span class="pl-en">set_port</span>(<span class="pl-s"><span class="pl-pds">"</span>8080<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> Update port</span>
<span class="pl-c"><span class="pl-c">//</span> url-&gt;get_port() will return "8080"</span>

url-&gt;<span class="pl-en">set_pathname</span>(<span class="pl-s"><span class="pl-pds">"</span>/my-super-long-path<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> Update pathname</span>
<span class="pl-c"><span class="pl-c">//</span> url-&gt;get_pathname() will return "/my-super-long-path"</span>

url-&gt;<span class="pl-en">set_search</span>(<span class="pl-s"><span class="pl-pds">"</span>target=self<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> Update search</span>
<span class="pl-c"><span class="pl-c">//</span> url-&gt;get_search() will return "?target=self"</span>

url-&gt;<span class="pl-en">set_hash</span>(<span class="pl-s"><span class="pl-pds">"</span>is-this-the-real-life<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> Update hash/fragment</span>
<span class="pl-c"><span class="pl-c">//</span> url-&gt;get_hash() will return "#is-this-the-real-life"</span></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">URL Search Params</h3><a id="user-content-url-search-params" class="anchor" aria-label="Permalink: URL Search Params" href="#url-search-params"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="ada::url_search_params search_params(&quot;a=b&amp;c=d&amp;e=f&quot;);
search_params.append(&quot;g=h&quot;);

search_params.get(&quot;g&quot;);  // will return &quot;h&quot;

auto keys = search_params.get_keys();
while (keys.has_next()) {
  auto key = keys.next();  // &quot;a&quot;, &quot;c&quot;, &quot;e&quot;, &quot;g&quot;
}"><pre>ada::url_search_params <span class="pl-en">search_params</span>(<span class="pl-s"><span class="pl-pds">"</span>a=b&amp;c=d&amp;e=f<span class="pl-pds">"</span></span>);
search_params.append(<span class="pl-s"><span class="pl-pds">"</span>g=h<span class="pl-pds">"</span></span>);

search_params.get(<span class="pl-s"><span class="pl-pds">"</span>g<span class="pl-pds">"</span></span>);  <span class="pl-c"><span class="pl-c">//</span> will return "h"</span>

<span class="pl-k">auto</span> keys = search_params.get_keys();
<span class="pl-k">while</span> (keys.has_next()) {
  <span class="pl-k">auto</span> key = keys.<span class="pl-c1">next</span>();  <span class="pl-c"><span class="pl-c">//</span> "a", "c", "e", "g"</span>
}</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">URLPattern</h3><a id="user-content-urlpattern" class="anchor" aria-label="Permalink: URLPattern" href="#urlpattern"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Our implementation doesn't provide a regex engine and leaves the decision of choosing the right engine to the user.
This is done as a security measure since the default std::regex engine is not safe and open to DDOS attacks.
Runtimes like Node.js and Cloudflare Workers use the V8 regex engine, which is safe and performant.</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Define a regex engine that conforms to the following interface
// For example we will use v8 regex engine

class v8_regex_provider {
 public:
  v8_regex_provider() = default;
  using regex_type = v8::Global&lt;v8::RegExp&gt;;
  static std::optional&lt;regex_type&gt; create_instance(std::string_view pattern,
                                                   bool ignore_case);
  static std::optional&lt;std::vector&lt;std::optional&lt;std::string&gt;&gt;&gt; regex_search(
      std::string_view input, const regex_type&amp; pattern);
  static bool regex_match(std::string_view input, const regex_type&amp; pattern);
};

// Define a URLPattern
auto pattern = ada::parse_url_pattern&lt;v8_regex_provider&gt;(&quot;/books/:id(\\d+)&quot;, &quot;https://example.com&quot;);

// Check validity
if (!pattern) { return EXIT_FAILURE; }

// Match a URL
auto match = pattern-&gt;match(&quot;https://example.com/books/123&quot;);

// Test a URL
auto matched = pattern-&gt;test(&quot;https://example.com/books/123&quot;);"><pre><span class="pl-c"><span class="pl-c">//</span> Define a regex engine that conforms to the following interface</span>
<span class="pl-c"><span class="pl-c">//</span> For example we will use v8 regex engine</span>

<span class="pl-k">class</span> <span class="pl-en">v8_regex_provider</span> {
 <span class="pl-k">public:</span>
  <span class="pl-en">v8_regex_provider</span>() = <span class="pl-k">default</span>;
  <span class="pl-k">using</span> regex_type = v8::Global&lt;v8::RegExp&gt;;
  <span class="pl-k">static</span> std::optional&lt;regex_type&gt; <span class="pl-en">create_instance</span>(std::string_view pattern,
                                                   <span class="pl-k">bool</span> ignore_case);
  <span class="pl-k">static</span> std::optional&lt;std::vector&lt;std::optional&lt;std::string&gt;&gt;&gt; <span class="pl-en">regex_search</span>(
      std::string_view input, <span class="pl-k">const</span> regex_type&amp; pattern);
  <span class="pl-k">static</span> <span class="pl-k">bool</span> <span class="pl-en">regex_match</span>(std::string_view input, <span class="pl-k">const</span> regex_type&amp; pattern);
};

<span class="pl-c"><span class="pl-c">//</span> Define a URLPattern</span>
<span class="pl-k">auto</span> pattern = ada::parse_url_pattern&lt;v8_regex_provider&gt;(<span class="pl-s"><span class="pl-pds">"</span>/books/:id(<span class="pl-cce">\\</span>d+)<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>https://example.com<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Check validity</span>
<span class="pl-k">if</span> (!pattern) { <span class="pl-k">return</span> EXIT_FAILURE; }

<span class="pl-c"><span class="pl-c">//</span> Match a URL</span>
<span class="pl-k">auto</span> match = pattern-&gt;<span class="pl-en">match</span>(<span class="pl-s"><span class="pl-pds">"</span>https://example.com/books/123<span class="pl-pds">"</span></span>);

<span class="pl-c"><span class="pl-c">//</span> Test a URL</span>
<span class="pl-k">auto</span> matched = pattern-&gt;<span class="pl-en">test</span>(<span class="pl-s"><span class="pl-pds">"</span>https://example.com/books/123<span class="pl-pds">"</span></span>);</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">C wrapper</h3><a id="user-content-c-wrapper" class="anchor" aria-label="Permalink: C wrapper" href="#c-wrapper"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">See the file <code>include/ada_c.h</code> for our C interface. We expect ASCII or UTF-8 strings.</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#include &quot;ada_c.h&quot;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;string.h&gt;

static void ada_print(ada_string string) {
  printf(&quot;%.*s\n&quot;, (int)string.length, string.data);
}

int main(int c, char *arg[] ) {
  const char* input =
      &quot;https://username:password@www.google.com:8080/&quot;
      &quot;pathname?query=true#hash-exists&quot;;
  ada_url url = ada_parse(input, strlen(input));
  if(!ada_is_valid(url)) { puts(&quot;failure&quot;); return EXIT_FAILURE; }
  ada_print(ada_get_href(url)); // prints https://username:password@host:8080/pathname?query=true#hash-exists
  ada_print(ada_get_protocol(url)); // prints https:
  ada_print(ada_get_username(url)); // prints username
  ada_set_href(url, &quot;https://www.yagiz.co&quot;, strlen(&quot;https://www.yagiz.co&quot;));  
  if(!ada_is_valid(url)) { puts(&quot;failure&quot;); return EXIT_FAILURE; }
  ada_set_hash(url, &quot;new-hash&quot;, strlen(&quot;new-hash&quot;));
  ada_set_hostname(url, &quot;new-host&quot;, strlen(&quot;new-host&quot;));
  ada_set_host(url, &quot;changed-host:9090&quot;, strlen(&quot;changed-host:9090&quot;));
  ada_set_pathname(url, &quot;new-pathname&quot;, strlen(&quot;new-pathname&quot;));
  ada_set_search(url, &quot;new-search&quot;, strlen(&quot;new-search&quot;));
  ada_set_protocol(url, &quot;wss&quot;, 3);  
  ada_print(ada_get_href(url)); // will print wss://changed-host:9090/new-pathname?new-search#new-hash

  // Manipulating search params
  ada_string search = ada_get_search(url);
  ada_url_search_params search_params =
      ada_parse_search_params(search.data, search.length);
  ada_search_params_append(search_params, &quot;a&quot;, 1, &quot;b&quot;, 1);
  ada_owned_string result = ada_search_params_to_string(search_params);
  ada_set_search(url, result.data, result.length);
  ada_free_owned_string(result);
  ada_free_search_params(search_params);

  ada_free(url);
  return EXIT_SUCCESS;
}"><pre><span class="pl-k">#include</span> <span class="pl-s">"ada_c.h"</span>
<span class="pl-k">#include</span> <span class="pl-s">&lt;stdio.h&gt;</span>
<span class="pl-k">#include</span> <span class="pl-s">&lt;stdlib.h&gt;</span>
<span class="pl-k">#include</span> <span class="pl-s">&lt;stdbool.h&gt;</span>
<span class="pl-k">#include</span> <span class="pl-s">&lt;string.h&gt;</span>

<span class="pl-k">static</span> <span class="pl-smi">void</span> <span class="pl-en">ada_print</span>(<span class="pl-smi">ada_string</span> <span class="pl-s1">string</span>) {
  <span class="pl-en">printf</span>(<span class="pl-s">"%.*s\n"</span>, (<span class="pl-smi">int</span>)<span class="pl-s1">string</span>.<span class="pl-c1">length</span>, <span class="pl-s1">string</span>.<span class="pl-c1">data</span>);
}

<span class="pl-smi">int</span> <span class="pl-en">main</span>(<span class="pl-smi">int</span> <span class="pl-s1">c</span>, <span class="pl-smi">char</span> <span class="pl-c1">*</span><span class="pl-s1">arg</span>[] ) {
  <span class="pl-k">const</span> <span class="pl-smi">char</span><span class="pl-c1">*</span> <span class="pl-s1">input</span> <span class="pl-c1">=</span>
      <span class="pl-s">"https://username:password@www.google.com:8080/"</span>
      <span class="pl-s">"pathname?query=true#hash-exists"</span>;
  <span class="pl-smi">ada_url</span> <span class="pl-s1">url</span> <span class="pl-c1">=</span> <span class="pl-en">ada_parse</span>(<span class="pl-s1">input</span>, <span class="pl-en">strlen</span>(<span class="pl-s1">input</span>));
  <span class="pl-k">if</span>(!<span class="pl-en">ada_is_valid</span>(<span class="pl-s1">url</span>)) { <span class="pl-en">puts</span>(<span class="pl-s">"failure"</span>); <span class="pl-k">return</span> <span class="pl-c1">EXIT_FAILURE</span>; }
  <span class="pl-en">ada_print</span>(<span class="pl-en">ada_get_href</span>(<span class="pl-s1">url</span>)); <span class="pl-c">// prints https://username:password@host:8080/pathname?query=true#hash-exists</span>
  <span class="pl-en">ada_print</span>(<span class="pl-en">ada_get_protocol</span>(<span class="pl-s1">url</span>)); <span class="pl-c">// prints https:</span>
  <span class="pl-en">ada_print</span>(<span class="pl-en">ada_get_username</span>(<span class="pl-s1">url</span>)); <span class="pl-c">// prints username</span>
  <span class="pl-en">ada_set_href</span>(<span class="pl-s1">url</span>, <span class="pl-s">"https://www.yagiz.co"</span>, <span class="pl-en">strlen</span>(<span class="pl-s">"https://www.yagiz.co"</span>));  
  <span class="pl-k">if</span>(!<span class="pl-en">ada_is_valid</span>(<span class="pl-s1">url</span>)) { <span class="pl-en">puts</span>(<span class="pl-s">"failure"</span>); <span class="pl-k">return</span> <span class="pl-c1">EXIT_FAILURE</span>; }
  <span class="pl-en">ada_set_hash</span>(<span class="pl-s1">url</span>, <span class="pl-s">"new-hash"</span>, <span class="pl-en">strlen</span>(<span class="pl-s">"new-hash"</span>));
  <span class="pl-en">ada_set_hostname</span>(<span class="pl-s1">url</span>, <span class="pl-s">"new-host"</span>, <span class="pl-en">strlen</span>(<span class="pl-s">"new-host"</span>));
  <span class="pl-en">ada_set_host</span>(<span class="pl-s1">url</span>, <span class="pl-s">"changed-host:9090"</span>, <span class="pl-en">strlen</span>(<span class="pl-s">"changed-host:9090"</span>));
  <span class="pl-en">ada_set_pathname</span>(<span class="pl-s1">url</span>, <span class="pl-s">"new-pathname"</span>, <span class="pl-en">strlen</span>(<span class="pl-s">"new-pathname"</span>));
  <span class="pl-en">ada_set_search</span>(<span class="pl-s1">url</span>, <span class="pl-s">"new-search"</span>, <span class="pl-en">strlen</span>(<span class="pl-s">"new-search"</span>));
  <span class="pl-en">ada_set_protocol</span>(<span class="pl-s1">url</span>, <span class="pl-s">"wss"</span>, <span class="pl-c1">3</span>);  
  <span class="pl-en">ada_print</span>(<span class="pl-en">ada_get_href</span>(<span class="pl-s1">url</span>)); <span class="pl-c">// will print wss://changed-host:9090/new-pathname?new-search#new-hash</span>

  <span class="pl-c">// Manipulating search params</span>
  <span class="pl-smi">ada_string</span> <span class="pl-s1">search</span> <span class="pl-c1">=</span> <span class="pl-en">ada_get_search</span>(<span class="pl-s1">url</span>);
  <span class="pl-smi">ada_url_search_params</span> <span class="pl-s1">search_params</span> <span class="pl-c1">=</span>
      <span class="pl-en">ada_parse_search_params</span>(<span class="pl-s1">search</span>.<span class="pl-c1">data</span>, <span class="pl-s1">search</span>.<span class="pl-c1">length</span>);
  <span class="pl-en">ada_search_params_append</span>(<span class="pl-s1">search_params</span>, <span class="pl-s">"a"</span>, <span class="pl-c1">1</span>, <span class="pl-s">"b"</span>, <span class="pl-c1">1</span>);
  <span class="pl-smi">ada_owned_string</span> <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-en">ada_search_params_to_string</span>(<span class="pl-s1">search_params</span>);
  <span class="pl-en">ada_set_search</span>(<span class="pl-s1">url</span>, <span class="pl-s1">result</span>.<span class="pl-c1">data</span>, <span class="pl-s1">result</span>.<span class="pl-c1">length</span>);
  <span class="pl-en">ada_free_owned_string</span>(<span class="pl-s1">result</span>);
  <span class="pl-en">ada_free_search_params</span>(<span class="pl-s1">search_params</span>);

  <span class="pl-en">ada_free</span>(<span class="pl-s1">url</span>);
  <span class="pl-k">return</span> <span class="pl-c1">EXIT_SUCCESS</span>;
}</pre></div>
<p dir="auto">When linking against the ada library from C++, be minding that ada requires access to the standard
C++ library. E.g., you may link with the C++ compiler.</p>
<p dir="auto">E.g., if you grab our single-header C++ files (<code>ada.cpp</code> and <code>ada.h</code>), as well as the C header (<code>ada_c.h</code>),
you can often compile a C program (<code>demo.c</code>) as follows under Linux/macOS systems:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="c++ -c ada.cpp -std=c++20
cc -c demo.c
c++ demo.o ada.o -o cdemo
./cdemo"><pre class="notranslate"><code>c++ -c ada.cpp -std=c++20
cc -c demo.c
c++ demo.o ada.o -o cdemo
./cdemo
</code></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Command-line interface</h3><a id="user-content-command-line-interface" class="anchor" aria-label="Permalink: Command-line interface" href="#command-line-interface"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For more information about command-line options, please refer to the <a href="docs/cli.md">CLI documentation</a>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">CMake dependency</h3><a id="user-content-cmake-dependency" class="anchor" aria-label="Permalink: CMake dependency" href="#cmake-dependency"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">See the file <code>tests/installation/CMakeLists.txt</code> for an example of how you might use ada from your own
CMake project, after having installed ada on your system.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Contributing</h2><a id="user-content-contributing" class="anchor" aria-label="Permalink: Contributing" href="#contributing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Building</h3><a id="user-content-building" class="anchor" aria-label="Permalink: Building" href="#building"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Ada uses cmake as a build system, but also supports Bazel. It's recommended you to run the following
commands to build it locally.</p>
<p dir="auto">Without tests:</p>
<ul dir="auto">
<li><strong>Build</strong>: <code>cmake -B build &amp;&amp; cmake --build build</code></li>
</ul>
<p dir="auto">With tests (requires git):</p>
<ul dir="auto">
<li><strong>Build</strong>: <code>cmake -B build -DADA_TESTING=ON &amp;&amp; cmake --build build</code></li>
<li><strong>Test</strong>: <code>ctest --output-on-failure --test-dir build</code></li>
</ul>
<p dir="auto">With tests (requires available local packages):</p>
<ul dir="auto">
<li><strong>Build</strong>: <code>cmake -B build -DADA_TESTING=ON -D CPM_USE_LOCAL_PACKAGES=ON &amp;&amp; cmake --build build</code></li>
<li><strong>Test</strong>: <code>ctest --output-on-failure --test-dir build</code></li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Build options</h3><a id="user-content-build-options" class="anchor" aria-label="Permalink: Build options" href="#build-options"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Ada provides several CMake options to customize the build:</p>
<ul dir="auto">
<li><code>ADA_USE_SIMDUTF</code>: Enables SIMD-accelerated Unicode processing via simdutf (default: OFF)</li>
</ul>
<p dir="auto">Windows users need additional flags to specify the build configuration, e.g. <code>--config Release</code>.</p>
<p dir="auto">The project can also be built via docker using default docker file of repository with following commands.</p>
<p dir="auto"><code>docker build -t ada-builder . &amp;&amp; docker run --rm -it -v ${PWD}:/repo ada-builder</code></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Amalgamation</h3><a id="user-content-amalgamation" class="anchor" aria-label="Permalink: Amalgamation" href="#amalgamation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You may amalgamate all source files into only two files (<code>ada.h</code> and <code>ada.cpp</code>) by typing executing the Python
3 script <code>singleheader/amalgamate.py</code>. By default, the files are created in the <code>singleheader</code> directory.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">License</h3><a id="user-content-license" class="anchor" aria-label="Permalink: License" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This code is made available under the Apache License 2.0 as well as the MIT license.</p>
<p dir="auto">Our tests include third-party code and data. The benchmarking code includes third-party code: it is provided for research purposes only and not part of the library.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Further reading</h3><a id="user-content-further-reading" class="anchor" aria-label="Permalink: Further reading" href="#further-reading"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Yagiz Nizipli, Daniel Lemire, <a href="https://doi.org/10.1002/spe.3296" rel="nofollow">Parsing Millions of URLs per Second</a>, Software: Practice and Experience 54(5) May 2024.</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Stars</h2><a id="user-content-stars" class="anchor" aria-label="Permalink: Stars" href="#stars"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://www.star-history.com/#ada-url/ada&amp;Date" rel="nofollow"><img src="https://camo.githubusercontent.com/8d3a2d38ff9cf05d672392d9c47da90a4bb5d37e2fa5275da19c718a44552d98/68747470733a2f2f6170692e737461722d686973746f72792e636f6d2f7376673f7265706f733d6164612d75726c2f61646126747970653d44617465" alt="Star History Chart" data-canonical-src="https://api.star-history.com/svg?repos=ada-url/ada&amp;type=Date" style="max-width: 100%;"></a></p>
</article></div>