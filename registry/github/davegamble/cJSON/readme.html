<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">cJSON</h1><a id="user-content-cjson" class="anchor" aria-label="Permalink: cJSON" href="#cjson"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Ultralightweight JSON parser in ANSI C.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Table of contents</h2><a id="user-content-table-of-contents" class="anchor" aria-label="Permalink: Table of contents" href="#table-of-contents"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="#license">License</a></li>
<li><a href="#usage">Usage</a>
<ul dir="auto">
<li><a href="#welcome-to-cjson">Welcome to cJSON</a></li>
<li><a href="#building">Building</a>
<ul dir="auto">
<li><a href="#copying-the-source">Copying the source</a></li>
<li><a href="#cmake">CMake</a></li>
<li><a href="#makefile">Makefile</a></li>
<li><a href="#meson">Meson</a></li>
<li><a href="#Vcpkg">Vcpkg</a></li>
</ul>
</li>
<li><a href="#including-cjson">Including cJSON</a></li>
<li><a href="#data-structure">Data Structure</a></li>
<li><a href="#working-with-the-data-structure">Working with the data structure</a>
<ul dir="auto">
<li><a href="#basic-types">Basic types</a></li>
<li><a href="#arrays">Arrays</a></li>
<li><a href="#objects">Objects</a></li>
</ul>
</li>
<li><a href="#parsing-json">Parsing JSON</a></li>
<li><a href="#printing-json">Printing JSON</a></li>
<li><a href="#example">Example</a>
<ul dir="auto">
<li><a href="#printing">Printing</a></li>
<li><a href="#parsing">Parsing</a></li>
</ul>
</li>
<li><a href="#caveats">Caveats</a>
<ul dir="auto">
<li><a href="#zero-character">Zero Character</a></li>
<li><a href="#character-encoding">Character Encoding</a></li>
<li><a href="#c-standard">C Standard</a></li>
<li><a href="#floating-point-numbers">Floating Point Numbers</a></li>
<li><a href="#deep-nesting-of-arrays-and-objects">Deep Nesting Of Arrays And Objects</a></li>
<li><a href="#thread-safety">Thread Safety</a></li>
<li><a href="#case-sensitivity">Case Sensitivity</a></li>
<li><a href="#duplicate-object-members">Duplicate Object Members</a></li>
</ul>
</li>
<li><a href="#enjoy-cjson">Enjoy cJSON!</a></li>
</ul>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">License</h2><a id="user-content-license" class="anchor" aria-label="Permalink: License" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">MIT License</p>
<blockquote>
<p dir="auto">Copyright (c) 2009-2017 Dave Gamble and cJSON contributors</p>
<p dir="auto">Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p dir="auto">The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p dir="auto">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</p>
</blockquote>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Usage</h2><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Welcome to cJSON.</h3><a id="user-content-welcome-to-cjson" class="anchor" aria-label="Permalink: Welcome to cJSON." href="#welcome-to-cjson"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">cJSON aims to be the dumbest possible parser that you can get your job done with.
It's a single file of C, and a single header file.</p>
<p dir="auto">JSON is described best here: <a href="http://www.json.org/" rel="nofollow">http://www.json.org/</a>
It's like XML, but fat-free. You use it to move data around, store things, or just
generally represent your program's state.</p>
<p dir="auto">As a library, cJSON exists to take away as much legwork as it can, but not get in your way.
As a point of pragmatism (i.e. ignoring the truth), I'm going to say that you can use it
in one of two modes: Auto and Manual. Let's have a quick run-through.</p>
<p dir="auto">I lifted some JSON from this page: <a href="http://www.json.org/fatfree.html" rel="nofollow">http://www.json.org/fatfree.html</a>
That page inspired me to write cJSON, which is a parser that tries to share the same
philosophy as JSON itself. Simple, dumb, out of the way.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Building</h3><a id="user-content-building" class="anchor" aria-label="Permalink: Building" href="#building"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">There are several ways to incorporate cJSON into your project.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">copying the source</h4><a id="user-content-copying-the-source" class="anchor" aria-label="Permalink: copying the source" href="#copying-the-source"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Because the entire library is only one C file and one header file, you can just copy <code>cJSON.h</code> and <code>cJSON.c</code> to your projects source and start using it.</p>
<p dir="auto">cJSON is written in ANSI C (C89) in order to support as many platforms and compilers as possible.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">CMake</h4><a id="user-content-cmake" class="anchor" aria-label="Permalink: CMake" href="#cmake"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">With CMake, cJSON supports a full blown build system. This way you get the most features. CMake with an equal or higher version than 2.8.5 is supported. With CMake it is recommended to do an out of tree build, meaning the compiled files are put in a directory separate from the source files. So in order to build cJSON with CMake on a Unix platform, make a <code>build</code> directory and run CMake inside it.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="mkdir build
cd build
cmake .."><pre class="notranslate"><code>mkdir build
cd build
cmake ..
</code></pre></div>
<p dir="auto">This will create a Makefile and a bunch of other files. You can then compile it:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="make"><pre class="notranslate"><code>make
</code></pre></div>
<p dir="auto">And install it with <code>make install</code> if you want. By default it installs the headers <code>/usr/local/include/cjson</code> and the libraries to <code>/usr/local/lib</code>. It also installs files for pkg-config to make it easier to detect and use an existing installation of CMake. And it installs CMake config files, that can be used by other CMake based projects to discover the library.</p>
<p dir="auto">You can change the build process with a list of different options that you can pass to CMake. Turn them on with <code>On</code> and off with <code>Off</code>:</p>
<ul dir="auto">
<li><code>-DENABLE_CJSON_TEST=On</code>: Enable building the tests. (on by default)</li>
<li><code>-DENABLE_CJSON_UTILS=On</code>: Enable building cJSON_Utils. (off by default)</li>
<li><code>-DENABLE_TARGET_EXPORT=On</code>: Enable the export of CMake targets. Turn off if it makes problems. (on by default)</li>
<li><code>-DENABLE_CUSTOM_COMPILER_FLAGS=On</code>: Enable custom compiler flags (currently for Clang, GCC and MSVC). Turn off if it makes problems. (on by default)</li>
<li><code>-DENABLE_VALGRIND=On</code>: Run tests with <a href="http://valgrind.org" rel="nofollow">valgrind</a>. (off by default)</li>
<li><code>-DENABLE_SANITIZERS=On</code>: Compile cJSON with <a href="https://github.com/google/sanitizers/wiki/AddressSanitizer">AddressSanitizer</a> and <a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html" rel="nofollow">UndefinedBehaviorSanitizer</a> enabled (if possible). (off by default)</li>
<li><code>-DENABLE_SAFE_STACK</code>: Enable the <a href="https://clang.llvm.org/docs/SafeStack.html" rel="nofollow">SafeStack</a> instrumentation pass. Currently only works with the Clang compiler. (off by default)</li>
<li><code>-DBUILD_SHARED_LIBS=On</code>: Build the shared libraries. (on by default)</li>
<li><code>-DBUILD_SHARED_AND_STATIC_LIBS=On</code>: Build both shared and static libraries. (off by default)</li>
<li><code>-DCMAKE_INSTALL_PREFIX=/usr</code>: Set a prefix for the installation.</li>
<li><code>-DENABLE_LOCALES=On</code>: Enable the usage of localeconv method. ( on by default )</li>
<li><code>-DCJSON_OVERRIDE_BUILD_SHARED_LIBS=On</code>: Enable overriding the value of <code>BUILD_SHARED_LIBS</code> with <code>-DCJSON_BUILD_SHARED_LIBS</code>.</li>
<li><code>-DENABLE_CJSON_VERSION_SO</code>: Enable cJSON so version. ( on by default )</li>
</ul>
<p dir="auto">If you are packaging cJSON for a distribution of Linux, you would probably take these steps for example:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="mkdir build
cd build
cmake .. -DENABLE_CJSON_UTILS=On -DENABLE_CJSON_TEST=Off -DCMAKE_INSTALL_PREFIX=/usr
make
make DESTDIR=$pkgdir install"><pre class="notranslate"><code>mkdir build
cd build
cmake .. -DENABLE_CJSON_UTILS=On -DENABLE_CJSON_TEST=Off -DCMAKE_INSTALL_PREFIX=/usr
make
make DESTDIR=$pkgdir install
</code></pre></div>
<p dir="auto">On Windows CMake is usually used to create a Visual Studio solution file by running it inside the Developer Command Prompt for Visual Studio, for exact steps follow the official documentation from CMake and Microsoft and use the online search engine of your choice. The descriptions of the the options above still generally apply, although not all of them work on Windows.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Makefile</h4><a id="user-content-makefile" class="anchor" aria-label="Permalink: Makefile" href="#makefile"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>NOTE:</strong> This Method is deprecated. Use CMake if at all possible. Makefile support is limited to fixing bugs.</p>
<p dir="auto">If you don't have CMake available, but still have GNU make. You can use the makefile to build cJSON:</p>
<p dir="auto">Run this command in the directory with the source code and it will automatically compile static and shared libraries and a little test program (not the full test suite).</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="make all"><pre class="notranslate"><code>make all
</code></pre></div>
<p dir="auto">If you want, you can install the compiled library to your system using <code>make install</code>. By default it will install the headers in <code>/usr/local/include/cjson</code> and the libraries in <code>/usr/local/lib</code>. But you can change this behavior by setting the <code>PREFIX</code> and <code>DESTDIR</code> variables: <code>make PREFIX=/usr DESTDIR=temp install</code>. And uninstall them with: <code>make PREFIX=/usr DESTDIR=temp uninstall</code>.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Meson</h4><a id="user-content-meson" class="anchor" aria-label="Permalink: Meson" href="#meson"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To make cjson work in a project using meson, the libcjson dependency has to be included:</p>
<div class="highlight highlight-source-meson notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="project('c-json-example', 'c')

cjson = dependency('libcjson')

example = executable(
    'example',
    'example.c',
    dependencies: [cjson],
)"><pre><span class="pl-c1">project</span>(<span class="pl-s"><span class="pl-pds">'</span>c-json-example<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>c<span class="pl-pds">'</span></span>)

cjson <span class="pl-k">=</span> <span class="pl-c1">dependency</span>(<span class="pl-s"><span class="pl-pds">'</span>libcjson<span class="pl-pds">'</span></span>)

example <span class="pl-k">=</span> <span class="pl-c1">executable</span>(
    <span class="pl-s"><span class="pl-pds">'</span>example<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>example.c<span class="pl-pds">'</span></span>,
    <span class="pl-smi">dependencies</span>: [cjson],
)</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Vcpkg</h4><a id="user-content-vcpkg" class="anchor" aria-label="Permalink: Vcpkg" href="#vcpkg"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can download and install cJSON using the <a href="https://github.com/Microsoft/vcpkg">vcpkg</a> dependency manager:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.sh
./vcpkg integrate install
vcpkg install cjson"><pre class="notranslate"><code>git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.sh
./vcpkg integrate install
vcpkg install cjson
</code></pre></div>
<p dir="auto">The cJSON port in vcpkg is kept up to date by Microsoft team members and community contributors. If the version is out of date, please <a href="https://github.com/Microsoft/vcpkg">create an issue or pull request</a> on the vcpkg repository.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Including cJSON</h3><a id="user-content-including-cjson" class="anchor" aria-label="Permalink: Including cJSON" href="#including-cjson"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you installed it via CMake or the Makefile, you can include cJSON like this:</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#include &lt;cjson/cJSON.h&gt;"><pre><span class="pl-k">#include</span> <span class="pl-s">&lt;cjson/cJSON.h&gt;</span></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Data Structure</h3><a id="user-content-data-structure" class="anchor" aria-label="Permalink: Data Structure" href="#data-structure"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">cJSON represents JSON data using the <code>cJSON</code> struct data type:</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="/* The cJSON structure: */
typedef struct cJSON
{
    struct cJSON *next;
    struct cJSON *prev;
    struct cJSON *child;
    int type;
    char *valuestring;
    /* writing to valueint is DEPRECATED, use cJSON_SetNumberValue instead */
    int valueint;
    double valuedouble;
    char *string;
} cJSON;"><pre><span class="pl-c">/* The cJSON structure: */</span>
<span class="pl-k">typedef</span> <span class="pl-k">struct</span> <span class="pl-smi">cJSON</span>
{
    <span class="pl-k">struct</span> <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-c1">next</span>;
    <span class="pl-k">struct</span> <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-c1">prev</span>;
    <span class="pl-k">struct</span> <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-c1">child</span>;
    <span class="pl-smi">int</span> <span class="pl-c1">type</span>;
    <span class="pl-smi">char</span> <span class="pl-c1">*</span><span class="pl-c1">valuestring</span>;
    <span class="pl-c">/* writing to valueint is DEPRECATED, use cJSON_SetNumberValue instead */</span>
    <span class="pl-smi">int</span> <span class="pl-c1">valueint</span>;
    <span class="pl-smi">double</span> <span class="pl-c1">valuedouble</span>;
    <span class="pl-smi">char</span> <span class="pl-c1">*</span><span class="pl-c1">string</span>;
} <span class="pl-smi">cJSON</span>;</pre></div>
<p dir="auto">An item of this type represents a JSON value. The type is stored in <code>type</code> as a bit-flag (<strong>this means that you cannot find out the type by just comparing the value of <code>type</code></strong>).</p>
<p dir="auto">To check the type of an item, use the corresponding <code>cJSON_Is...</code> function. It does a <code>NULL</code> check followed by a type check and returns a boolean value if the item is of this type.</p>
<p dir="auto">The type can be one of the following:</p>
<ul dir="auto">
<li><code>cJSON_Invalid</code> (check with <code>cJSON_IsInvalid</code>): Represents an invalid item that doesn't contain any value. You automatically have this type if you set the item to all zero bytes.</li>
<li><code>cJSON_False</code> (check with <code>cJSON_IsFalse</code>): Represents a <code>false</code> boolean value. You can also check for boolean values in general with <code>cJSON_IsBool</code>.</li>
<li><code>cJSON_True</code> (check with <code>cJSON_IsTrue</code>): Represents a <code>true</code> boolean value. You can also check for boolean values in general with <code>cJSON_IsBool</code>.</li>
<li><code>cJSON_NULL</code> (check with <code>cJSON_IsNull</code>): Represents a <code>null</code> value.</li>
<li><code>cJSON_Number</code> (check with <code>cJSON_IsNumber</code>): Represents a number value. The value is stored as a double in <code>valuedouble</code> and also in <code>valueint</code>. If the number is outside of the range of an integer, <code>INT_MAX</code> or <code>INT_MIN</code> are used for <code>valueint</code>.</li>
<li><code>cJSON_String</code> (check with <code>cJSON_IsString</code>): Represents a string value. It is stored in the form of a zero terminated string in <code>valuestring</code>.</li>
<li><code>cJSON_Array</code> (check with <code>cJSON_IsArray</code>): Represent an array value. This is implemented by pointing <code>child</code> to a linked list of <code>cJSON</code> items that represent the values in the array. The elements are linked together using <code>next</code> and <code>prev</code>, where the first element has <code>prev.next == NULL</code> and the last element <code>next == NULL</code>.</li>
<li><code>cJSON_Object</code> (check with <code>cJSON_IsObject</code>): Represents an object value. Objects are stored same way as an array, the only difference is that the items in the object store their keys in <code>string</code>.</li>
<li><code>cJSON_Raw</code> (check with <code>cJSON_IsRaw</code>): Represents any kind of JSON that is stored as a zero terminated array of characters in <code>valuestring</code>. This can be used, for example, to avoid printing the same static JSON over and over again to save performance. cJSON will never create this type when parsing. Also note that cJSON doesn't check if it is valid JSON.</li>
</ul>
<p dir="auto">Additionally there are the following two flags:</p>
<ul dir="auto">
<li><code>cJSON_IsReference</code>: Specifies that the item that <code>child</code> points to and/or <code>valuestring</code> is not owned by this item, it is only a reference. So <code>cJSON_Delete</code> and other functions will only deallocate this item, not its <code>child</code>/<code>valuestring</code>.</li>
<li><code>cJSON_StringIsConst</code>: This means that <code>string</code> points to a constant string. This means that <code>cJSON_Delete</code> and other functions will not try to deallocate <code>string</code>.</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Working with the data structure</h3><a id="user-content-working-with-the-data-structure" class="anchor" aria-label="Permalink: Working with the data structure" href="#working-with-the-data-structure"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For every value type there is a <code>cJSON_Create...</code> function that can be used to create an item of that type.
All of these will allocate a <code>cJSON</code> struct that can later be deleted with <code>cJSON_Delete</code>.
Note that you have to delete them at some point, otherwise you will get a memory leak.<br>
<strong>Important</strong>: If you have added an item to an array or an object already, you <strong>mustn't</strong> delete it with <code>cJSON_Delete</code>. Adding it to an array or object transfers its ownership so that when that array or object is deleted,
it gets deleted as well. You also could use <code>cJSON_SetValuestring</code> to change a <code>cJSON_String</code>'s <code>valuestring</code>, and you needn't to free the previous <code>valuestring</code> manually.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Basic types</h4><a id="user-content-basic-types" class="anchor" aria-label="Permalink: Basic types" href="#basic-types"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><strong>null</strong> is created with <code>cJSON_CreateNull</code></li>
<li><strong>booleans</strong> are created with <code>cJSON_CreateTrue</code>, <code>cJSON_CreateFalse</code> or <code>cJSON_CreateBool</code></li>
<li><strong>numbers</strong> are created with <code>cJSON_CreateNumber</code>. This will set both <code>valuedouble</code> and <code>valueint</code>. If the number is outside of the range of an integer, <code>INT_MAX</code> or <code>INT_MIN</code> are used for <code>valueint</code></li>
<li><strong>strings</strong> are created with <code>cJSON_CreateString</code> (copies the string) or with <code>cJSON_CreateStringReference</code> (directly points to the string. This means that <code>valuestring</code> won't be deleted by <code>cJSON_Delete</code> and you are responsible for its lifetime, useful for constants)</li>
</ul>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Arrays</h4><a id="user-content-arrays" class="anchor" aria-label="Permalink: Arrays" href="#arrays"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can create an empty array with <code>cJSON_CreateArray</code>. <code>cJSON_CreateArrayReference</code> can be used to create an array that doesn't "own" its content, so its content doesn't get deleted by <code>cJSON_Delete</code>.</p>
<p dir="auto">To add items to an array, use <code>cJSON_AddItemToArray</code> to append items to the end.
Using <code>cJSON_AddItemReferenceToArray</code> an element can be added as a reference to another item, array or string. This means that <code>cJSON_Delete</code> will not delete that items <code>child</code> or <code>valuestring</code> properties, so no double frees are occurring if they are already used elsewhere.
To insert items in the middle, use <code>cJSON_InsertItemInArray</code>. It will insert an item at the given 0 based index and shift all the existing items to the right.</p>
<p dir="auto">If you want to take an item out of an array at a given index and continue using it, use <code>cJSON_DetachItemFromArray</code>, it will return the detached item, so be sure to assign it to a pointer, otherwise you will have a memory leak.</p>
<p dir="auto">Deleting items is done with <code>cJSON_DeleteItemFromArray</code>. It works like <code>cJSON_DetachItemFromArray</code>, but deletes the detached item via <code>cJSON_Delete</code>.</p>
<p dir="auto">You can also replace an item in an array in place. Either with <code>cJSON_ReplaceItemInArray</code> using an index or with <code>cJSON_ReplaceItemViaPointer</code> given a pointer to an element. <code>cJSON_ReplaceItemViaPointer</code> will return <code>0</code> if it fails. What this does internally is to detach the old item, delete it and insert the new item in its place.</p>
<p dir="auto">To get the size of an array, use <code>cJSON_GetArraySize</code>. Use <code>cJSON_GetArrayItem</code> to get an element at a given index.</p>
<p dir="auto">Because an array is stored as a linked list, iterating it via index is inefficient (<code>O(nÂ²)</code>), so you can iterate over an array using the <code>cJSON_ArrayForEach</code> macro in <code>O(n)</code> time complexity.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Objects</h4><a id="user-content-objects" class="anchor" aria-label="Permalink: Objects" href="#objects"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can create an empty object with <code>cJSON_CreateObject</code>. <code>cJSON_CreateObjectReference</code> can be used to create an object that doesn't "own" its content, so its content doesn't get deleted by <code>cJSON_Delete</code>.</p>
<p dir="auto">To add items to an object, use <code>cJSON_AddItemToObject</code>. Use <code>cJSON_AddItemToObjectCS</code> to add an item to an object with a name that is a constant or reference (key of the item, <code>string</code> in the <code>cJSON</code> struct), so that it doesn't get freed by <code>cJSON_Delete</code>.
Using <code>cJSON_AddItemReferenceToArray</code> an element can be added as a reference to another object, array or string. This means that <code>cJSON_Delete</code> will not delete that items <code>child</code> or <code>valuestring</code> properties, so no double frees are occurring if they are already used elsewhere.</p>
<p dir="auto">If you want to take an item out of an object, use <code>cJSON_DetachItemFromObjectCaseSensitive</code>, it will return the detached item, so be sure to assign it to a pointer, otherwise you will have a memory leak.</p>
<p dir="auto">Deleting items is done with <code>cJSON_DeleteItemFromObjectCaseSensitive</code>. It works like <code>cJSON_DetachItemFromObjectCaseSensitive</code> followed by <code>cJSON_Delete</code>.</p>
<p dir="auto">You can also replace an item in an object in place. Either with <code>cJSON_ReplaceItemInObjectCaseSensitive</code> using a key or with <code>cJSON_ReplaceItemViaPointer</code> given a pointer to an element. <code>cJSON_ReplaceItemViaPointer</code> will return <code>0</code> if it fails. What this does internally is to detach the old item, delete it and insert the new item in its place.</p>
<p dir="auto">To get the size of an object, you can use <code>cJSON_GetArraySize</code>, this works because internally objects are stored as arrays.</p>
<p dir="auto">If you want to access an item in an object, use <code>cJSON_GetObjectItemCaseSensitive</code>.</p>
<p dir="auto">To iterate over an object, you can use the <code>cJSON_ArrayForEach</code> macro the same way as for arrays.</p>
<p dir="auto">cJSON also provides convenient helper functions for quickly creating a new item and adding it to an object, like <code>cJSON_AddNullToObject</code>. They return a pointer to the new item or <code>NULL</code> if they failed.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Parsing JSON</h3><a id="user-content-parsing-json" class="anchor" aria-label="Permalink: Parsing JSON" href="#parsing-json"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Given some JSON in a zero terminated string, you can parse it with <code>cJSON_Parse</code>.</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cJSON *json = cJSON_Parse(string);"><pre><span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">json</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_Parse</span>(<span class="pl-s1">string</span>);</pre></div>
<p dir="auto">Given some JSON in a string (whether zero terminated or not), you can parse it with <code>cJSON_ParseWithLength</code>.</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cJSON *json = cJSON_ParseWithLength(string, buffer_length);"><pre><span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">json</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_ParseWithLength</span>(<span class="pl-s1">string</span>, <span class="pl-s1">buffer_length</span>);</pre></div>
<p dir="auto">It will parse the JSON and allocate a tree of <code>cJSON</code> items that represents it. Once it returns, you are fully responsible for deallocating it after use with <code>cJSON_Delete</code>.</p>
<p dir="auto">The allocator used by <code>cJSON_Parse</code> is <code>malloc</code> and <code>free</code> by default but can be changed (globally) with <code>cJSON_InitHooks</code>.</p>
<p dir="auto">If an error occurs a pointer to the position of the error in the input string can be accessed using <code>cJSON_GetErrorPtr</code>. Note though that this can produce race conditions in multithreading scenarios, in that case it is better to use <code>cJSON_ParseWithOpts</code> with <code>return_parse_end</code>.
By default, characters in the input string that follow the parsed JSON will not be considered as an error.</p>
<p dir="auto">If you want more options, use <code>cJSON_ParseWithOpts(const char *value, const char **return_parse_end, cJSON_bool require_null_terminated)</code>.
<code>return_parse_end</code> returns a pointer to the end of the JSON in the input string or the position that an error occurs at (thereby replacing <code>cJSON_GetErrorPtr</code> in a thread safe way). <code>require_null_terminated</code>, if set to <code>1</code> will make it an error if the input string contains data after the JSON.</p>
<p dir="auto">If you want more options giving buffer length, use <code>cJSON_ParseWithLengthOpts(const char *value, size_t buffer_length, const char **return_parse_end, cJSON_bool require_null_terminated)</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Printing JSON</h3><a id="user-content-printing-json" class="anchor" aria-label="Permalink: Printing JSON" href="#printing-json"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Given a tree of <code>cJSON</code> items, you can print them as a string using <code>cJSON_Print</code>.</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="char *string = cJSON_Print(json);"><pre><span class="pl-smi">char</span> <span class="pl-c1">*</span><span class="pl-s1">string</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_Print</span>(<span class="pl-s1">json</span>);</pre></div>
<p dir="auto">It will allocate a string and print a JSON representation of the tree into it. Once it returns, you are fully responsible for deallocating it after use with your allocator. (usually <code>free</code>, depends on what has been set with <code>cJSON_InitHooks</code>).</p>
<p dir="auto"><code>cJSON_Print</code> will print with whitespace for formatting. If you want to print without formatting, use <code>cJSON_PrintUnformatted</code>.</p>
<p dir="auto">If you have a rough idea of how big your resulting string will be, you can use <code>cJSON_PrintBuffered(const cJSON *item, int prebuffer, cJSON_bool fmt)</code>. <code>fmt</code> is a boolean to turn formatting with whitespace on and off. <code>prebuffer</code> specifies the first buffer size to use for printing. <code>cJSON_Print</code> currently uses 256 bytes for its first buffer size. Once printing runs out of space, a new buffer is allocated and the old gets copied over before printing is continued.</p>
<p dir="auto">These dynamic buffer allocations can be completely avoided by using <code>cJSON_PrintPreallocated(cJSON *item, char *buffer, const int length, const cJSON_bool format)</code>. It takes a buffer to a pointer to print to and its length. If the length is reached, printing will fail and it returns <code>0</code>. In case of success, <code>1</code> is returned. Note that you should provide 5 bytes more than is actually needed, because cJSON is not 100% accurate in estimating if the provided memory is enough.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Example</h3><a id="user-content-example" class="anchor" aria-label="Permalink: Example" href="#example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In this example we want to build and parse the following JSON:</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="{
    &quot;name&quot;: &quot;Awesome 4K&quot;,
    &quot;resolutions&quot;: [
        {
            &quot;width&quot;: 1280,
            &quot;height&quot;: 720
        },
        {
            &quot;width&quot;: 1920,
            &quot;height&quot;: 1080
        },
        {
            &quot;width&quot;: 3840,
            &quot;height&quot;: 2160
        }
    ]
}"><pre>{
    <span class="pl-ent">"name"</span>: <span class="pl-s"><span class="pl-pds">"</span>Awesome 4K<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"resolutions"</span>: [
        {
            <span class="pl-ent">"width"</span>: <span class="pl-c1">1280</span>,
            <span class="pl-ent">"height"</span>: <span class="pl-c1">720</span>
        },
        {
            <span class="pl-ent">"width"</span>: <span class="pl-c1">1920</span>,
            <span class="pl-ent">"height"</span>: <span class="pl-c1">1080</span>
        },
        {
            <span class="pl-ent">"width"</span>: <span class="pl-c1">3840</span>,
            <span class="pl-ent">"height"</span>: <span class="pl-c1">2160</span>
        }
    ]
}</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Printing</h4><a id="user-content-printing" class="anchor" aria-label="Permalink: Printing" href="#printing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Let's build the above JSON and print it to a string:</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="//create a monitor with a list of supported resolutions
//NOTE: Returns a heap allocated string, you are required to free it after use.
char *create_monitor(void)
{
    const unsigned int resolution_numbers[3][2] = {
        {1280, 720},
        {1920, 1080},
        {3840, 2160}
    };
    char *string = NULL;
    cJSON *name = NULL;
    cJSON *resolutions = NULL;
    cJSON *resolution = NULL;
    cJSON *width = NULL;
    cJSON *height = NULL;
    size_t index = 0;

    cJSON *monitor = cJSON_CreateObject();
    if (monitor == NULL)
    {
        goto end;
    }

    name = cJSON_CreateString(&quot;Awesome 4K&quot;);
    if (name == NULL)
    {
        goto end;
    }
    /* after creation was successful, immediately add it to the monitor,
     * thereby transferring ownership of the pointer to it */
    cJSON_AddItemToObject(monitor, &quot;name&quot;, name);

    resolutions = cJSON_CreateArray();
    if (resolutions == NULL)
    {
        goto end;
    }
    cJSON_AddItemToObject(monitor, &quot;resolutions&quot;, resolutions);

    for (index = 0; index &lt; (sizeof(resolution_numbers) / (2 * sizeof(int))); ++index)
    {
        resolution = cJSON_CreateObject();
        if (resolution == NULL)
        {
            goto end;
        }
        cJSON_AddItemToArray(resolutions, resolution);

        width = cJSON_CreateNumber(resolution_numbers[index][0]);
        if (width == NULL)
        {
            goto end;
        }
        cJSON_AddItemToObject(resolution, &quot;width&quot;, width);

        height = cJSON_CreateNumber(resolution_numbers[index][1]);
        if (height == NULL)
        {
            goto end;
        }
        cJSON_AddItemToObject(resolution, &quot;height&quot;, height);
    }

    string = cJSON_Print(monitor);
    if (string == NULL)
    {
        fprintf(stderr, &quot;Failed to print monitor.\n&quot;);
    }

end:
    cJSON_Delete(monitor);
    return string;
}"><pre><span class="pl-c">//create a monitor with a list of supported resolutions</span>
<span class="pl-c">//NOTE: Returns a heap allocated string, you are required to free it after use.</span>
<span class="pl-smi">char</span> <span class="pl-c1">*</span><span class="pl-en">create_monitor</span>(<span class="pl-smi">void</span>)
{
    <span class="pl-k">const</span> <span class="pl-smi">unsigned <span class="pl-smi">int</span></span> <span class="pl-s1">resolution_numbers</span>[<span class="pl-c1">3</span>][<span class="pl-c1">2</span>] <span class="pl-c1">=</span> {
        {<span class="pl-c1">1280</span>, <span class="pl-c1">720</span>},
        {<span class="pl-c1">1920</span>, <span class="pl-c1">1080</span>},
        {<span class="pl-c1">3840</span>, <span class="pl-c1">2160</span>}
    };
    <span class="pl-smi">char</span> <span class="pl-c1">*</span><span class="pl-s1">string</span> <span class="pl-c1">=</span> <span class="pl-c1">NULL</span>;
    <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-c1">NULL</span>;
    <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">resolutions</span> <span class="pl-c1">=</span> <span class="pl-c1">NULL</span>;
    <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">resolution</span> <span class="pl-c1">=</span> <span class="pl-c1">NULL</span>;
    <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">width</span> <span class="pl-c1">=</span> <span class="pl-c1">NULL</span>;
    <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">height</span> <span class="pl-c1">=</span> <span class="pl-c1">NULL</span>;
    <span class="pl-smi">size_t</span> <span class="pl-s1">index</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>;

    <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">monitor</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_CreateObject</span>();
    <span class="pl-k">if</span> (<span class="pl-s1">monitor</span> <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
    {
        goto <span class="pl-ent">end</span>;
    }

    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_CreateString</span>(<span class="pl-s">"Awesome 4K"</span>);
    <span class="pl-k">if</span> (<span class="pl-s1">name</span> <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
    {
        goto <span class="pl-ent">end</span>;
    }
    <span class="pl-c">/* after creation was successful, immediately add it to the monitor,</span>
<span class="pl-c">     * thereby transferring ownership of the pointer to it */</span>
    <span class="pl-en">cJSON_AddItemToObject</span>(<span class="pl-s1">monitor</span>, <span class="pl-s">"name"</span>, <span class="pl-s1">name</span>);

    <span class="pl-s1">resolutions</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_CreateArray</span>();
    <span class="pl-k">if</span> (<span class="pl-s1">resolutions</span> <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
    {
        goto <span class="pl-ent">end</span>;
    }
    <span class="pl-en">cJSON_AddItemToObject</span>(<span class="pl-s1">monitor</span>, <span class="pl-s">"resolutions"</span>, <span class="pl-s1">resolutions</span>);

    <span class="pl-k">for</span> (<span class="pl-s1">index</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>; <span class="pl-s1">index</span> <span class="pl-c1">&lt;</span> (<span class="pl-k">sizeof</span>(<span class="pl-s1">resolution_numbers</span>) / (<span class="pl-c1">2</span> <span class="pl-c1">*</span> <span class="pl-k">sizeof</span>(<span class="pl-smi">int</span>))); <span class="pl-c1">++</span><span class="pl-s1">index</span>)
    {
        <span class="pl-s1">resolution</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_CreateObject</span>();
        <span class="pl-k">if</span> (<span class="pl-s1">resolution</span> <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
        {
            goto <span class="pl-ent">end</span>;
        }
        <span class="pl-en">cJSON_AddItemToArray</span>(<span class="pl-s1">resolutions</span>, <span class="pl-s1">resolution</span>);

        <span class="pl-s1">width</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_CreateNumber</span>(<span class="pl-s1">resolution_numbers</span>[<span class="pl-s1">index</span>][<span class="pl-c1">0</span>]);
        <span class="pl-k">if</span> (<span class="pl-s1">width</span> <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
        {
            goto <span class="pl-ent">end</span>;
        }
        <span class="pl-en">cJSON_AddItemToObject</span>(<span class="pl-s1">resolution</span>, <span class="pl-s">"width"</span>, <span class="pl-s1">width</span>);

        <span class="pl-s1">height</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_CreateNumber</span>(<span class="pl-s1">resolution_numbers</span>[<span class="pl-s1">index</span>][<span class="pl-c1">1</span>]);
        <span class="pl-k">if</span> (<span class="pl-s1">height</span> <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
        {
            goto <span class="pl-ent">end</span>;
        }
        <span class="pl-en">cJSON_AddItemToObject</span>(<span class="pl-s1">resolution</span>, <span class="pl-s">"height"</span>, <span class="pl-s1">height</span>);
    }

    <span class="pl-s1">string</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_Print</span>(<span class="pl-s1">monitor</span>);
    <span class="pl-k">if</span> (<span class="pl-s1">string</span> <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
    {
        <span class="pl-en">fprintf</span>(<span class="pl-s1">stderr</span>, <span class="pl-s">"Failed to print monitor.\n"</span>);
    }

<span class="pl-ent">end</span>:
    <span class="pl-en">cJSON_Delete</span>(<span class="pl-s1">monitor</span>);
    <span class="pl-k">return</span> <span class="pl-s1">string</span>;
}</pre></div>
<p dir="auto">Alternatively we can use the <code>cJSON_Add...ToObject</code> helper functions to make our lives a little easier:</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="//NOTE: Returns a heap allocated string, you are required to free it after use.
char *create_monitor_with_helpers(void)
{
    const unsigned int resolution_numbers[3][2] = {
        {1280, 720},
        {1920, 1080},
        {3840, 2160}
    };
    char *string = NULL;
    cJSON *resolutions = NULL;
    size_t index = 0;

    cJSON *monitor = cJSON_CreateObject();

    if (cJSON_AddStringToObject(monitor, &quot;name&quot;, &quot;Awesome 4K&quot;) == NULL)
    {
        goto end;
    }

    resolutions = cJSON_AddArrayToObject(monitor, &quot;resolutions&quot;);
    if (resolutions == NULL)
    {
        goto end;
    }

    for (index = 0; index &lt; (sizeof(resolution_numbers) / (2 * sizeof(int))); ++index)
    {
        cJSON *resolution = cJSON_CreateObject();

        if (cJSON_AddNumberToObject(resolution, &quot;width&quot;, resolution_numbers[index][0]) == NULL)
        {
            goto end;
        }

        if (cJSON_AddNumberToObject(resolution, &quot;height&quot;, resolution_numbers[index][1]) == NULL)
        {
            goto end;
        }

        cJSON_AddItemToArray(resolutions, resolution);
    }

    string = cJSON_Print(monitor);
    if (string == NULL)
    {
        fprintf(stderr, &quot;Failed to print monitor.\n&quot;);
    }

end:
    cJSON_Delete(monitor);
    return string;
}"><pre><span class="pl-c">//NOTE: Returns a heap allocated string, you are required to free it after use.</span>
<span class="pl-smi">char</span> <span class="pl-c1">*</span><span class="pl-en">create_monitor_with_helpers</span>(<span class="pl-smi">void</span>)
{
    <span class="pl-k">const</span> <span class="pl-smi">unsigned <span class="pl-smi">int</span></span> <span class="pl-s1">resolution_numbers</span>[<span class="pl-c1">3</span>][<span class="pl-c1">2</span>] <span class="pl-c1">=</span> {
        {<span class="pl-c1">1280</span>, <span class="pl-c1">720</span>},
        {<span class="pl-c1">1920</span>, <span class="pl-c1">1080</span>},
        {<span class="pl-c1">3840</span>, <span class="pl-c1">2160</span>}
    };
    <span class="pl-smi">char</span> <span class="pl-c1">*</span><span class="pl-s1">string</span> <span class="pl-c1">=</span> <span class="pl-c1">NULL</span>;
    <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">resolutions</span> <span class="pl-c1">=</span> <span class="pl-c1">NULL</span>;
    <span class="pl-smi">size_t</span> <span class="pl-s1">index</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>;

    <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">monitor</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_CreateObject</span>();

    <span class="pl-k">if</span> (<span class="pl-en">cJSON_AddStringToObject</span>(<span class="pl-s1">monitor</span>, <span class="pl-s">"name"</span>, <span class="pl-s">"Awesome 4K"</span>) <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
    {
        goto <span class="pl-ent">end</span>;
    }

    <span class="pl-s1">resolutions</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_AddArrayToObject</span>(<span class="pl-s1">monitor</span>, <span class="pl-s">"resolutions"</span>);
    <span class="pl-k">if</span> (<span class="pl-s1">resolutions</span> <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
    {
        goto <span class="pl-ent">end</span>;
    }

    <span class="pl-k">for</span> (<span class="pl-s1">index</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>; <span class="pl-s1">index</span> <span class="pl-c1">&lt;</span> (<span class="pl-k">sizeof</span>(<span class="pl-s1">resolution_numbers</span>) / (<span class="pl-c1">2</span> <span class="pl-c1">*</span> <span class="pl-k">sizeof</span>(<span class="pl-smi">int</span>))); <span class="pl-c1">++</span><span class="pl-s1">index</span>)
    {
        <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">resolution</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_CreateObject</span>();

        <span class="pl-k">if</span> (<span class="pl-en">cJSON_AddNumberToObject</span>(<span class="pl-s1">resolution</span>, <span class="pl-s">"width"</span>, <span class="pl-s1">resolution_numbers</span>[<span class="pl-s1">index</span>][<span class="pl-c1">0</span>]) <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
        {
            goto <span class="pl-ent">end</span>;
        }

        <span class="pl-k">if</span> (<span class="pl-en">cJSON_AddNumberToObject</span>(<span class="pl-s1">resolution</span>, <span class="pl-s">"height"</span>, <span class="pl-s1">resolution_numbers</span>[<span class="pl-s1">index</span>][<span class="pl-c1">1</span>]) <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
        {
            goto <span class="pl-ent">end</span>;
        }

        <span class="pl-en">cJSON_AddItemToArray</span>(<span class="pl-s1">resolutions</span>, <span class="pl-s1">resolution</span>);
    }

    <span class="pl-s1">string</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_Print</span>(<span class="pl-s1">monitor</span>);
    <span class="pl-k">if</span> (<span class="pl-s1">string</span> <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
    {
        <span class="pl-en">fprintf</span>(<span class="pl-s1">stderr</span>, <span class="pl-s">"Failed to print monitor.\n"</span>);
    }

<span class="pl-ent">end</span>:
    <span class="pl-en">cJSON_Delete</span>(<span class="pl-s1">monitor</span>);
    <span class="pl-k">return</span> <span class="pl-s1">string</span>;
}</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parsing</h4><a id="user-content-parsing" class="anchor" aria-label="Permalink: Parsing" href="#parsing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In this example we will parse a JSON in the above format and check if the monitor supports a Full HD resolution while printing some diagnostic output:</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="/* return 1 if the monitor supports full hd, 0 otherwise */
int supports_full_hd(const char * const monitor)
{
    const cJSON *resolution = NULL;
    const cJSON *resolutions = NULL;
    const cJSON *name = NULL;
    int status = 0;
    cJSON *monitor_json = cJSON_Parse(monitor);
    if (monitor_json == NULL)
    {
        const char *error_ptr = cJSON_GetErrorPtr();
        if (error_ptr != NULL)
        {
            fprintf(stderr, &quot;Error before: %s\n&quot;, error_ptr);
        }
        status = 0;
        goto end;
    }

    name = cJSON_GetObjectItemCaseSensitive(monitor_json, &quot;name&quot;);
    if (cJSON_IsString(name) &amp;&amp; (name-&gt;valuestring != NULL))
    {
        printf(&quot;Checking monitor \&quot;%s\&quot;\n&quot;, name-&gt;valuestring);
    }

    resolutions = cJSON_GetObjectItemCaseSensitive(monitor_json, &quot;resolutions&quot;);
    cJSON_ArrayForEach(resolution, resolutions)
    {
        cJSON *width = cJSON_GetObjectItemCaseSensitive(resolution, &quot;width&quot;);
        cJSON *height = cJSON_GetObjectItemCaseSensitive(resolution, &quot;height&quot;);

        if (!cJSON_IsNumber(width) || !cJSON_IsNumber(height))
        {
            status = 0;
            goto end;
        }

        if ((width-&gt;valuedouble == 1920) &amp;&amp; (height-&gt;valuedouble == 1080))
        {
            status = 1;
            goto end;
        }
    }

end:
    cJSON_Delete(monitor_json);
    return status;
}"><pre><span class="pl-c">/* return 1 if the monitor supports full hd, 0 otherwise */</span>
<span class="pl-smi">int</span> <span class="pl-en">supports_full_hd</span>(<span class="pl-k">const</span> <span class="pl-smi">char</span> <span class="pl-c1">*</span> <span class="pl-k">const</span> <span class="pl-s1">monitor</span>)
{
    <span class="pl-k">const</span> <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">resolution</span> <span class="pl-c1">=</span> <span class="pl-c1">NULL</span>;
    <span class="pl-k">const</span> <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">resolutions</span> <span class="pl-c1">=</span> <span class="pl-c1">NULL</span>;
    <span class="pl-k">const</span> <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-c1">NULL</span>;
    <span class="pl-smi">int</span> <span class="pl-s1">status</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>;
    <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">monitor_json</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_Parse</span>(<span class="pl-s1">monitor</span>);
    <span class="pl-k">if</span> (<span class="pl-s1">monitor_json</span> <span class="pl-c1">==</span> <span class="pl-c1">NULL</span>)
    {
        <span class="pl-k">const</span> <span class="pl-smi">char</span> <span class="pl-c1">*</span><span class="pl-s1">error_ptr</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_GetErrorPtr</span>();
        <span class="pl-k">if</span> (<span class="pl-s1">error_ptr</span> <span class="pl-c1">!=</span> <span class="pl-c1">NULL</span>)
        {
            <span class="pl-en">fprintf</span>(<span class="pl-s1">stderr</span>, <span class="pl-s">"Error before: %s\n"</span>, <span class="pl-s1">error_ptr</span>);
        }
        <span class="pl-s1">status</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>;
        goto <span class="pl-ent">end</span>;
    }

    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_GetObjectItemCaseSensitive</span>(<span class="pl-s1">monitor_json</span>, <span class="pl-s">"name"</span>);
    <span class="pl-k">if</span> (<span class="pl-en">cJSON_IsString</span>(<span class="pl-s1">name</span>) <span class="pl-c1">&amp;&amp;</span> (<span class="pl-s1">name</span><span class="pl-c1">-&gt;</span><span class="pl-c1">valuestring</span> <span class="pl-c1">!=</span> <span class="pl-c1">NULL</span>))
    {
        <span class="pl-en">printf</span>(<span class="pl-s">"Checking monitor \"%s\"\n"</span>, <span class="pl-s1">name</span><span class="pl-c1">-&gt;</span><span class="pl-c1">valuestring</span>);
    }

    <span class="pl-s1">resolutions</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_GetObjectItemCaseSensitive</span>(<span class="pl-s1">monitor_json</span>, <span class="pl-s">"resolutions"</span>);
    <span class="pl-en">cJSON_ArrayForEach</span>(<span class="pl-s1">resolution</span>, <span class="pl-s1">resolutions</span>)
    {
        <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">width</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_GetObjectItemCaseSensitive</span>(<span class="pl-s1">resolution</span>, <span class="pl-s">"width"</span>);
        <span class="pl-smi">cJSON</span> <span class="pl-c1">*</span><span class="pl-s1">height</span> <span class="pl-c1">=</span> <span class="pl-en">cJSON_GetObjectItemCaseSensitive</span>(<span class="pl-s1">resolution</span>, <span class="pl-s">"height"</span>);

        <span class="pl-k">if</span> (!<span class="pl-en">cJSON_IsNumber</span>(<span class="pl-s1">width</span>) <span class="pl-c1">||</span> !<span class="pl-en">cJSON_IsNumber</span>(<span class="pl-s1">height</span>))
        {
            <span class="pl-s1">status</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>;
            goto <span class="pl-ent">end</span>;
        }

        <span class="pl-k">if</span> ((<span class="pl-s1">width</span><span class="pl-c1">-&gt;</span><span class="pl-c1">valuedouble</span> <span class="pl-c1">==</span> <span class="pl-c1">1920</span>) <span class="pl-c1">&amp;&amp;</span> (<span class="pl-s1">height</span><span class="pl-c1">-&gt;</span><span class="pl-c1">valuedouble</span> <span class="pl-c1">==</span> <span class="pl-c1">1080</span>))
        {
            <span class="pl-s1">status</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>;
            goto <span class="pl-ent">end</span>;
        }
    }

<span class="pl-ent">end</span>:
    <span class="pl-en">cJSON_Delete</span>(<span class="pl-s1">monitor_json</span>);
    <span class="pl-k">return</span> <span class="pl-s1">status</span>;
}</pre></div>
<p dir="auto">Note that there are no NULL checks except for the result of <code>cJSON_Parse</code> because <code>cJSON_GetObjectItemCaseSensitive</code> checks for <code>NULL</code> inputs already, so a <code>NULL</code> value is just propagated and <code>cJSON_IsNumber</code> and <code>cJSON_IsString</code> return <code>0</code> if the input is <code>NULL</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Caveats</h3><a id="user-content-caveats" class="anchor" aria-label="Permalink: Caveats" href="#caveats"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Zero Character</h4><a id="user-content-zero-character" class="anchor" aria-label="Permalink: Zero Character" href="#zero-character"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">cJSON doesn't support strings that contain the zero character <code>'\0'</code> or <code>\u0000</code>. This is impossible with the current API because strings are zero terminated.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Character Encoding</h4><a id="user-content-character-encoding" class="anchor" aria-label="Permalink: Character Encoding" href="#character-encoding"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">cJSON only supports UTF-8 encoded input. In most cases it doesn't reject invalid UTF-8 as input though, it just propagates it through as is. As long as the input doesn't contain invalid UTF-8, the output will always be valid UTF-8.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">C Standard</h4><a id="user-content-c-standard" class="anchor" aria-label="Permalink: C Standard" href="#c-standard"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">cJSON is written in ANSI C (or C89, C90). If your compiler or C library doesn't follow this standard, correct behavior is not guaranteed.</p>
<p dir="auto">NOTE: ANSI C is not C++ therefore it shouldn't be compiled with a C++ compiler. You can compile it with a C compiler and link it with your C++ code however. Although compiling with a C++ compiler might work, correct behavior is not guaranteed.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Floating Point Numbers</h4><a id="user-content-floating-point-numbers" class="anchor" aria-label="Permalink: Floating Point Numbers" href="#floating-point-numbers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">cJSON does not officially support any <code>double</code> implementations other than IEEE754 double precision floating point numbers. It might still work with other implementations but bugs with these will be considered invalid.</p>
<p dir="auto">The maximum length of a floating point literal that cJSON supports is currently 63 characters.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Deep Nesting Of Arrays And Objects</h4><a id="user-content-deep-nesting-of-arrays-and-objects" class="anchor" aria-label="Permalink: Deep Nesting Of Arrays And Objects" href="#deep-nesting-of-arrays-and-objects"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">cJSON doesn't support arrays and objects that are nested too deeply because this would result in a stack overflow. To prevent this cJSON limits the depth to <code>CJSON_NESTING_LIMIT</code> which is 1000 by default but can be changed at compile time.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Thread Safety</h4><a id="user-content-thread-safety" class="anchor" aria-label="Permalink: Thread Safety" href="#thread-safety"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In general cJSON is <strong>not thread safe</strong>.</p>
<p dir="auto">However it is thread safe under the following conditions:</p>
<ul dir="auto">
<li><code>cJSON_GetErrorPtr</code> is never used (the <code>return_parse_end</code> parameter of <code>cJSON_ParseWithOpts</code> can be used instead)</li>
<li><code>cJSON_InitHooks</code> is only ever called before using cJSON in any threads.</li>
<li><code>setlocale</code> is never called before all calls to cJSON functions have returned.</li>
</ul>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Case Sensitivity</h4><a id="user-content-case-sensitivity" class="anchor" aria-label="Permalink: Case Sensitivity" href="#case-sensitivity"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">When cJSON was originally created, it didn't follow the JSON standard and didn't make a distinction between uppercase and lowercase letters. If you want the correct, standard compliant, behavior, you need to use the <code>CaseSensitive</code> functions where available.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Duplicate Object Members</h4><a id="user-content-duplicate-object-members" class="anchor" aria-label="Permalink: Duplicate Object Members" href="#duplicate-object-members"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">cJSON supports parsing and printing JSON that contains objects that have multiple members with the same name. <code>cJSON_GetObjectItemCaseSensitive</code> however will always only return the first one.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Enjoy cJSON!</h1><a id="user-content-enjoy-cjson" class="anchor" aria-label="Permalink: Enjoy cJSON!" href="#enjoy-cjson"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Dave Gamble (original author)</li>
<li>Max Bruckner and Alan Wang (current maintainer)</li>
<li>and the other <a href="CONTRIBUTORS.md">cJSON contributors</a></li>
</ul>
</article></div>