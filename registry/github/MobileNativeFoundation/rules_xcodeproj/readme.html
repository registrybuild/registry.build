<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p align="center" dir="auto">
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/158658/161647598-223361dc-030d-431a-b4fe-d92592ed5530.png"><img src="https://user-images.githubusercontent.com/158658/161647598-223361dc-030d-431a-b4fe-d92592ed5530.png" width="255" style="max-width: 100%;"></a>
</p>
<h1 dir="auto"><a id="user-content-rules_xcodeproj" class="anchor" aria-hidden="true" tabindex="-1" href="#rules_xcodeproj"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>rules_xcodeproj</h1>
<p dir="auto">This repository contains rules for <a href="https://bazel.build" rel="nofollow">Bazel</a> that can be
used to generate Xcode projects from targets in your workspace.</p>
<p dir="auto">If you run into any problems with these rules, please check our
<a href="docs/faq.md">FAQ</a>, check if <a href="https://github.com/MobileNativeFoundation/rules_xcodeproj/issues">another issue already exists</a> and comment
on it, or <a href="https://github.com/MobileNativeFoundation/rules_xcodeproj/issues/new/choose">file a new issue</a>!</p>
<h2 dir="auto"><a id="user-content-features" class="anchor" aria-hidden="true" tabindex="-1" href="#features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Features</h2>
<div align="center" dir="auto">
  <a href="https://user-images.githubusercontent.com/158658/216620253-507bbf10-a692-4dcd-bd74-736c9717e53e.png" rel="nofollow">
    <themed-picture data-catalyst-inline="true"><picture>
      <source media="(prefers-color-scheme: dark)" srcset="https://user-images.githubusercontent.com/158658/216620284-6a3cb6ff-f5cd-42f2-8e2b-7ef2a70c8da5.png">
      <img alt="Screenshot of a rules_xcodeproj generated project open in Xcode" src="https://user-images.githubusercontent.com/158658/216620253-507bbf10-a692-4dcd-bd74-736c9717e53e.png" width="1245">
    </picture></themed-picture>
  </a>
</div>
<ul dir="auto">
<li>Full support for Xcode features:
<ul dir="auto">
<li>Indexing (i.e. autocomplete, syntax highlighting, jump to definition)</li>
<li>Debugging</li>
<li>Runtime sanitizers</li>
<li>Inline warnings and errors</li>
<li>Fix-its (currently only in BwX mode)</li>
<li>Test selection and running</li>
<li>Embedded Targets (App Clips, App Extensions, and Watch Apps)</li>
<li>Dynamic frameworks</li>
<li>SwiftUI Previews</li>
</ul>
</li>
<li>Focused Projects
<ul dir="auto">
<li>Include a subset of your targets in Xcode</li>
<li>Unfocused targets are built with Bazel</li>
<li>Works in BwX mode as well!</li>
</ul>
</li>
<li>Comprehensive Bazel rules support
<ul dir="auto">
<li>Core Bazel C/C++/Objective-C</li>
<li>rules_swift</li>
<li>rules_apple</li>
<li>rules_ios</li>
<li>Most likely your custom rules as well!</li>
</ul>
</li>
<li>Minimal configuration needed (see the <a href="#usage">usage</a> section below)</li>
<li>Multiple ways of building your project in Xcode
<ul dir="auto">
<li>Build your Bazel targets with Bazel (a.k.a Build with Bazel or BwB mode)</li>
<li>Build your Bazel targets with Xcode, <em>not</em> Bazel
(a.k.a. Build with Xcode or BwX mode)<sup><a href="#user-content-fn-bwx_warning-a3e04f744875d029697726d37c9f831e" id="user-content-fnref-bwx_warning-a3e04f744875d029697726d37c9f831e" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup></li>
</ul>
</li>
<li>It “just works”</li>
</ul>
<p dir="auto">We’ve also documented the <a href="docs/design-goals.md">high-level design goals</a> of
the ruleset.</p>
<h2 dir="auto"><a id="user-content-projects-using-rules_xcodeproj" class="anchor" aria-hidden="true" tabindex="-1" href="#projects-using-rules_xcodeproj"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Projects using rules_xcodeproj</h2>
<ul dir="auto">
<li>BazelPods</li>
<li>Cash App</li>
<li>Envoy Mobile</li>
<li>Ergatta</li>
<li>Lyft</li>
<li><a href="https://engineering.mercari.com/en/blog/entry/20221215-16cdd59909/" rel="nofollow">Mercari</a></li>
<li>Robinhood</li>
<li><a href="https://www.youtube.com/watch?v=wy3Q38VJ5uQ" rel="nofollow">Slack</a></li>
<li>Snap</li>
<li>Spotify</li>
<li>SwiftLint</li>
<li>Ten Ten</li>
<li>Tinder</li>
<li>Tokopedia</li>
</ul>
<p dir="auto">If you are also using rules_xcodeproj for your project, feel free to open a PR
to include it in the list above.</p>
<h2 dir="auto"><a id="user-content-compatibility" class="anchor" aria-hidden="true" tabindex="-1" href="#compatibility"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Compatibility</h2>
<table>
<thead>
<tr>
<th align="center">rules_xcodeproj</th>
<th align="center">Bazel</th>
<th align="center"><a href="https://github.com/bazelbuild/rules_apple">rules_apple</a></th>
<th align="center"><a href="https://github.com/bazelbuild/rules_swift">rules_swift</a></th>
<th align="center">Xcode</th>
<th align="center">macOS</th>
<th align="center">Supporting Branch</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1.7.0+</td>
<td align="center">5.3–6.x</td>
<td align="center">1.0.1–2.x</td>
<td align="center">1.x</td>
<td align="center">13.3–15.x</td>
<td align="center">12–13.x</td>
<td align="center"><code>main</code></td>
</tr>
<tr>
<td align="center">1.4.0-1.6.0</td>
<td align="center">5.3–6.x</td>
<td align="center">1.0.1–2.x</td>
<td align="center">1.x</td>
<td align="center">13.3–14.3</td>
<td align="center">12–13.x</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">1.0-1.3.3</td>
<td align="center">5.3–6.x</td>
<td align="center">1.0.1–2.x</td>
<td align="center">1.x</td>
<td align="center">13.3–14.2</td>
<td align="center">12–13.x</td>
<td align="center">-</td>
</tr>
</tbody>
</table>
<p dir="auto">More versions of these tools and rulesets might be supported, but these are the
ones we’ve officially tested with.</p>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" tabindex="-1" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<p dir="auto">From the
<a href="https://github.com/MobileNativeFoundation/rules_xcodeproj/releases">release you wish to use</a>,
copy the Bzlmod or WORKSPACE snippet into your repository.
If you want to manually build a release archive, you can use this command:
<code>bazel build //distribution:release</code>.</p>
<h2 dir="auto"><a id="user-content-usage" class="anchor" aria-hidden="true" tabindex="-1" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Usage</h2>
<p dir="auto">Please see the documentation in the <a href="docs/README.md">docs</a> directory and
examples in the <a href="examples/README.md">examples</a> directory.</p>
<h3 dir="auto"><a id="user-content-simple-ios-example" class="anchor" aria-hidden="true" tabindex="-1" href="#simple-ios-example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Simple iOS example</h3>
<p dir="auto">Given a root level <code>BUILD</code> file:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(
  &quot;@build_bazel_rules_apple//apple:ios.bzl&quot;,
  &quot;ios_application&quot;,
  &quot;ios_unit_test&quot;,
)
load(&quot;@build_bazel_rules_swift//swift:swift.bzl&quot;, &quot;swift_library&quot;)
load(
    &quot;@rules_xcodeproj//xcodeproj:defs.bzl&quot;,
    &quot;top_level_target&quot;,
    &quot;xcodeproj&quot;,
)

xcodeproj(
    name = &quot;xcodeproj&quot;,
    project_name = &quot;App&quot;,
    tags = [&quot;manual&quot;],
    top_level_targets = [
        top_level_target(&quot;:App&quot;, target_environments = [&quot;device&quot;, &quot;simulator&quot;]),
        &quot;:Tests&quot;,
    ],
)

ios_application(
    name = &quot;App&quot;,
    bundle_id = &quot;com.example.app&quot;,
    families = [&quot;iphone&quot;, &quot;ipad&quot;],
    infoplists = [&quot;:Info.plist&quot;],
    minimum_os_version = &quot;15.0&quot;,
    visibility = [&quot;//visibility:public&quot;],
    deps = [&quot;:Lib&quot;],
)

swift_library(
    name = &quot;Lib&quot;,
    srcs = glob([&quot;src/*.swift&quot;]),
)

ios_unit_test(
    name = &quot;Tests&quot;,
    bundle_id = &quot;com.example.tests&quot;,
    minimum_os_version = &quot;15.0&quot;,
    test_host = &quot;:App&quot;,
    visibility = [&quot;//visibility:public&quot;],
    deps = [&quot;:TestLib&quot;],
)

swift_library(
    name = &quot;TestLib&quot;,
    srcs = glob([&quot;test/*.swift&quot;]),
)"><pre><span class="pl-en">load</span>(
  <span class="pl-s">"@build_bazel_rules_apple//apple:ios.bzl"</span>,
  <span class="pl-s">"ios_application"</span>,
  <span class="pl-s">"ios_unit_test"</span>,
)
<span class="pl-en">load</span>(<span class="pl-s">"@build_bazel_rules_swift//swift:swift.bzl"</span>, <span class="pl-s">"swift_library"</span>)
<span class="pl-en">load</span>(
    <span class="pl-s">"@rules_xcodeproj//xcodeproj:defs.bzl"</span>,
    <span class="pl-s">"top_level_target"</span>,
    <span class="pl-s">"xcodeproj"</span>,
)

<span class="pl-en">xcodeproj</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"xcodeproj"</span>,
    <span class="pl-s1">project_name</span> <span class="pl-c1">=</span> <span class="pl-s">"App"</span>,
    <span class="pl-s1">tags</span> <span class="pl-c1">=</span> [<span class="pl-s">"manual"</span>],
    <span class="pl-s1">top_level_targets</span> <span class="pl-c1">=</span> [
        <span class="pl-en">top_level_target</span>(<span class="pl-s">":App"</span>, <span class="pl-s1">target_environments</span> <span class="pl-c1">=</span> [<span class="pl-s">"device"</span>, <span class="pl-s">"simulator"</span>]),
        <span class="pl-s">":Tests"</span>,
    ],
)

<span class="pl-en">ios_application</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"App"</span>,
    <span class="pl-s1">bundle_id</span> <span class="pl-c1">=</span> <span class="pl-s">"com.example.app"</span>,
    <span class="pl-s1">families</span> <span class="pl-c1">=</span> [<span class="pl-s">"iphone"</span>, <span class="pl-s">"ipad"</span>],
    <span class="pl-s1">infoplists</span> <span class="pl-c1">=</span> [<span class="pl-s">":Info.plist"</span>],
    <span class="pl-s1">minimum_os_version</span> <span class="pl-c1">=</span> <span class="pl-s">"15.0"</span>,
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>],
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [<span class="pl-s">":Lib"</span>],
)

<span class="pl-en">swift_library</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"Lib"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> <span class="pl-en">glob</span>([<span class="pl-s">"src/*.swift"</span>]),
)

<span class="pl-en">ios_unit_test</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"Tests"</span>,
    <span class="pl-s1">bundle_id</span> <span class="pl-c1">=</span> <span class="pl-s">"com.example.tests"</span>,
    <span class="pl-s1">minimum_os_version</span> <span class="pl-c1">=</span> <span class="pl-s">"15.0"</span>,
    <span class="pl-s1">test_host</span> <span class="pl-c1">=</span> <span class="pl-s">":App"</span>,
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>],
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [<span class="pl-s">":TestLib"</span>],
)

<span class="pl-en">swift_library</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"TestLib"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> <span class="pl-en">glob</span>([<span class="pl-s">"test/*.swift"</span>]),
)</pre></div>
<p dir="auto">You can then create the Xcode project with:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel run //:xcodeproj"><pre>bazel run //:xcodeproj</pre></div>
<p dir="auto">The generated project will be in the workspace next to the <code>BUILD</code> file at
<code>App.xcodeproj</code>.</p>
<h2 dir="auto"><a id="user-content-acknowledgements" class="anchor" aria-hidden="true" tabindex="-1" href="#acknowledgements"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Acknowledgements</h2>
<ul dir="auto">
<li>Inspired by <a href="https://github.com/bazelbuild/tulsi">Tulsi</a> and the custom project generators at Target and Lyft.</li>
<li>Made possible by <a href="https://github.com/tuist/XcodeProj">XcodeProj</a>.</li>
<li>Initial design and development by <a href="https://github.com/brentleyjones">@brentleyjones</a>.</li>
<li><a href="https://user-images.githubusercontent.com/158658/161647598-223361dc-030d-431a-b4fe-d92592ed5530.png" rel="nofollow">Logo</a> by <a href="https://github.com/pennig">@pennig</a>.</li>
<li>Donated to the Mobile Native Foundation by <a href="https://buildbuddy.io" rel="nofollow">BuildBuddy</a>.</li>
</ul>
<section data-footnotes="" class="footnotes"><h2 id="footnote-label" class="sr-only" dir="auto">Footnotes</h2>
<ol dir="auto">
<li id="user-content-fn-bwx_warning-a3e04f744875d029697726d37c9f831e">
<p dir="auto">Build with Bazel mode is the build mode with first class
support. We will try to make Build with Xcode mode work with every project, but
there are limitations that can
<a href="https://github.com/MobileNativeFoundation/rules_xcodeproj/blob/main/docs/faq.md#why-do-some-of-my-swift_librarys-compile-twice-in-bwx-mode">make the experience subpar</a>,
or not work at all. We recommend using BwB mode if possible. <a href="#user-content-fnref-bwx_warning-a3e04f744875d029697726d37c9f831e" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>
</article></div>