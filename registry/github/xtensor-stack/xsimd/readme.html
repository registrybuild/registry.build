<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto"><a target="_blank" rel="noopener noreferrer" href="docs/source/xsimd.svg"><img src="docs/source/xsimd.svg" alt="xsimd" style="max-width: 100%;"></a></h1><a id="" class="anchor" aria-label="Permalink: " href="#"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://github.com/xtensor-stack/xsimd/actions/workflows/android.yml"><img src="https://github.com/xtensor-stack/xsimd/actions/workflows/android.yml/badge.svg" alt="GHA android" style="max-width: 100%;"></a>
<a href="https://github.com/xtensor-stack/xsimd/actions/workflows/cross-rvv.yml"><img src="https://github.com/xtensor-stack/xsimd/actions/workflows/cross-rvv.yml/badge.svg" alt="GHA cross-rvv" style="max-width: 100%;"></a>
<a href="https://github.com/xtensor-stack/xsimd/actions/workflows/cross-sve.yml"><img src="https://github.com/xtensor-stack/xsimd/actions/workflows/cross-sve.yml/badge.svg" alt="GHA cross-sve" style="max-width: 100%;"></a>
<a href="https://github.com/xtensor-stack/xsimd/actions/workflows/cross.yml"><img src="https://github.com/xtensor-stack/xsimd/actions/workflows/cross.yml/badge.svg" alt="GHA cross" style="max-width: 100%;"></a>
<a href="https://github.com/xtensor-stack/xsimd/actions/workflows/cxx-no-exceptions.yml"><img src="https://github.com/xtensor-stack/xsimd/actions/workflows/cxx-no-exceptions.yml/badge.svg" alt="GHA cxx-no-exceptions" style="max-width: 100%;"></a>
<a href="https://github.com/xtensor-stack/xsimd/actions/workflows/cxx-versions.yml"><img src="https://github.com/xtensor-stack/xsimd/actions/workflows/cxx-versions.yml/badge.svg" alt="GHA cxx-versions" style="max-width: 100%;"></a>
<a href="https://github.com/xtensor-stack/xsimd/actions/workflows/emscripten.yml"><img src="https://github.com/xtensor-stack/xsimd/actions/workflows/emscripten.yml/badge.svg" alt="GHA emscripten" style="max-width: 100%;"></a>
<a href="https://github.com/xtensor-stack/xsimd/actions/workflows/linux.yml"><img src="https://github.com/xtensor-stack/xsimd/actions/workflows/linux.yml/badge.svg" alt="GHA linux" style="max-width: 100%;"></a>
<a href="https://github.com/xtensor-stack/xsimd/actions/workflows/macos.yml"><img src="https://github.com/xtensor-stack/xsimd/actions/workflows/macos.yml/badge.svg" alt="GHA macos" style="max-width: 100%;"></a>
<a href="https://github.com/xtensor-stack/xsimd/actions/workflows/windows.yml"><img src="https://github.com/xtensor-stack/xsimd/actions/workflows/windows.yml/badge.svg" alt="GHA windows" style="max-width: 100%;"></a>
<a href="https://xsimd.readthedocs.io/en/latest/?badge=latest" rel="nofollow"><img src="https://camo.githubusercontent.com/c9c2e3b055c4c218b3c9625835ea11b0ead7c18c1d1a5fbf47230a90dcdb7fb4/687474703a2f2f72656164746865646f63732e6f72672f70726f6a656374732f7873696d642f62616467652f3f76657273696f6e3d6c6174657374" alt="Documentation Status" data-canonical-src="http://readthedocs.org/projects/xsimd/badge/?version=latest" style="max-width: 100%;"></a>
<a href="https://xtensor.zulipchat.com/#narrow/channel/539553-Ask-anything" rel="nofollow"><img src="https://camo.githubusercontent.com/ed1055852775fb3e0815e186fbf217e8003dc5ff46761d8c8def0cf2b926d15f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f736f6369616c5f636861742d7a756c69702d626c75652e737667" alt="Zulip" data-canonical-src="https://img.shields.io/badge/social_chat-zulip-blue.svg" style="max-width: 100%;"></a></p>
<p dir="auto">C++ wrappers for SIMD intrinsics</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Introduction</h2><a id="user-content-introduction" class="anchor" aria-label="Permalink: Introduction" href="#introduction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">SIMD (Single Instruction, Multiple Data) is a feature of microprocessors that has been available for many years. SIMD instructions perform a single operation
on a batch of values at once, and thus provide a way to significantly accelerate code execution. However, these instructions differ between microprocessor
vendors and compilers.</p>
<p dir="auto"><code>xsimd</code> provides a unified means for using these features for library authors. Namely, it enables manipulation of batches of numbers with the same arithmetic operators as for single values. It also provides accelerated implementation of common mathematical functions operating on batches.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Adoption</h2><a id="user-content-adoption" class="anchor" aria-label="Permalink: Adoption" href="#adoption"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Beyond Xtensor, Xsimd has been adopted by major open-source projects, such as Mozilla Firefox, Apache Arrow, Pythran, and Krita.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">History</h2><a id="user-content-history" class="anchor" aria-label="Permalink: History" href="#history"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The XSimd project started with a series of blog articles by Johan Mabille on how to implement wrappers for SIMD intrinsicts.
The archives of the blog can be found here: <a href="http://johanmabille.github.io/blog/archives/" rel="nofollow">The C++ Scientist</a>. The design described in
the articles remained close to the actual architecture of XSimd up until Version 8.0.</p>
<p dir="auto">The mathematical functions are a lightweight implementation of the algorithms originally implemented in the now deprecated <a href="https://github.com/NumScale/boost.simd">boost.SIMD</a> project.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Requirements</h2><a id="user-content-requirements" class="anchor" aria-label="Permalink: Requirements" href="#requirements"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>xsimd</code> requires a C++11 compliant compiler. The following C++ compilers are supported:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Compiler</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>Microsoft Visual Studio</td>
<td>MSVC 2015 update 2 and above</td>
</tr>
<tr>
<td>g++</td>
<td>4.9 and above</td>
</tr>
<tr>
<td>clang</td>
<td>4.0 and above</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">The following SIMD instruction set extensions are supported:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Architecture</th>
<th>Instruction set extensions</th>
</tr>
</thead>
<tbody>
<tr>
<td>x86</td>
<td>SSE2, SSE3, SSSE3, SSE4.1, SSE4.2, AVX, AVX2, FMA3+SSE, FMA3+AVX, FMA3+AVX2</td>
</tr>
<tr>
<td>x86</td>
<td>AVX512BW, AVX512CD, AVX512DQ, AVX512F (gcc7 and higher)</td>
</tr>
<tr>
<td>x86 AMD</td>
<td>FMA4</td>
</tr>
<tr>
<td>ARM</td>
<td>NEON, NEON64, SVE128/256/512 (fixed vector size)</td>
</tr>
<tr>
<td>WebAssembly</td>
<td>WASM</td>
</tr>
<tr>
<td>powerpc64</td>
<td>VSX</td>
</tr>
<tr>
<td>RISC-V</td>
<td>RISC-V128/256/512 (fixed vector size)</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Installation</h2><a id="user-content-installation" class="anchor" aria-label="Permalink: Installation" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Install from conda-forge</h3><a id="user-content-install-from-conda-forge" class="anchor" aria-label="Permalink: Install from conda-forge" href="#install-from-conda-forge"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A package for xsimd is available on the mamba (or conda) package manager.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="mamba install -c conda-forge xsimd"><pre>mamba install -c conda-forge xsimd</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Install with Spack</h3><a id="user-content-install-with-spack" class="anchor" aria-label="Permalink: Install with Spack" href="#install-with-spack"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A package for xsimd is available on the Spack package manager.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="spack install xsimd
spack load xsimd"><pre>spack install xsimd
spack load xsimd</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Install from sources</h3><a id="user-content-install-from-sources" class="anchor" aria-label="Permalink: Install from sources" href="#install-from-sources"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can directly install it from the sources with cmake:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cmake -D CMAKE_INSTALL_PREFIX=your_install_prefix .
make install"><pre>cmake -D CMAKE_INSTALL_PREFIX=your_install_prefix <span class="pl-c1">.</span>
make install</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Documentation</h2><a id="user-content-documentation" class="anchor" aria-label="Permalink: Documentation" href="#documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To get started with using <code>xsimd</code>, check out the full documentation</p>
<p dir="auto"><a href="http://xsimd.readthedocs.io/" rel="nofollow">http://xsimd.readthedocs.io/</a></p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Dependencies</h2><a id="user-content-dependencies" class="anchor" aria-label="Permalink: Dependencies" href="#dependencies"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>xsimd</code> has an optional dependency on the <a href="https://github.com/xtensor-stack/xtl">xtl</a> library:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th><code>xsimd</code></th>
<th><code>xtl</code> (optional)</th>
</tr>
</thead>
<tbody>
<tr>
<td>master</td>
<td>^0.7.0</td>
</tr>
<tr>
<td>12.x</td>
<td>^0.7.0</td>
</tr>
<tr>
<td>11.x</td>
<td>^0.7.0</td>
</tr>
<tr>
<td>10.x</td>
<td>^0.7.0</td>
</tr>
<tr>
<td>9.x</td>
<td>^0.7.0</td>
</tr>
<tr>
<td>8.x</td>
<td>^0.7.0</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">The dependency on <code>xtl</code> is required if you want to support vectorization for <code>xtl::xcomplex</code>. In this case, you must build your project with C++14 support enabled.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Usage</h2><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The version 8 of the library is a complete rewrite and there are some slight differences with 7.x versions.
A migration guide will be available soon. In the meanwhile, the following examples show how to use both versions
7 and 8 of the library?</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Explicit use of an instruction set extension</h3><a id="user-content-explicit-use-of-an-instruction-set-extension" class="anchor" aria-label="Permalink: Explicit use of an instruction set extension" href="#explicit-use-of-an-instruction-set-extension"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Here is an example that computes the mean of two sets of 4 double floating point values, assuming AVX extension is supported:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#include &lt;iostream&gt;
#include &quot;xsimd/xsimd.hpp&quot;

namespace xs = xsimd;

int main(int argc, char* argv[])
{
    xs::batch&lt;double, xs::avx2&gt; a = {1.5, 2.5, 3.5, 4.5};
    xs::batch&lt;double, xs::avx2&gt; b = {2.5, 3.5, 4.5, 5.5};
    auto mean = (a + b) / 2;
    std::cout &lt;&lt; mean &lt;&lt; std::endl;
    return 0;
}"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>iostream<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">"</span>xsimd/xsimd.hpp<span class="pl-pds">"</span></span>

<span class="pl-k">namespace</span> <span class="pl-en">xs</span> <span class="pl-k">=</span> xsimd;

<span class="pl-k">int</span> <span class="pl-en">main</span>(<span class="pl-k">int</span> argc, <span class="pl-k">char</span>* argv[])
{
    xs::batch&lt;<span class="pl-k">double</span>, xs::avx2&gt; a = {<span class="pl-c1">1.5</span>, <span class="pl-c1">2.5</span>, <span class="pl-c1">3.5</span>, <span class="pl-c1">4.5</span>};
    xs::batch&lt;<span class="pl-k">double</span>, xs::avx2&gt; b = {<span class="pl-c1">2.5</span>, <span class="pl-c1">3.5</span>, <span class="pl-c1">4.5</span>, <span class="pl-c1">5.5</span>};
    <span class="pl-k">auto</span> mean = (a + b) / <span class="pl-c1">2</span>;
    std::cout &lt;&lt; mean &lt;&lt; std::endl;
    <span class="pl-k">return</span> <span class="pl-c1">0</span>;
}</pre></div>
<p dir="auto">Do not forget to enable AVX extension when building the example. With gcc or clang, this is done with the <code>-mavx</code> flag,
on MSVC you have to pass the <code>/arch:AVX</code> option.</p>
<p dir="auto">This example outputs:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="(2.0, 3.0, 4.0, 5.0)"><pre>(<span class="pl-c1">2.0</span>, <span class="pl-c1">3.0</span>, <span class="pl-c1">4.0</span>, <span class="pl-c1">5.0</span>)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Auto detection of the instruction set extension to be used</h3><a id="user-content-auto-detection-of-the-instruction-set-extension-to-be-used" class="anchor" aria-label="Permalink: Auto detection of the instruction set extension to be used" href="#auto-detection-of-the-instruction-set-extension-to-be-used"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The same computation operating on vectors and using the most performant instruction set available:</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#include &lt;cstddef&gt;
#include &lt;vector&gt;
#include &quot;xsimd/xsimd.hpp&quot;

namespace xs = xsimd;
using vector_type = std::vector&lt;double, xsimd::aligned_allocator&lt;double&gt;&gt;;

void mean(const vector_type&amp; a, const vector_type&amp; b, vector_type&amp; res)
{
    std::size_t size = a.size();
    constexpr std::size_t simd_size = xsimd::simd_type&lt;double&gt;::size;
    std::size_t vec_size = size - size % simd_size;

    for(std::size_t i = 0; i &lt; vec_size; i += simd_size)
    {
        auto ba = xs::load_aligned(&amp;a[i]);
        auto bb = xs::load_aligned(&amp;b[i]);
        auto bres = (ba + bb) / 2.;
        bres.store_aligned(&amp;res[i]);
    }
    for(std::size_t i = vec_size; i &lt; size; ++i)
    {
        res[i] = (a[i] + b[i]) / 2.;
    }
}"><pre>#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>cstddef<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">&lt;</span>vector<span class="pl-pds">&gt;</span></span>
#<span class="pl-k">include</span> <span class="pl-s"><span class="pl-pds">"</span>xsimd/xsimd.hpp<span class="pl-pds">"</span></span>

<span class="pl-k">namespace</span> <span class="pl-en">xs</span> <span class="pl-k">=</span> xsimd;
<span class="pl-k">using</span> vector_type = std::vector&lt;<span class="pl-k">double</span>, xsimd::aligned_allocator&lt;<span class="pl-k">double</span>&gt;&gt;;

<span class="pl-k">void</span> <span class="pl-en">mean</span>(<span class="pl-k">const</span> vector_type&amp; a, <span class="pl-k">const</span> vector_type&amp; b, vector_type&amp; res)
{
    std::<span class="pl-c1">size_t</span> size = a.<span class="pl-c1">size</span>();
    <span class="pl-k">constexpr</span> std::<span class="pl-c1">size_t</span> simd_size = xsimd::simd_type&lt;<span class="pl-k">double</span>&gt;::size;
    std::<span class="pl-c1">size_t</span> vec_size = size - size % simd_size;

    <span class="pl-k">for</span>(std::<span class="pl-c1">size_t</span> i = <span class="pl-c1">0</span>; i &lt; vec_size; i += simd_size)
    {
        <span class="pl-k">auto</span> ba = <span class="pl-c1">xs::load_aligned</span>(&amp;a[i]);
        <span class="pl-k">auto</span> bb = <span class="pl-c1">xs::load_aligned</span>(&amp;b[i]);
        <span class="pl-k">auto</span> bres = (ba + bb) / <span class="pl-c1">2</span>.;
        bres.<span class="pl-c1">store_aligned</span>(&amp;res[i]);
    }
    <span class="pl-k">for</span>(std::<span class="pl-c1">size_t</span> i = vec_size; i &lt; size; ++i)
    {
        res[i] = (a[i] + b[i]) / <span class="pl-c1">2</span>.;
    }
}</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Building and Running the Tests</h2><a id="user-content-building-and-running-the-tests" class="anchor" aria-label="Permalink: Building and Running the Tests" href="#building-and-running-the-tests"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Building the tests requires <a href="https://cmake.org" rel="nofollow">cmake</a>.</p>
<p dir="auto"><code>cmake</code> is available as a package for most linux distributions. Besides, they can also be installed with the <code>conda</code> package manager (even on windows):</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="conda install -c conda-forge cmake"><pre>conda install -c conda-forge cmake</pre></div>
<p dir="auto">Once <code>cmake</code> is installed, you can build and run the tests:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="mkdir build
cd build
cmake ../ -DBUILD_TESTS=ON
make xtest"><pre>mkdir build
<span class="pl-c1">cd</span> build
cmake ../ -DBUILD_TESTS=ON
make xtest</pre></div>
<p dir="auto">In the context of continuous integration with Travis CI, tests are run in a <code>conda</code> environment, which can be activated with</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cd test
conda env create -f ./test-environment.yml
source activate test-xsimd
cd ..
cmake . -DBUILD_TESTS=ON
make xtest"><pre><span class="pl-c1">cd</span> <span class="pl-c1">test</span>
conda env create -f ./test-environment.yml
<span class="pl-c1">source</span> activate test-xsimd
<span class="pl-c1">cd</span> ..
cmake <span class="pl-c1">.</span> -DBUILD_TESTS=ON
make xtest</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Building the HTML Documentation</h2><a id="user-content-building-the-html-documentation" class="anchor" aria-label="Permalink: Building the HTML Documentation" href="#building-the-html-documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">xsimd's documentation is built with three tools</p>
<ul dir="auto">
<li><a href="http://www.doxygen.org" rel="nofollow">doxygen</a></li>
<li><a href="http://www.sphinx-doc.org" rel="nofollow">sphinx</a></li>
<li><a href="https://breathe.readthedocs.io" rel="nofollow">breathe</a></li>
</ul>
<p dir="auto">While doxygen must be installed separately, you can install breathe by typing</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="pip install breathe"><pre>pip install breathe</pre></div>
<p dir="auto">Breathe can also be installed with <code>conda</code></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="conda install -c conda-forge breathe"><pre>conda install -c conda-forge breathe</pre></div>
<p dir="auto">Finally, build the documentation with</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="make html"><pre>make html</pre></div>
<p dir="auto">from the <code>docs</code> subdirectory.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">License</h2><a id="user-content-license" class="anchor" aria-label="Permalink: License" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">We use a shared copyright model that enables all contributors to maintain the
copyright on their contributions.</p>
<p dir="auto">This software is licensed under the BSD-3-Clause license. See the <a href="LICENSE">LICENSE</a> file for details.</p>
</article></div>