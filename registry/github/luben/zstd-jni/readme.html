<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-zstd-jni" class="anchor" aria-hidden="true" tabindex="-1" href="#zstd-jni"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Zstd-jni</h1>
<p dir="auto"><a href="https://github.com/luben/zstd-jni/actions"><img src="https://github.com/luben/zstd-jni/workflows/CI/badge.svg" alt="CI" style="max-width: 100%;"></a>
<a href="http://codecov.io/github/luben/zstd-jni?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/0cd285830b7f7912085eb6b4bbffdb4d7805d2fc911768b9f283be85cf6eefd2/687474703a2f2f636f6465636f762e696f2f6769746875622f6c7562656e2f7a7374642d6a6e692f636f7665726167652e7376673f6272616e63683d6d6173746572" alt="codecov.io" data-canonical-src="http://codecov.io/github/luben/zstd-jni/coverage.svg?branch=master" style="max-width: 100%;"></a>
<a href="https://search.maven.org/artifact/com.github.luben/zstd-jni/" rel="nofollow"><img src="https://camo.githubusercontent.com/c6458f2ad1132c0506e75ad3dd60487aeee364876033317fb26a4a399f422cf4/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f636f6d2e6769746875622e6c7562656e2f7a7374642d6a6e692e7376673f6c6162656c3d4d6176656e25323043656e7472616c" alt="Maven Central" data-canonical-src="https://img.shields.io/maven-central/v/com.github.luben/zstd-jni.svg?label=Maven%20Central" style="max-width: 100%;"></a>
<a href="https://www.javadoc.io/doc/com.github.luben/zstd-jni" rel="nofollow"><img src="https://camo.githubusercontent.com/3a535943e558c47f2392c622fa555a05d7b4fd4b2fe0b4ab246e43bd4c0daa64/68747470733a2f2f7777772e6a617661646f632e696f2f62616467652f636f6d2e6769746875622e6c7562656e2f7a7374642d6a6e692e737667" alt="Javadocs" data-canonical-src="https://www.javadoc.io/badge/com.github.luben/zstd-jni.svg" style="max-width: 100%;"></a></p>
<h2 dir="auto"><a id="user-content-overview" class="anchor" aria-hidden="true" tabindex="-1" href="#overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Overview</h2>
<p dir="auto">JNI bindings for <strong>Zstd</strong> native library that provides fast and high
compression lossless algorithm for Android, Java and all JVM languages:</p>
<ul dir="auto">
<li>
<p dir="auto">static compress/decompress methods</p>
</li>
<li>
<p dir="auto">implementation of InputStream and OutputStream for transparent compression
of data streams fully compatible with the "zstd" program.</p>
</li>
<li>
<p dir="auto">minimal performance overhead</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-zstd" class="anchor" aria-hidden="true" tabindex="-1" href="#zstd"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Zstd</h2>
<p dir="auto"><strong>Zstd</strong>, short for Zstandard, is a new lossless compression algorithm, which
provides both good compression ratio <em>and</em> speed for your standard compression
needs. "Standard" translates into everyday situations which neither look for
highest possible ratio (which LZMA and ZPAQ cover) nor extreme speeds (which
LZ4 covers).</p>
<p dir="auto"><strong>Zstd</strong> is developed by Yann Collet and the source is available at:
<a href="https://github.com/facebook/zstd">https://github.com/facebook/zstd</a></p>
<p dir="auto">The motivation for development, the algorithm used and its properties are
explained in the blog post that introduces the library:
<a href="http://fastcompression.blogspot.com/2015/01/zstd-stronger-compression-algorithm.html" rel="nofollow">http://fastcompression.blogspot.com/2015/01/zstd-stronger-compression-algorithm.html</a></p>
<h2 dir="auto"><a id="user-content-status-and-availability" class="anchor" aria-hidden="true" tabindex="-1" href="#status-and-availability"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Status and availability</h2>
<p dir="auto"><strong>Zstd</strong> is production ready with a stable format.</p>
<p dir="auto"><strong>Zstd-jni</strong> is tracking the release branch of <strong>Zstd</strong> (master) with
compatibility support for the legacy formats (since version 0.4).</p>
<p dir="auto"><strong>Zstd-jni</strong> version uses the base <strong>Zstd</strong> version with <strong>Zstd-jni</strong> release
appended with a dash, e.g. "1.2.0-2" is the second <strong>Zstd-jni</strong> release based
on <strong>Zstd</strong> version 1.2.0.</p>
<h2 dir="auto"><a id="user-content-limitations" class="anchor" aria-hidden="true" tabindex="-1" href="#limitations"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Limitations</h2>
<p dir="auto">The Java classes cannot be renamed/minimized/relocated. JVM linking the native
library depends on the class name that is trying to link the native part, so
changing the class names will lead to failed linking at runtime.</p>
<h2 dir="auto"><a id="user-content-building-and-dependencies" class="anchor" aria-hidden="true" tabindex="-1" href="#building-and-dependencies"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Building and dependencies</h2>
<p dir="auto"><strong>Zstd-jni</strong> uses SBT for building the library and running the tests.</p>
<p dir="auto">The build system depends on Scala and the tests depend on ScalaTest and
ScalaCheck but the produced JAR does not have any dependencies. It also
embeds the native library.</p>
<p dir="auto">Compile and test:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content=" $ ./sbt compile test package"><pre class="notranslate"><code> $ ./sbt compile test package
</code></pre></div>
<p dir="auto">If you want to publish it to you local ivy2 repository:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content=" $ ./sbt publishLocal"><pre class="notranslate"><code> $ ./sbt publishLocal
</code></pre></div>
<p dir="auto"><em>Note</em>: for the moment the project depends on local build of <code>sbt-java-module-info</code>
v0.5.2 as that version is not publushed to Maven.</p>
<h2 dir="auto"><a id="user-content-binary-releases" class="anchor" aria-hidden="true" tabindex="-1" href="#binary-releases"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Binary releases</h2>
<p dir="auto">The binary releases are architecture dependent because we are embedding the
native library in the provided Jar file. Currently they are built for
<em>linux-amd64</em>, <em>linux-i386</em>, <em>linux-aarch64</em>, <em>linux-armhf</em>, <em>linux-ppc64</em>,
<em>linux-ppc64le</em>, <em>linux-mips64</em>, <em>linux-s390x</em>, <em>linux-riskv64</em>, <em>linux-loongarch64</em>,
<em>win-amd64</em>, <em>win-x86</em>, <em>win-aarch64</em>, <em>darwin-x86_64</em> (MacOS X), <em>darwin-aarch64</em>,
<em>freebsd-amd64</em>, and <em>freebsd-i386</em>.</p>
<p dir="auto">More builds will be available if I get access to more platforms.</p>
<p dir="auto">You can find published releases on Maven Central.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&lt;dependency&gt;
    &lt;groupId&gt;com.github.luben&lt;/groupId&gt;
    &lt;artifactId&gt;zstd-jni&lt;/artifactId&gt;
    &lt;version&gt;VERSION&lt;/version&gt;
&lt;/dependency&gt;"><pre class="notranslate"><code>&lt;dependency&gt;
    &lt;groupId&gt;com.github.luben&lt;/groupId&gt;
    &lt;artifactId&gt;zstd-jni&lt;/artifactId&gt;
    &lt;version&gt;VERSION&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div>
<p dir="auto">sbt dependency:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="libraryDependencies += &quot;com.github.luben&quot; % &quot;zstd-jni&quot; % &quot;VERSION&quot;"><pre class="notranslate"><code>libraryDependencies += "com.github.luben" % "zstd-jni" % "VERSION"
</code></pre></div>
<p dir="auto">Single architecture classified jars are also published. They can be used like:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&lt;dependency&gt;
    &lt;groupId&gt;com.github.luben&lt;/groupId&gt;
    &lt;artifactId&gt;zstd-jni&lt;/artifactId&gt;
    &lt;version&gt;VERSION&lt;/version&gt;
    &lt;classifier&gt;linux_amd64&lt;/classifier&gt;
&lt;/dependency&gt;"><pre class="notranslate"><code>&lt;dependency&gt;
    &lt;groupId&gt;com.github.luben&lt;/groupId&gt;
    &lt;artifactId&gt;zstd-jni&lt;/artifactId&gt;
    &lt;version&gt;VERSION&lt;/version&gt;
    &lt;classifier&gt;linux_amd64&lt;/classifier&gt;
&lt;/dependency&gt;
</code></pre></div>
<p dir="auto">or for sbt:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="libraryDependencies += &quot;com.github.luben&quot; % &quot;zstd-jni&quot; % &quot;VERSION&quot; classifier &quot;linux_amd64&quot;"><pre class="notranslate"><code>libraryDependencies += "com.github.luben" % "zstd-jni" % "VERSION" classifier "linux_amd64"
</code></pre></div>
<p dir="auto">Link for direct download if you don't use a dependency manager:</p>
<ul dir="auto">
<li><a href="https://repo1.maven.org/maven2/com/github/luben/zstd-jni/" rel="nofollow">https://repo1.maven.org/maven2/com/github/luben/zstd-jni/</a></li>
</ul>
<p dir="auto">If there is not yet a binary release compatible with your platform look how
to build it locally under the <a href="#building-and-dependencies">Building</a> section.</p>
<h2 dir="auto"><a id="user-content-android-support" class="anchor" aria-hidden="true" tabindex="-1" href="#android-support"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Android support</h2>
<p dir="auto">Zstd-jni is usable in Android applications by importing the sources in Android
Studio. I guess using git sub-modules will also work.</p>
<p dir="auto">Android archive (<em>zstd-jni.aar</em>) is also published on maven central. You will need
to add the repository in your build.gradle, e.g.:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="allprojects {
    repositories {
        jcenter()
        mavenCentral()
    }
}"><pre class="notranslate"><code>allprojects {
    repositories {
        jcenter()
        mavenCentral()
    }
}
</code></pre></div>
<p dir="auto">as it is not added by default by Android Studio. And then add dependency on the
prebuilt android archive (aar):</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="dependencies {
    implementation &quot;com.github.luben:zstd-jni:VERSION@aar&quot;
    testImplementation &quot;com.github.luben:zstd-jni:VERSION&quot;
}"><pre class="notranslate"><code>dependencies {
    implementation "com.github.luben:zstd-jni:VERSION@aar"
    testImplementation "com.github.luben:zstd-jni:VERSION"
}
</code></pre></div>
<p dir="auto">For example Android app and how to declare dependencies and use zstd-jni, consult
the 2nd and 3rd commit of: <a href="https://github.com/luben/ZstdAndroidExample">https://github.com/luben/ZstdAndroidExample</a></p>
<h2 dir="auto"><a id="user-content-license" class="anchor" aria-hidden="true" tabindex="-1" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>License</h2>
<p dir="auto">The code for these JNI bindings is licenced under 2-clause BSD license.
The native <strong>Zstd</strong> library is licensed under 3-clause BSD license or
GPL2. See the LICENSE file and LICENSE and COPYRIGHT in src/main/native
for full copyright and conditions.</p>
</article></div>